function wu(r,n){for(var s=0;s<n.length;s++){const c=n[s];if(typeof c!="string"&&!Array.isArray(c)){for(const f in c)if(f!=="default"&&!(f in r)){const d=Object.getOwnPropertyDescriptor(c,f);d&&Object.defineProperty(r,f,d.get?d:{enumerable:!0,get:()=>c[f]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))c(f);new MutationObserver(f=>{for(const d of f)if(d.type==="childList")for(const w of d.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&c(w)}).observe(document,{childList:!0,subtree:!0});function s(f){const d={};return f.integrity&&(d.integrity=f.integrity),f.referrerpolicy&&(d.referrerPolicy=f.referrerpolicy),f.crossorigin==="use-credentials"?d.credentials="include":f.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function c(f){if(f.ep)return;f.ep=!0;const d=s(f);fetch(f.href,d)}})();function Bn(){}function Hl(r){return r()}function Ua(){return Object.create(null)}function ur(r){r.forEach(Hl)}function Gl(r){return typeof r=="function"}function Wl(r,n){return r!=r?n==n:r!==n||r&&typeof r=="object"||typeof r=="function"}function Eu(r){return Object.keys(r).length===0}function xt(r,n){r.appendChild(n)}function fr(r,n,s){r.insertBefore(n,s||null)}function Gn(r){r.parentNode&&r.parentNode.removeChild(r)}function Tt(r){return document.createElement(r)}function Au(r){return document.createTextNode(r)}function gn(){return Au(" ")}function Dr(r,n,s,c){return r.addEventListener(n,s,c),()=>r.removeEventListener(n,s,c)}function Lr(r,n,s){s==null?r.removeAttribute(n):r.getAttribute(n)!==s&&r.setAttribute(n,s)}function Cu(r){return Array.from(r.childNodes)}function Va(r,n){r.value=n==null?"":n}function Iu(r,n,s,c){s===null?r.style.removeProperty(n):r.style.setProperty(n,s,c?"important":"")}let Wr;function Fr(r){Wr=r}function yu(){if(!Wr)throw new Error("Function called outside component initialization");return Wr}function _u(r){yu().$$.on_mount.push(r)}const tr=[],oo=[];let ir=[];const ao=[],bu=Promise.resolve();let lo=!1;function Tu(){lo||(lo=!0,bu.then(Xl))}function co(r){ir.push(r)}function Su(r){ao.push(r)}const Xs=new Set;let er=0;function Xl(){if(er!==0)return;const r=Wr;do{try{for(;er<tr.length;){const n=tr[er];er++,Fr(n),vu(n.$$)}}catch(n){throw tr.length=0,er=0,n}for(Fr(null),tr.length=0,er=0;oo.length;)oo.pop()();for(let n=0;n<ir.length;n+=1){const s=ir[n];Xs.has(s)||(Xs.add(s),s())}ir.length=0}while(tr.length);for(;ao.length;)ao.pop()();lo=!1,Xs.clear(),Fr(r)}function vu(r){if(r.fragment!==null){r.update(),ur(r.before_update);const n=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,n),r.after_update.forEach(co)}}function Nu(r){const n=[],s=[];ir.forEach(c=>r.indexOf(c)===-1?n.push(c):s.push(c)),s.forEach(c=>c()),ir=n}const Mi=new Set;let Mn;function Ru(){Mn={r:0,c:[],p:Mn}}function Ou(){Mn.r||ur(Mn.c),Mn=Mn.p}function Ur(r,n){r&&r.i&&(Mi.delete(r),r.i(n))}function ho(r,n,s,c){if(r&&r.o){if(Mi.has(r))return;Mi.add(r),Mn.c.push(()=>{Mi.delete(r),c&&(s&&r.d(1),c())}),r.o(n)}else c&&c()}function Du(r,n,s){const c=r.$$.props[n];c!==void 0&&(r.$$.bound[c]=s,s(r.$$.ctx[c]))}function Mu(r){r&&r.c()}function jl(r,n,s,c){const{fragment:f,after_update:d}=r.$$;f&&f.m(n,s),c||co(()=>{const w=r.$$.on_mount.map(Hl).filter(Gl);r.$$.on_destroy?r.$$.on_destroy.push(...w):ur(w),r.$$.on_mount=[]}),d.forEach(co)}function zl(r,n){const s=r.$$;s.fragment!==null&&(Nu(s.after_update),ur(s.on_destroy),s.fragment&&s.fragment.d(n),s.on_destroy=s.fragment=null,s.ctx=[])}function Pu(r,n){r.$$.dirty[0]===-1&&(tr.push(r),Tu(),r.$$.dirty.fill(0)),r.$$.dirty[n/31|0]|=1<<n%31}function Yl(r,n,s,c,f,d,w,y=[-1]){const _=Wr;Fr(r);const E=r.$$={fragment:null,ctx:[],props:d,update:Bn,not_equal:f,bound:Ua(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(_?_.$$.context:[])),callbacks:Ua(),dirty:y,skip_bound:!1,root:n.target||_.$$.root};w&&w(E.root);let S=!1;if(E.ctx=s?s(r,n.props||{},(N,z,...W)=>{const fe=W.length?W[0]:z;return E.ctx&&f(E.ctx[N],E.ctx[N]=fe)&&(!E.skip_bound&&E.bound[N]&&E.bound[N](fe),S&&Pu(r,N)),z}):[],E.update(),S=!0,ur(E.before_update),E.fragment=c?c(E.ctx):!1,n.target){if(n.hydrate){const N=Cu(n.target);E.fragment&&E.fragment.l(N),N.forEach(Gn)}else E.fragment&&E.fragment.c();n.intro&&Ur(r.$$.fragment),jl(r,n.target,n.anchor,n.customElement),Xl()}Fr(_)}class Kl{$destroy(){zl(this,1),this.$destroy=Bn}$on(n,s){if(!Gl(s))return Bn;const c=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return c.push(s),()=>{const f=c.indexOf(s);f!==-1&&c.splice(f,1)}}$set(n){this.$$set&&!Eu(n)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}}var G;(function(r){r[r.QR_CODE=0]="QR_CODE",r[r.AZTEC=1]="AZTEC",r[r.CODABAR=2]="CODABAR",r[r.CODE_39=3]="CODE_39",r[r.CODE_93=4]="CODE_93",r[r.CODE_128=5]="CODE_128",r[r.DATA_MATRIX=6]="DATA_MATRIX",r[r.MAXICODE=7]="MAXICODE",r[r.ITF=8]="ITF",r[r.EAN_13=9]="EAN_13",r[r.EAN_8=10]="EAN_8",r[r.PDF_417=11]="PDF_417",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(G||(G={}));var Ha=new Map([[G.QR_CODE,"QR_CODE"],[G.AZTEC,"AZTEC"],[G.CODABAR,"CODABAR"],[G.CODE_39,"CODE_39"],[G.CODE_93,"CODE_93"],[G.CODE_128,"CODE_128"],[G.DATA_MATRIX,"DATA_MATRIX"],[G.MAXICODE,"MAXICODE"],[G.ITF,"ITF"],[G.EAN_13,"EAN_13"],[G.EAN_8,"EAN_8"],[G.PDF_417,"PDF_417"],[G.RSS_14,"RSS_14"],[G.RSS_EXPANDED,"RSS_EXPANDED"],[G.UPC_A,"UPC_A"],[G.UPC_E,"UPC_E"],[G.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Ga;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.URL=1]="URL"})(Ga||(Ga={}));function ku(r){return Object.values(G).includes(r)}var Fi;(function(r){r[r.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",r[r.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Fi||(Fi={}));var Bu=function(){function r(){}return r.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",r.SCAN_DEFAULT_FPS=2,r.DEFAULT_DISABLE_FLIP=!1,r.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,r.DEFAULT_SUPPORTED_SCAN_TYPE=[Fi.SCAN_TYPE_CAMERA,Fi.SCAN_TYPE_FILE],r}(),Zl=function(){function r(n,s){this.format=n,this.formatName=s}return r.prototype.toString=function(){return this.formatName},r.create=function(n){if(!Ha.has(n))throw n+" not in html5QrcodeSupportedFormatsTextMap";return new r(n,Ha.get(n))},r}(),Wa=function(){function r(){}return r.createFromText=function(n){var s={text:n};return{decodedText:n,result:s}},r.createFromQrcodeResult=function(n){return{decodedText:n.text,result:n}},r}(),uo;(function(r){r[r.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",r[r.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",r[r.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(uo||(uo={}));var Lu=function(){function r(){}return r.createFrom=function(n){return{errorMessage:n,type:uo.UNKWOWN_ERROR}},r}(),Fu=function(){function r(n){this.verbose=n}return r.prototype.log=function(n){this.verbose&&console.log(n)},r.prototype.warn=function(n){this.verbose&&console.warn(n)},r.prototype.logError=function(n,s){(this.verbose||s===!0)&&console.error(n)},r.prototype.logErrors=function(n){if(n.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(n)},r}();function qt(r){return typeof r>"u"||r===null}var Vr=function(){function r(){}return r.codeParseError=function(n){return"QR code parse error, error = "+n},r.errorGettingUserMedia=function(n){return"Error getting userMedia, error = "+n},r.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},r.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},r.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},r.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},r}(),ql=function(){function r(){}return r.isMediaStreamConstraintsValid=function(n,s){if(typeof n!="object"){var c=typeof n;return s.logError("videoConstraints should be of type object, the "+("object passed is of type "+c+"."),!0),!1}for(var f=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],d=new Set(f),w=Object.keys(n),y=0,_=w;y<_.length;y++){var E=_[y];if(d.has(E))return s.logError(E+" is not supported videoConstaints.",!0),!1}return!0},r}(),Rr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Uu(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Se={exports:{}};(function(r,n){(function(s,c){c(n)})(Rr,function(s){function c(p){return p==null}var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,e){p.__proto__=e}||function(p,e){for(var t in e)e.hasOwnProperty(t)&&(p[t]=e[t])};function d(p,e){f(p,e);function t(){this.constructor=p}p.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function w(p,e){var t=Object.setPrototypeOf;t?t(p,e):p.__proto__=e}function y(p,e){e===void 0&&(e=p.constructor);var t=Error.captureStackTrace;t&&t(p,e)}var _=function(p){d(e,p);function e(t){var i=this.constructor,o=p.call(this,t)||this;return Object.defineProperty(o,"name",{value:i.name,enumerable:!1}),w(o,i.prototype),y(o),o}return e}(Error);class E extends _{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}E.kind="Exception";class S extends E{}S.kind="ArgumentException";class N extends E{}N.kind="IllegalArgumentException";class z{constructor(e){if(this.binarizer=e,e===null)throw new N("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,t){return this.binarizer.getBlackRow(e,t)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,t,i,o){const a=this.binarizer.getLuminanceSource().crop(e,t,i,o);return new z(this.binarizer.createBinarizer(a))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new z(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new z(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class W extends E{static getChecksumInstance(){return new W}}W.kind="ChecksumException";class fe{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class te{static arraycopy(e,t,i,o,a){for(;a--;)i[o++]=e[t++]}static currentTimeMillis(){return Date.now()}}class Qe extends E{}Qe.kind="IndexOutOfBoundsException";class it extends Qe{constructor(e=void 0,t=void 0){super(t),this.index=e,this.message=t}}it.kind="ArrayIndexOutOfBoundsException";class ge{static fill(e,t){for(let i=0,o=e.length;i<o;i++)e[i]=t}static fillWithin(e,t,i,o){ge.rangeCheck(e.length,t,i);for(let a=t;a<i;a++)e[a]=o}static rangeCheck(e,t,i){if(t>i)throw new N("fromIndex("+t+") > toIndex("+i+")");if(t<0)throw new it(t);if(i>e)throw new it(i)}static asList(...e){return e}static create(e,t,i){return Array.from({length:e}).map(a=>Array.from({length:t}).fill(i))}static createInt32Array(e,t,i){return Array.from({length:e}).map(a=>Int32Array.from({length:t}).fill(i))}static equals(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(let i=0,o=e.length;i<o;i++)if(e[i]!==t[i])return!1;return!0}static hashCode(e){if(e===null)return 0;let t=1;for(const i of e)t=31*t+i;return t}static fillUint8Array(e,t){for(let i=0;i!==e.length;i++)e[i]=t}static copyOf(e,t){return e.slice(0,t)}static copyOfUint8Array(e,t){if(e.length<=t){const i=new Uint8Array(t);return i.set(e),i}return e.slice(0,t)}static copyOfRange(e,t,i){const o=i-t,a=new Int32Array(o);return te.arraycopy(e,t,a,0,o),a}static binarySearch(e,t,i){i===void 0&&(i=ge.numberComparator);let o=0,a=e.length-1;for(;o<=a;){const l=a+o>>1,h=i(t,e[l]);if(h>0)o=l+1;else if(h<0)a=l-1;else return l}return-o-1}static numberComparator(e,t){return e-t}}class K{static numberOfTrailingZeros(e){let t;if(e===0)return 32;let i=31;return t=e<<16,t!==0&&(i-=16,e=t),t=e<<8,t!==0&&(i-=8,e=t),t=e<<4,t!==0&&(i-=4,e=t),t=e<<2,t!==0&&(i-=2,e=t),i-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let t=1;return e>>>16===0&&(t+=16,e<<=16),e>>>24===0&&(t+=8,e<<=8),e>>>28===0&&(t+=4,e<<=4),e>>>30===0&&(t+=2,e<<=2),t-=e>>>31,t}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,t){return Math.trunc(e/t)}static parseInt(e,t=void 0){return parseInt(e,t)}}K.MIN_VALUE_32_BITS=-2147483648,K.MAX_VALUE=Number.MAX_SAFE_INTEGER;class J{constructor(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=J.makeArray(e):this.bits=t)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const t=J.makeArray(e);te.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const t=this.size;if(e>=t)return t;const i=this.bits;let o=Math.floor(e/32),a=i[o];a&=~((1<<(e&31))-1);const l=i.length;for(;a===0;){if(++o===l)return t;a=i[o]}const h=o*32+K.numberOfTrailingZeros(a);return h>t?t:h}getNextUnset(e){const t=this.size;if(e>=t)return t;const i=this.bits;let o=Math.floor(e/32),a=~i[o];a&=~((1<<(e&31))-1);const l=i.length;for(;a===0;){if(++o===l)return t;a=~i[o]}const h=o*32+K.numberOfTrailingZeros(a);return h>t?t:h}setBulk(e,t){this.bits[Math.floor(e/32)]=t}setRange(e,t){if(t<e||e<0||t>this.size)throw new N;if(t===e)return;t--;const i=Math.floor(e/32),o=Math.floor(t/32),a=this.bits;for(let l=i;l<=o;l++){const h=l>i?0:e&31,g=(2<<(l<o?31:t&31))-(1<<h);a[l]|=g}}clear(){const e=this.bits.length,t=this.bits;for(let i=0;i<e;i++)t[i]=0}isRange(e,t,i){if(t<e||e<0||t>this.size)throw new N;if(t===e)return!0;t--;const o=Math.floor(e/32),a=Math.floor(t/32),l=this.bits;for(let h=o;h<=a;h++){const u=h>o?0:e&31,x=(2<<(h<a?31:t&31))-(1<<u)&4294967295;if((l[h]&x)!==(i?x:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,t){if(t<0||t>32)throw new N("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(let i=t;i>0;i--)this.appendBit((e>>i-1&1)===1)}appendBitArray(e){const t=e.size;this.ensureCapacity(this.size+t);for(let i=0;i<t;i++)this.appendBit(e.get(i))}xor(e){if(this.size!==e.size)throw new N("Sizes don't match");const t=this.bits;for(let i=0,o=t.length;i<o;i++)t[i]^=e.bits[i]}toBytes(e,t,i,o){for(let a=0;a<o;a++){let l=0;for(let h=0;h<8;h++)this.get(e)&&(l|=1<<7-h),e++;t[i+a]=l}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),i=t+1,o=this.bits;for(let a=0;a<i;a++){let l=o[a];l=l>>1&1431655765|(l&1431655765)<<1,l=l>>2&858993459|(l&858993459)<<2,l=l>>4&252645135|(l&252645135)<<4,l=l>>8&16711935|(l&16711935)<<8,l=l>>16&65535|(l&65535)<<16,e[t-a]=l}if(this.size!==i*32){const a=i*32-this.size;let l=e[0]>>>a;for(let h=1;h<i;h++){const u=e[h];l|=u<<32-a,e[h-1]=l,l=u>>>a}e[i-1]=l}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof J))return!1;const t=e;return this.size===t.size&&ge.equals(this.bits,t.bits)}hashCode(){return 31*this.size+ge.hashCode(this.bits)}toString(){let e="";for(let t=0,i=this.size;t<i;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e}clone(){return new J(this.size,this.bits.slice())}}var Re;(function(p){p[p.OTHER=0]="OTHER",p[p.PURE_BARCODE=1]="PURE_BARCODE",p[p.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",p[p.TRY_HARDER=3]="TRY_HARDER",p[p.CHARACTER_SET=4]="CHARACTER_SET",p[p.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",p[p.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",p[p.ASSUME_GS1=7]="ASSUME_GS1",p[p.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",p[p.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",p[p.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Re||(Re={}));var ne=Re;class k extends E{static getFormatInstance(){return new k}}k.kind="FormatException";var ee;(function(p){p[p.Cp437=0]="Cp437",p[p.ISO8859_1=1]="ISO8859_1",p[p.ISO8859_2=2]="ISO8859_2",p[p.ISO8859_3=3]="ISO8859_3",p[p.ISO8859_4=4]="ISO8859_4",p[p.ISO8859_5=5]="ISO8859_5",p[p.ISO8859_6=6]="ISO8859_6",p[p.ISO8859_7=7]="ISO8859_7",p[p.ISO8859_8=8]="ISO8859_8",p[p.ISO8859_9=9]="ISO8859_9",p[p.ISO8859_10=10]="ISO8859_10",p[p.ISO8859_11=11]="ISO8859_11",p[p.ISO8859_13=12]="ISO8859_13",p[p.ISO8859_14=13]="ISO8859_14",p[p.ISO8859_15=14]="ISO8859_15",p[p.ISO8859_16=15]="ISO8859_16",p[p.SJIS=16]="SJIS",p[p.Cp1250=17]="Cp1250",p[p.Cp1251=18]="Cp1251",p[p.Cp1252=19]="Cp1252",p[p.Cp1256=20]="Cp1256",p[p.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",p[p.UTF8=22]="UTF8",p[p.ASCII=23]="ASCII",p[p.Big5=24]="Big5",p[p.GB18030=25]="GB18030",p[p.EUC_KR=26]="EUC_KR"})(ee||(ee={}));class L{constructor(e,t,i,...o){this.valueIdentifier=e,this.name=i,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=o,L.VALUE_IDENTIFIER_TO_ECI.set(e,this),L.NAME_TO_ECI.set(i,this);const a=this.values;for(let l=0,h=a.length;l!==h;l++){const u=a[l];L.VALUES_TO_ECI.set(u,this)}for(const l of o)L.NAME_TO_ECI.set(l,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new k("incorect value");const t=L.VALUES_TO_ECI.get(e);if(t===void 0)throw new k("incorect value");return t}static getCharacterSetECIByName(e){const t=L.NAME_TO_ECI.get(e);if(t===void 0)throw new k("incorect value");return t}equals(e){if(!(e instanceof L))return!1;const t=e;return this.getName()===t.getName()}}L.VALUE_IDENTIFIER_TO_ECI=new Map,L.VALUES_TO_ECI=new Map,L.NAME_TO_ECI=new Map,L.Cp437=new L(ee.Cp437,Int32Array.from([0,2]),"Cp437"),L.ISO8859_1=new L(ee.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),L.ISO8859_2=new L(ee.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),L.ISO8859_3=new L(ee.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),L.ISO8859_4=new L(ee.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),L.ISO8859_5=new L(ee.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),L.ISO8859_6=new L(ee.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),L.ISO8859_7=new L(ee.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),L.ISO8859_8=new L(ee.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),L.ISO8859_9=new L(ee.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),L.ISO8859_10=new L(ee.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),L.ISO8859_11=new L(ee.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),L.ISO8859_13=new L(ee.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),L.ISO8859_14=new L(ee.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),L.ISO8859_15=new L(ee.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),L.ISO8859_16=new L(ee.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),L.SJIS=new L(ee.SJIS,20,"SJIS","Shift_JIS"),L.Cp1250=new L(ee.Cp1250,21,"Cp1250","windows-1250"),L.Cp1251=new L(ee.Cp1251,22,"Cp1251","windows-1251"),L.Cp1252=new L(ee.Cp1252,23,"Cp1252","windows-1252"),L.Cp1256=new L(ee.Cp1256,24,"Cp1256","windows-1256"),L.UnicodeBigUnmarked=new L(ee.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),L.UTF8=new L(ee.UTF8,26,"UTF8","UTF-8"),L.ASCII=new L(ee.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),L.Big5=new L(ee.Big5,28,"Big5"),L.GB18030=new L(ee.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),L.EUC_KR=new L(ee.EUC_KR,30,"EUC_KR","EUC-KR");class rn extends E{}rn.kind="UnsupportedOperationException";class mt{static decode(e,t){const i=this.encodingName(t);return this.customDecoder?this.customDecoder(e,i):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(i)?this.decodeFallback(e,i):new TextDecoder(i).decode(e)}static shouldDecodeOnFallback(e){return!mt.isBrowser()&&e==="ISO-8859-1"}static encode(e,t){const i=this.encodingName(t);return this.customEncoder?this.customEncoder(e,i):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof L?e:L.getCharacterSetECIByName(e)}static decodeFallback(e,t){const i=this.encodingCharacterSet(t);if(mt.isDecodeFallbackSupported(i)){let o="";for(let a=0,l=e.length;a<l;a++){let h=e[a].toString(16);h.length<2&&(h="0"+h),o+="%"+h}return decodeURIComponent(o)}if(i.equals(L.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new rn(`Encoding ${this.encodingName(t)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(L.UTF8)||e.equals(L.ISO8859_1)||e.equals(L.ASCII)}static encodeFallback(e){const i=btoa(unescape(encodeURIComponent(e))).split(""),o=[];for(let a=0;a<i.length;a++)o.push(i[a].charCodeAt(0));return new Uint8Array(o)}}class ie{static castAsNonUtf8Char(e,t=null){const i=t?t.getName():this.ISO88591;return mt.decode(new Uint8Array([e]),i)}static guessEncoding(e,t){if(t!=null&&t.get(ne.CHARACTER_SET)!==void 0)return t.get(ne.CHARACTER_SET).toString();const i=e.length;let o=!0,a=!0,l=!0,h=0,u=0,g=0,x=0,m=0,A=0,I=0,b=0,T=0,v=0,D=0;const F=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let U=0;U<i&&(o||a||l);U++){const B=e[U]&255;l&&(h>0?(B&128)===0?l=!1:h--:(B&128)!==0&&((B&64)===0?l=!1:(h++,(B&32)===0?u++:(h++,(B&16)===0?g++:(h++,(B&8)===0?x++:l=!1))))),o&&(B>127&&B<160?o=!1:B>159&&(B<192||B===215||B===247)&&D++),a&&(m>0?B<64||B===127||B>252?a=!1:m--:B===128||B===160||B>239?a=!1:B>160&&B<224?(A++,b=0,I++,I>T&&(T=I)):B>127?(m++,I=0,b++,b>v&&(v=b)):(I=0,b=0))}return l&&h>0&&(l=!1),a&&m>0&&(a=!1),l&&(F||u+g+x>0)?ie.UTF8:a&&(ie.ASSUME_SHIFT_JIS||T>=3||v>=3)?ie.SHIFT_JIS:o&&a?T===2&&A===2||D*10>=i?ie.SHIFT_JIS:ie.ISO88591:o?ie.ISO88591:a?ie.SHIFT_JIS:l?ie.UTF8:ie.PLATFORM_DEFAULT_ENCODING}static format(e,...t){let i=-1;function o(l,h,u,g,x,m){if(l==="%%")return"%";if(t[++i]===void 0)return;l=g?parseInt(g.substr(1)):void 0;let A=x?parseInt(x.substr(1)):void 0,I;switch(m){case"s":I=t[i];break;case"c":I=t[i][0];break;case"f":I=parseFloat(t[i]).toFixed(l);break;case"p":I=parseFloat(t[i]).toPrecision(l);break;case"e":I=parseFloat(t[i]).toExponential(l);break;case"x":I=parseInt(t[i]).toString(A||16);break;case"d":I=parseFloat(parseInt(t[i],A||10).toPrecision(l)).toFixed(0);break}I=typeof I=="object"?JSON.stringify(I):(+I).toString(A);let b=parseInt(u),T=u&&u[0]+""=="0"?"0":" ";for(;I.length<b;)I=h!==void 0?I+T:T+I;return I}let a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,o)}static getBytes(e,t){return mt.encode(e,t)}static getCharCode(e,t=0){return e.charCodeAt(t)}static getCharAt(e){return String.fromCharCode(e)}}ie.SHIFT_JIS=L.SJIS.getName(),ie.GB2312="GB2312",ie.ISO88591=L.ISO8859_1.getName(),ie.EUC_JP="EUC_JP",ie.UTF8=L.UTF8.getName(),ie.PLATFORM_DEFAULT_ENCODING=ie.UTF8,ie.ASSUME_SHIFT_JIS=!1;class Ie{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=ie.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,t,i){for(let o=t;t<t+i;o++)this.append(e[o]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)}substring(e,t){return this.value.substring(e,t)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)}}class je{constructor(e,t,i,o){if(this.width=e,this.height=t,this.rowSize=i,this.bits=o,t==null&&(t=e),this.height=t,e<1||t<1)throw new N("Both dimensions must be greater than 0");i==null&&(i=Math.floor((e+31)/32)),this.rowSize=i,o==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const t=e.length,i=e[0].length,o=new je(i,t);for(let a=0;a<t;a++){const l=e[a];for(let h=0;h<i;h++)l[h]&&o.set(h,a)}return o}static parseFromString(e,t,i){if(e===null)throw new N("stringRepresentation cannot be null");const o=new Array(e.length);let a=0,l=0,h=-1,u=0,g=0;for(;g<e.length;)if(e.charAt(g)===`
`||e.charAt(g)==="\r"){if(a>l){if(h===-1)h=a-l;else if(a-l!==h)throw new N("row lengths do not match");l=a,u++}g++}else if(e.substring(g,g+t.length)===t)g+=t.length,o[a]=!0,a++;else if(e.substring(g,g+i.length)===i)g+=i.length,o[a]=!1,a++;else throw new N("illegal character encountered: "+e.substring(g));if(a>l){if(h===-1)h=a-l;else if(a-l!==h)throw new N("row lengths do not match");u++}const x=new je(h,u);for(let m=0;m<a;m++)o[m]&&x.set(Math.floor(m%h),Math.floor(m/h));return x}get(e,t){const i=t*this.rowSize+Math.floor(e/32);return(this.bits[i]>>>(e&31)&1)!==0}set(e,t){const i=t*this.rowSize+Math.floor(e/32);this.bits[i]|=1<<(e&31)&4294967295}unset(e,t){const i=t*this.rowSize+Math.floor(e/32);this.bits[i]&=~(1<<(e&31)&4294967295)}flip(e,t){const i=t*this.rowSize+Math.floor(e/32);this.bits[i]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new N("input matrix dimensions do not match");const t=new J(Math.floor(this.width/32)+1),i=this.rowSize,o=this.bits;for(let a=0,l=this.height;a<l;a++){const h=a*i,u=e.getRow(a,t).getBitArray();for(let g=0;g<i;g++)o[h+g]^=u[g]}}clear(){const e=this.bits,t=e.length;for(let i=0;i<t;i++)e[i]=0}setRegion(e,t,i,o){if(t<0||e<0)throw new N("Left and top must be nonnegative");if(o<1||i<1)throw new N("Height and width must be at least 1");const a=e+i,l=t+o;if(l>this.height||a>this.width)throw new N("The region must fit inside the matrix");const h=this.rowSize,u=this.bits;for(let g=t;g<l;g++){const x=g*h;for(let m=e;m<a;m++)u[x+Math.floor(m/32)]|=1<<(m&31)&4294967295}}getRow(e,t){t==null||t.getSize()<this.width?t=new J(this.width):t.clear();const i=this.rowSize,o=this.bits,a=e*i;for(let l=0;l<i;l++)t.setBulk(l*32,o[a+l]);return t}setRow(e,t){te.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),t=this.getHeight();let i=new J(e),o=new J(e);for(let a=0,l=Math.floor((t+1)/2);a<l;a++)i=this.getRow(a,i),o=this.getRow(t-1-a,o),i.reverse(),o.reverse(),this.setRow(a,o),this.setRow(t-1-a,i)}getEnclosingRectangle(){const e=this.width,t=this.height,i=this.rowSize,o=this.bits;let a=e,l=t,h=-1,u=-1;for(let g=0;g<t;g++)for(let x=0;x<i;x++){const m=o[g*i+x];if(m!==0){if(g<l&&(l=g),g>u&&(u=g),x*32<a){let A=0;for(;(m<<31-A&4294967295)===0;)A++;x*32+A<a&&(a=x*32+A)}if(x*32+31>h){let A=31;for(;m>>>A===0;)A--;x*32+A>h&&(h=x*32+A)}}}return h<a||u<l?null:Int32Array.from([a,l,h-a+1,u-l+1])}getTopLeftOnBit(){const e=this.rowSize,t=this.bits;let i=0;for(;i<t.length&&t[i]===0;)i++;if(i===t.length)return null;const o=i/e;let a=i%e*32;const l=t[i];let h=0;for(;(l<<31-h&4294967295)===0;)h++;return a+=h,Int32Array.from([a,o])}getBottomRightOnBit(){const e=this.rowSize,t=this.bits;let i=t.length-1;for(;i>=0&&t[i]===0;)i--;if(i<0)return null;const o=Math.floor(i/e);let a=Math.floor(i%e)*32;const l=t[i];let h=31;for(;l>>>h===0;)h--;return a+=h,Int32Array.from([a,o])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof je))return!1;const t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&ge.equals(this.bits,t.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+ge.hashCode(this.bits),e}toString(e="X ",t="  ",i=`
`){return this.buildToString(e,t,i)}buildToString(e,t,i){let o=new Ie;for(let a=0,l=this.height;a<l;a++){for(let h=0,u=this.width;h<u;h++)o.append(this.get(h,a)?e:t);o.append(i)}return o.toString()}clone(){return new je(this.width,this.height,this.rowSize,this.bits.slice())}}class M extends E{static getNotFoundInstance(){return new M}}M.kind="NotFoundException";class ze extends fe{constructor(e){super(e),this.luminances=ze.EMPTY,this.buckets=new Int32Array(ze.LUMINANCE_BUCKETS)}getBlackRow(e,t){const i=this.getLuminanceSource(),o=i.getWidth();t==null||t.getSize()<o?t=new J(o):t.clear(),this.initArrays(o);const a=i.getRow(e,this.luminances),l=this.buckets;for(let u=0;u<o;u++)l[(a[u]&255)>>ze.LUMINANCE_SHIFT]++;const h=ze.estimateBlackPoint(l);if(o<3)for(let u=0;u<o;u++)(a[u]&255)<h&&t.set(u);else{let u=a[0]&255,g=a[1]&255;for(let x=1;x<o-1;x++){const m=a[x+1]&255;(g*4-u-m)/2<h&&t.set(x),u=g,g=m}}return t}getBlackMatrix(){const e=this.getLuminanceSource(),t=e.getWidth(),i=e.getHeight(),o=new je(t,i);this.initArrays(t);const a=this.buckets;for(let u=1;u<5;u++){const g=Math.floor(i*u/5),x=e.getRow(g,this.luminances),m=Math.floor(t*4/5);for(let A=Math.floor(t/5);A<m;A++){const I=x[A]&255;a[I>>ze.LUMINANCE_SHIFT]++}}const l=ze.estimateBlackPoint(a),h=e.getMatrix();for(let u=0;u<i;u++){const g=u*t;for(let x=0;x<t;x++)(h[g+x]&255)<l&&o.set(x,u)}return o}createBinarizer(e){return new ze(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const t=this.buckets;for(let i=0;i<ze.LUMINANCE_BUCKETS;i++)t[i]=0}static estimateBlackPoint(e){const t=e.length;let i=0,o=0,a=0;for(let x=0;x<t;x++)e[x]>a&&(o=x,a=e[x]),e[x]>i&&(i=e[x]);let l=0,h=0;for(let x=0;x<t;x++){const m=x-o,A=e[x]*m*m;A>h&&(l=x,h=A)}if(o>l){const x=o;o=l,l=x}if(l-o<=t/16)throw new M;let u=l-1,g=-1;for(let x=l-1;x>o;x--){const m=x-o,A=m*m*(l-x)*(i-e[x]);A>g&&(u=x,g=A)}return u<<ze.LUMINANCE_SHIFT}}ze.LUMINANCE_BITS=5,ze.LUMINANCE_SHIFT=8-ze.LUMINANCE_BITS,ze.LUMINANCE_BUCKETS=1<<ze.LUMINANCE_BITS,ze.EMPTY=Uint8ClampedArray.from([0]);class ae extends ze{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),t=e.getWidth(),i=e.getHeight();if(t>=ae.MINIMUM_DIMENSION&&i>=ae.MINIMUM_DIMENSION){const o=e.getMatrix();let a=t>>ae.BLOCK_SIZE_POWER;(t&ae.BLOCK_SIZE_MASK)!==0&&a++;let l=i>>ae.BLOCK_SIZE_POWER;(i&ae.BLOCK_SIZE_MASK)!==0&&l++;const h=ae.calculateBlackPoints(o,a,l,t,i),u=new je(t,i);ae.calculateThresholdForBlock(o,a,l,t,i,h,u),this.matrix=u}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new ae(e)}static calculateThresholdForBlock(e,t,i,o,a,l,h){const u=a-ae.BLOCK_SIZE,g=o-ae.BLOCK_SIZE;for(let x=0;x<i;x++){let m=x<<ae.BLOCK_SIZE_POWER;m>u&&(m=u);const A=ae.cap(x,2,i-3);for(let I=0;I<t;I++){let b=I<<ae.BLOCK_SIZE_POWER;b>g&&(b=g);const T=ae.cap(I,2,t-3);let v=0;for(let F=-2;F<=2;F++){const U=l[A+F];v+=U[T-2]+U[T-1]+U[T]+U[T+1]+U[T+2]}const D=v/25;ae.thresholdBlock(e,b,m,D,o,h)}}}static cap(e,t,i){return e<t?t:e>i?i:e}static thresholdBlock(e,t,i,o,a,l){for(let h=0,u=i*a+t;h<ae.BLOCK_SIZE;h++,u+=a)for(let g=0;g<ae.BLOCK_SIZE;g++)(e[u+g]&255)<=o&&l.set(t+g,i+h)}static calculateBlackPoints(e,t,i,o,a){const l=a-ae.BLOCK_SIZE,h=o-ae.BLOCK_SIZE,u=new Array(i);for(let g=0;g<i;g++){u[g]=new Int32Array(t);let x=g<<ae.BLOCK_SIZE_POWER;x>l&&(x=l);for(let m=0;m<t;m++){let A=m<<ae.BLOCK_SIZE_POWER;A>h&&(A=h);let I=0,b=255,T=0;for(let D=0,F=x*o+A;D<ae.BLOCK_SIZE;D++,F+=o){for(let U=0;U<ae.BLOCK_SIZE;U++){const B=e[F+U]&255;I+=B,B<b&&(b=B),B>T&&(T=B)}if(T-b>ae.MIN_DYNAMIC_RANGE)for(D++,F+=o;D<ae.BLOCK_SIZE;D++,F+=o)for(let U=0;U<ae.BLOCK_SIZE;U++)I+=e[F+U]&255}let v=I>>ae.BLOCK_SIZE_POWER*2;if(T-b<=ae.MIN_DYNAMIC_RANGE&&(v=b/2,g>0&&m>0)){const D=(u[g-1][m]+2*u[g][m-1]+u[g-1][m-1])/4;b<D&&(v=D)}u[g][m]=v}}return u}}ae.BLOCK_SIZE_POWER=3,ae.BLOCK_SIZE=1<<ae.BLOCK_SIZE_POWER,ae.BLOCK_SIZE_MASK=ae.BLOCK_SIZE-1,ae.MINIMUM_DIMENSION=ae.BLOCK_SIZE*5,ae.MIN_DYNAMIC_RANGE=24;class mr{constructor(e,t){this.width=e,this.height=t}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,t,i,o){throw new rn("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new rn("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new rn("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let t=new Ie;for(let i=0;i<this.height;i++){const o=this.getRow(i,e);for(let a=0;a<this.width;a++){const l=o[a]&255;let h;l<64?h="#":l<128?h="+":l<192?h=".":h=" ",t.append(h)}t.append(`
`)}return t.toString()}}class sn extends mr{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,t){const i=this.delegate.getRow(e,t),o=this.getWidth();for(let a=0;a<o;a++)i[a]=255-(i[a]&255);return i}getMatrix(){const e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(t);for(let o=0;o<t;o++)i[o]=255-(e[o]&255);return i}isCropSupported(){return this.delegate.isCropSupported()}crop(e,t,i,o){return new sn(this.delegate.crop(e,t,i,o))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new sn(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new sn(this.delegate.rotateCounterClockwise45())}}class on extends mr{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=on.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const t=e.getContext("2d").getImageData(0,0,e.width,e.height);return on.toGrayscaleBuffer(t.data,e.width,e.height)}static toGrayscaleBuffer(e,t,i){const o=new Uint8ClampedArray(t*i);for(let a=0,l=0,h=e.length;a<h;a+=4,l++){let u;if(e[a+3]===0)u=255;else{const x=e[a],m=e[a+1],A=e[a+2];u=306*x+601*m+117*A+512>>10}o[l]=u}return o}getRow(e,t){if(e<0||e>=this.getHeight())throw new N("Requested row is outside the image: "+e);const i=this.getWidth(),o=e*i;return t===null?t=this.buffer.slice(o,o+i):(t.length<i&&(t=new Uint8ClampedArray(i)),t.set(this.buffer.slice(o,o+i))),t}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,t,i,o){return super.crop(e,t,i,o),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const t=this.getTempCanvasElement(),i=t.getContext("2d"),o=e*on.DEGREE_TO_RADIANS,a=this.canvas.width,l=this.canvas.height,h=Math.ceil(Math.abs(Math.cos(o))*a+Math.abs(Math.sin(o))*l),u=Math.ceil(Math.abs(Math.sin(o))*a+Math.abs(Math.cos(o))*l);return t.width=h,t.height=u,i.translate(h/2,u/2),i.rotate(o),i.drawImage(this.canvas,a/-2,l/-2),this.buffer=on.makeBufferFromCanvasImageData(t),this}invert(){return new sn(this)}}on.DEGREE_TO_RADIANS=Math.PI/180;class wa{constructor(e,t,i){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=i||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ut=(globalThis||Rr||self||window||void 0)&&(globalThis||Rr||self||window||void 0).__awaiter||function(p,e,t,i){function o(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function h(x){try{g(i.next(x))}catch(m){l(m)}}function u(x){try{g(i.throw(x))}catch(m){l(m)}}function g(x){x.done?a(x.value):o(x.value).then(h,u)}g((i=i.apply(p,e||[])).next())})};class bn{constructor(e,t=500,i){this.reader=e,this.timeBetweenScansMillis=t,this._hints=i,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return ut(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),t=[];for(const i of e){const o=i.kind==="video"?"videoinput":i.kind;if(o!=="videoinput")continue;const a=i.deviceId||i.id,l=i.label||`Video device ${t.length+1}`,h=i.groupId,u={deviceId:a,label:l,kind:o,groupId:h};t.push(u)}return t})}getVideoInputDevices(){return ut(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(t=>new wa(t.deviceId,t.label))})}findDeviceById(e){return ut(this,void 0,void 0,function*(){const t=yield this.listVideoInputDevices();return t?t.find(i=>i.deviceId===e):null})}decodeFromInputVideoDevice(e,t){return ut(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,t)})}decodeOnceFromVideoDevice(e,t){return ut(this,void 0,void 0,function*(){this.reset();let i;e?i={deviceId:{exact:e}}:i={facingMode:"environment"};const o={video:i};return yield this.decodeOnceFromConstraints(o,t)})}decodeOnceFromConstraints(e,t){return ut(this,void 0,void 0,function*(){const i=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(i,t)})}decodeOnceFromStream(e,t){return ut(this,void 0,void 0,function*(){this.reset();const i=yield this.attachStreamToVideo(e,t);return yield this.decodeOnce(i)})}decodeFromInputVideoDeviceContinuously(e,t,i){return ut(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,t,i)})}decodeFromVideoDevice(e,t,i){return ut(this,void 0,void 0,function*(){let o;e?o={deviceId:{exact:e}}:o={facingMode:"environment"};const a={video:o};return yield this.decodeFromConstraints(a,t,i)})}decodeFromConstraints(e,t,i){return ut(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(o,t,i)})}decodeFromStream(e,t,i){return ut(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(e,t);return yield this.decodeContinuously(o,i)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,t){return ut(this,void 0,void 0,function*(){const i=this.prepareVideoElement(t);return this.addVideoSource(i,e),this.videoElement=i,this.stream=e,yield this.playVideoOnLoadAsync(i),i})}playVideoOnLoadAsync(e){return new Promise((t,i)=>this.playVideoOnLoad(e,()=>t()))}playVideoOnLoad(e,t){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return ut(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,t){const i=document.getElementById(e);if(!i)throw new S(`element with id '${e}' not found`);if(i.nodeName.toLowerCase()!==t.toLowerCase())throw new S(`element with id '${e}' must be an ${t} element`);return i}decodeFromImage(e,t){if(!e&&!t)throw new S("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)}decodeFromVideo(e,t){if(!e&&!t)throw new S("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,t,i){if(e===void 0&&t===void 0)throw new S("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,i):this.decodeFromVideoElementContinuously(e,i)}decodeFromImageElement(e){if(!e)throw new S("An image element must be provided.");this.reset();const t=this.prepareImageElement(e);this.imageElement=t;let i;return this.isImageLoaded(t)?i=this.decodeOnce(t,!1,!0):i=this._decodeOnLoadImage(t),i}decodeFromVideoElement(e){const t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)}decodeFromVideoElementContinuously(e,t){const i=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(i,t)}_decodeFromVideoElementSetup(e){if(!e)throw new S("A video element must be provided.");this.reset();const t=this.prepareVideoElement(e);return this.videoElement=t,t}decodeFromImageUrl(e){if(!e)throw new S("An URL must be provided.");this.reset();const t=this.prepareImageElement();this.imageElement=t;const i=this._decodeOnLoadImage(t);return t.src=e,i}decodeFromVideoUrl(e){if(!e)throw new S("An URL must be provided.");this.reset();const t=this.prepareVideoElement(),i=this.decodeFromVideoElement(t);return t.src=e,i}decodeFromVideoUrlContinuously(e,t){if(!e)throw new S("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),o=this.decodeFromVideoElementContinuously(i,t);return i.src=e,o}_decodeOnLoadImage(e){return new Promise((t,i)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(t,i),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return ut(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,t){return ut(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,t)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t}prepareVideoElement(e){let t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t}decodeOnce(e,t=!0,i=!0){this._stopAsyncDecode=!1;const o=(a,l)=>{if(this._stopAsyncDecode){l(new M("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const h=this.decode(e);a(h)}catch(h){const u=t&&h instanceof M,x=(h instanceof W||h instanceof k)&&i;if(u||x)return setTimeout(o,this._timeBetweenDecodingAttempts,a,l);l(h)}};return new Promise((a,l)=>o(a,l))}decodeContinuously(e,t){this._stopContinuousDecode=!1;const i=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const o=this.decode(e);t(o,null),setTimeout(i,this.timeBetweenScansMillis)}catch(o){t(null,o);const a=o instanceof W||o instanceof k,l=o instanceof M;(a||l)&&setTimeout(i,this._timeBetweenDecodingAttempts)}};i()}decode(e){const t=this.createBinaryBitmap(e);return this.decodeBitmap(t)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,t,i){t||(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),i||(i=this.captureCanvasContext),i.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}drawImageOnCanvas(e,t,i=this.captureCanvasContext){t||(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),i||(i=this.captureCanvasContext),i.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const t=this.getCaptureCanvas(e),i=new on(t),o=new ae(i);return new z(o)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const i=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=i}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const t=document.createElement("canvas");let i,o;return typeof e<"u"&&(e instanceof HTMLVideoElement?(i=e.videoWidth,o=e.videoHeight):e instanceof HTMLImageElement&&(i=e.naturalWidth||e.width,o=e.naturalHeight||e.height)),t.style.width=i+"px",t.style.height=o+"px",t.width=i,t.height=o,t}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){!this.videoElement||(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){!this.imageElement||(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class ft{constructor(e,t,i=t==null?0:8*t.length,o,a,l=te.currentTimeMillis()){this.text=e,this.rawBytes=t,this.numBits=i,this.resultPoints=o,this.format=a,this.timestamp=l,this.text=e,this.rawBytes=t,i==null?this.numBits=t==null?0:8*t.length:this.numBits=i,this.resultPoints=o,this.format=a,this.resultMetadata=null,l==null?this.timestamp=te.currentTimeMillis():this.timestamp=l}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){const i=new Array(t.length+e.length);te.arraycopy(t,0,i,0,t.length),te.arraycopy(e,0,i,t.length,e.length),this.resultPoints=i}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Is;(function(p){p[p.AZTEC=0]="AZTEC",p[p.CODABAR=1]="CODABAR",p[p.CODE_39=2]="CODE_39",p[p.CODE_93=3]="CODE_93",p[p.CODE_128=4]="CODE_128",p[p.DATA_MATRIX=5]="DATA_MATRIX",p[p.EAN_8=6]="EAN_8",p[p.EAN_13=7]="EAN_13",p[p.ITF=8]="ITF",p[p.MAXICODE=9]="MAXICODE",p[p.PDF_417=10]="PDF_417",p[p.QR_CODE=11]="QR_CODE",p[p.RSS_14=12]="RSS_14",p[p.RSS_EXPANDED=13]="RSS_EXPANDED",p[p.UPC_A=14]="UPC_A",p[p.UPC_E=15]="UPC_E",p[p.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Is||(Is={}));var q=Is,ys;(function(p){p[p.OTHER=0]="OTHER",p[p.ORIENTATION=1]="ORIENTATION",p[p.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",p[p.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",p[p.ISSUE_NUMBER=4]="ISSUE_NUMBER",p[p.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",p[p.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",p[p.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",p[p.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",p[p.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",p[p.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ys||(ys={}));var Ye=ys;class wr{constructor(e,t,i,o,a=-1,l=-1){this.rawBytes=e,this.text=t,this.byteSegments=i,this.ecLevel=o,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=l,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Er{exp(e){return this.expTable[e]}log(e){if(e===0)throw new N;return this.logTable[e]}static addOrSubtract(e,t){return e^t}}class wt{constructor(e,t){if(t.length===0)throw new N;this.field=e;const i=t.length;if(i>1&&t[0]===0){let o=1;for(;o<i&&t[o]===0;)o++;o===i?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(i-o),te.arraycopy(t,o,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const t=this.coefficients;let i;if(e===1){i=0;for(let l=0,h=t.length;l!==h;l++){const u=t[l];i=Er.addOrSubtract(i,u)}return i}i=t[0];const o=t.length,a=this.field;for(let l=1;l<o;l++)i=Er.addOrSubtract(a.multiply(e,i),t[l]);return i}addOrSubtract(e){if(!this.field.equals(e.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,i=e.coefficients;if(t.length>i.length){const l=t;t=i,i=l}let o=new Int32Array(i.length);const a=i.length-t.length;te.arraycopy(i,0,o,0,a);for(let l=a;l<i.length;l++)o[l]=Er.addOrSubtract(t[l-a],i[l]);return new wt(this.field,o)}multiply(e){if(!this.field.equals(e.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const t=this.coefficients,i=t.length,o=e.coefficients,a=o.length,l=new Int32Array(i+a-1),h=this.field;for(let u=0;u<i;u++){const g=t[u];for(let x=0;x<a;x++)l[u+x]=Er.addOrSubtract(l[u+x],h.multiply(g,o[x]))}return new wt(h,l)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const t=this.coefficients.length,i=this.field,o=new Int32Array(t),a=this.coefficients;for(let l=0;l<t;l++)o[l]=i.multiply(a[l],e);return new wt(i,o)}multiplyByMonomial(e,t){if(e<0)throw new N;if(t===0)return this.field.getZero();const i=this.coefficients,o=i.length,a=new Int32Array(o+e),l=this.field;for(let h=0;h<o;h++)a[h]=l.multiply(i[h],t);return new wt(l,a)}divide(e){if(!this.field.equals(e.field))throw new N("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new N("Divide by 0");const t=this.field;let i=t.getZero(),o=this;const a=e.getCoefficient(e.getDegree()),l=t.inverse(a);for(;o.getDegree()>=e.getDegree()&&!o.isZero();){const h=o.getDegree()-e.getDegree(),u=t.multiply(o.getCoefficient(o.getDegree()),l),g=e.multiplyByMonomial(h,u),x=t.buildMonomial(h,u);i=i.addOrSubtract(x),o=o.addOrSubtract(g)}return[i,o]}toString(){let e="";for(let t=this.getDegree();t>=0;t--){let i=this.getCoefficient(t);if(i!==0){if(i<0?(e+=" - ",i=-i):e.length>0&&(e+=" + "),t===0||i!==1){const o=this.field.log(i);o===0?e+="1":o===1?e+="a":(e+="a^",e+=o)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e}}class pi extends E{}pi.kind="ArithmeticException";class me extends Er{constructor(e,t,i){super(),this.primitive=e,this.size=t,this.generatorBase=i;const o=new Int32Array(t);let a=1;for(let h=0;h<t;h++)o[h]=a,a*=2,a>=t&&(a^=e,a&=t-1);this.expTable=o;const l=new Int32Array(t);for(let h=0;h<t-1;h++)l[o[h]]=h;this.logTable=l,this.zero=new wt(this,Int32Array.from([0])),this.one=new wt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new N;if(t===0)return this.zero;const i=new Int32Array(e+1);return i[0]=t,new wt(this,i)}inverse(e){if(e===0)throw new pi;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+K.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}me.AZTEC_DATA_12=new me(4201,4096,1),me.AZTEC_DATA_10=new me(1033,1024,1),me.AZTEC_DATA_6=new me(67,64,1),me.AZTEC_PARAM=new me(19,16,1),me.QR_CODE_FIELD_256=new me(285,256,0),me.DATA_MATRIX_FIELD_256=new me(301,256,1),me.AZTEC_DATA_8=me.DATA_MATRIX_FIELD_256,me.MAXICODE_FIELD_64=me.AZTEC_DATA_6;class Xn extends E{}Xn.kind="ReedSolomonException";class Ut extends E{}Ut.kind="IllegalStateException";class Ar{constructor(e){this.field=e}decode(e,t){const i=this.field,o=new wt(i,e),a=new Int32Array(t);let l=!0;for(let I=0;I<t;I++){const b=o.evaluateAt(i.exp(I+i.getGeneratorBase()));a[a.length-1-I]=b,b!==0&&(l=!1)}if(l)return;const h=new wt(i,a),u=this.runEuclideanAlgorithm(i.buildMonomial(t,1),h,t),g=u[0],x=u[1],m=this.findErrorLocations(g),A=this.findErrorMagnitudes(x,m);for(let I=0;I<m.length;I++){const b=e.length-1-i.log(m[I]);if(b<0)throw new Xn("Bad error location");e[b]=me.addOrSubtract(e[b],A[I])}}runEuclideanAlgorithm(e,t,i){if(e.getDegree()<t.getDegree()){const I=e;e=t,t=I}const o=this.field;let a=e,l=t,h=o.getZero(),u=o.getOne();for(;l.getDegree()>=(i/2|0);){let I=a,b=h;if(a=l,h=u,a.isZero())throw new Xn("r_{i-1} was zero");l=I;let T=o.getZero();const v=a.getCoefficient(a.getDegree()),D=o.inverse(v);for(;l.getDegree()>=a.getDegree()&&!l.isZero();){const F=l.getDegree()-a.getDegree(),U=o.multiply(l.getCoefficient(l.getDegree()),D);T=T.addOrSubtract(o.buildMonomial(F,U)),l=l.addOrSubtract(a.multiplyByMonomial(F,U))}if(u=T.multiply(h).addOrSubtract(b),l.getDegree()>=a.getDegree())throw new Ut("Division algorithm failed to reduce polynomial?")}const g=u.getCoefficient(0);if(g===0)throw new Xn("sigmaTilde(0) was zero");const x=o.inverse(g),m=u.multiplyScalar(x),A=l.multiplyScalar(x);return[m,A]}findErrorLocations(e){const t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);const i=new Int32Array(t);let o=0;const a=this.field;for(let l=1;l<a.getSize()&&o<t;l++)e.evaluateAt(l)===0&&(i[o]=a.inverse(l),o++);if(o!==t)throw new Xn("Error locator degree does not match number of roots");return i}findErrorMagnitudes(e,t){const i=t.length,o=new Int32Array(i),a=this.field;for(let l=0;l<i;l++){const h=a.inverse(t[l]);let u=1;for(let g=0;g<i;g++)if(l!==g){const x=a.multiply(t[g],h),m=(x&1)===0?x|1:x&-2;u=a.multiply(u,m)}o[l]=a.multiply(e.evaluateAt(h),a.inverse(u)),a.getGeneratorBase()!==0&&(o[l]=a.multiply(o[l],h))}return o}}var Je;(function(p){p[p.UPPER=0]="UPPER",p[p.LOWER=1]="LOWER",p[p.MIXED=2]="MIXED",p[p.DIGIT=3]="DIGIT",p[p.PUNCT=4]="PUNCT",p[p.BINARY=5]="BINARY"})(Je||(Je={}));class ve{decode(e){this.ddata=e;let t=e.getBits(),i=this.extractBits(t),o=this.correctBits(i),a=ve.convertBoolArrayToByteArray(o),l=ve.getEncodedData(o),h=new wr(a,l,null,null);return h.setNumBits(o.length),h}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let t=e.length,i=Je.UPPER,o=Je.UPPER,a="",l=0;for(;l<t;)if(o===Je.BINARY){if(t-l<5)break;let h=ve.readCode(e,l,5);if(l+=5,h===0){if(t-l<11)break;h=ve.readCode(e,l,11)+31,l+=11}for(let u=0;u<h;u++){if(t-l<8){l=t;break}const g=ve.readCode(e,l,8);a+=ie.castAsNonUtf8Char(g),l+=8}o=i}else{let h=o===Je.DIGIT?4:5;if(t-l<h)break;let u=ve.readCode(e,l,h);l+=h;let g=ve.getCharacter(o,u);g.startsWith("CTRL_")?(i=o,o=ve.getTable(g.charAt(5)),g.charAt(6)==="L"&&(i=o)):(a+=g,o=i)}return a}static getTable(e){switch(e){case"L":return Je.LOWER;case"P":return Je.PUNCT;case"M":return Je.MIXED;case"D":return Je.DIGIT;case"B":return Je.BINARY;case"U":default:return Je.UPPER}}static getCharacter(e,t){switch(e){case Je.UPPER:return ve.UPPER_TABLE[t];case Je.LOWER:return ve.LOWER_TABLE[t];case Je.MIXED:return ve.MIXED_TABLE[t];case Je.PUNCT:return ve.PUNCT_TABLE[t];case Je.DIGIT:return ve.DIGIT_TABLE[t];default:throw new Ut("Bad table")}}correctBits(e){let t,i;this.ddata.getNbLayers()<=2?(i=6,t=me.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(i=8,t=me.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(i=10,t=me.AZTEC_DATA_10):(i=12,t=me.AZTEC_DATA_12);let o=this.ddata.getNbDatablocks(),a=e.length/i;if(a<o)throw new k;let l=e.length%i,h=new Int32Array(a);for(let A=0;A<a;A++,l+=i)h[A]=ve.readCode(e,l,i);try{new Ar(t).decode(h,a-o)}catch(A){throw new k(A)}let u=(1<<i)-1,g=0;for(let A=0;A<o;A++){let I=h[A];if(I===0||I===u)throw new k;(I===1||I===u-1)&&g++}let x=new Array(o*i-g),m=0;for(let A=0;A<o;A++){let I=h[A];if(I===1||I===u-1)x.fill(I>1,m,m+i-1),m+=i-1;else for(let b=i-1;b>=0;--b)x[m++]=(I&1<<b)!==0}return x}extractBits(e){let t=this.ddata.isCompact(),i=this.ddata.getNbLayers(),o=(t?11:14)+i*4,a=new Int32Array(o),l=new Array(this.totalBitsInLayer(i,t));if(t)for(let h=0;h<a.length;h++)a[h]=h;else{let h=o+1+2*K.truncDivision(K.truncDivision(o,2)-1,15),u=o/2,g=K.truncDivision(h,2);for(let x=0;x<u;x++){let m=x+K.truncDivision(x,15);a[u-x-1]=g-m-1,a[u+x]=g+m+1}}for(let h=0,u=0;h<i;h++){let g=(i-h)*4+(t?9:12),x=h*2,m=o-1-x;for(let A=0;A<g;A++){let I=A*2;for(let b=0;b<2;b++)l[u+I+b]=e.get(a[x+b],a[x+A]),l[u+2*g+I+b]=e.get(a[x+A],a[m-b]),l[u+4*g+I+b]=e.get(a[m-b],a[m-A]),l[u+6*g+I+b]=e.get(a[m-A],a[x+b])}u+=g*8}return l}static readCode(e,t,i){let o=0;for(let a=t;a<t+i;a++)o<<=1,e[a]&&(o|=1);return o}static readByte(e,t){let i=e.length-t;return i>=8?ve.readCode(e,t,8):ve.readCode(e,t,i)<<8-i}static convertBoolArrayToByteArray(e){let t=new Uint8Array((e.length+7)/8);for(let i=0;i<t.length;i++)t[i]=ve.readByte(e,8*i);return t}totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}ve.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ve.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ve.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ve.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ve.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class xe{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,t,i,o){const a=e-i,l=t-o;return Math.sqrt(a*a+l*l)}static sum(e){let t=0;for(let i=0,o=e.length;i!==o;i++){const a=e[i];t+=a}return t}}class mi{static floatToIntBits(e){return e}}mi.MAX_VALUE=Number.MAX_SAFE_INTEGER;class X{constructor(e,t){this.x=e,this.y=t}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof X){const t=e;return this.x===t.x&&this.y===t.y}return!1}hashCode(){return 31*mi.floatToIntBits(this.x)+mi.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const t=this.distance(e[0],e[1]),i=this.distance(e[1],e[2]),o=this.distance(e[0],e[2]);let a,l,h;if(i>=t&&i>=o?(l=e[0],a=e[1],h=e[2]):o>=i&&o>=t?(l=e[1],a=e[0],h=e[2]):(l=e[2],a=e[0],h=e[1]),this.crossProductZ(a,l,h)<0){const u=a;a=h,h=u}e[0]=a,e[1]=l,e[2]=h}static distance(e,t){return xe.distance(e.x,e.y,t.x,t.y)}static crossProductZ(e,t,i){const o=t.x,a=t.y;return(i.x-o)*(e.y-a)-(i.y-a)*(e.x-o)}}class wi{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class Ea extends wi{constructor(e,t,i,o,a){super(e,t),this.compact=i,this.nbDatablocks=o,this.nbLayers=a}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Zt{constructor(e,t,i,o){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=Zt.INIT_SIZE),i==null&&(i=e.getWidth()/2|0),o==null&&(o=e.getHeight()/2|0);const a=t/2|0;if(this.leftInit=i-a,this.rightInit=i+a,this.upInit=o-a,this.downInit=o+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new M}detect(){let e=this.leftInit,t=this.rightInit,i=this.upInit,o=this.downInit,a=!1,l=!0,h=!1,u=!1,g=!1,x=!1,m=!1;const A=this.width,I=this.height;for(;l;){l=!1;let b=!0;for(;(b||!u)&&t<A;)b=this.containsBlackPoint(i,o,t,!1),b?(t++,l=!0,u=!0):u||t++;if(t>=A){a=!0;break}let T=!0;for(;(T||!g)&&o<I;)T=this.containsBlackPoint(e,t,o,!0),T?(o++,l=!0,g=!0):g||o++;if(o>=I){a=!0;break}let v=!0;for(;(v||!x)&&e>=0;)v=this.containsBlackPoint(i,o,e,!1),v?(e--,l=!0,x=!0):x||e--;if(e<0){a=!0;break}let D=!0;for(;(D||!m)&&i>=0;)D=this.containsBlackPoint(e,t,i,!0),D?(i--,l=!0,m=!0):m||i--;if(i<0){a=!0;break}l&&(h=!0)}if(!a&&h){const b=t-e;let T=null;for(let U=1;T===null&&U<b;U++)T=this.getBlackPointOnSegment(e,o-U,e+U,o);if(T==null)throw new M;let v=null;for(let U=1;v===null&&U<b;U++)v=this.getBlackPointOnSegment(e,i+U,e+U,i);if(v==null)throw new M;let D=null;for(let U=1;D===null&&U<b;U++)D=this.getBlackPointOnSegment(t,i+U,t-U,i);if(D==null)throw new M;let F=null;for(let U=1;F===null&&U<b;U++)F=this.getBlackPointOnSegment(t,o-U,t-U,o);if(F==null)throw new M;return this.centerEdges(F,T,D,v)}else throw new M}getBlackPointOnSegment(e,t,i,o){const a=xe.round(xe.distance(e,t,i,o)),l=(i-e)/a,h=(o-t)/a,u=this.image;for(let g=0;g<a;g++){const x=xe.round(e+g*l),m=xe.round(t+g*h);if(u.get(x,m))return new X(x,m)}return null}centerEdges(e,t,i,o){const a=e.getX(),l=e.getY(),h=t.getX(),u=t.getY(),g=i.getX(),x=i.getY(),m=o.getX(),A=o.getY(),I=Zt.CORR;return a<this.width/2?[new X(m-I,A+I),new X(h+I,u+I),new X(g-I,x-I),new X(a+I,l-I)]:[new X(m+I,A+I),new X(h+I,u-I),new X(g-I,x+I),new X(a-I,l-I)]}containsBlackPoint(e,t,i,o){const a=this.image;if(o){for(let l=e;l<=t;l++)if(a.get(l,i))return!0}else for(let l=e;l<=t;l++)if(a.get(i,l))return!0;return!1}}Zt.INIT_SIZE=10,Zt.CORR=1;class _s{static checkAndNudgePoints(e,t){const i=e.getWidth(),o=e.getHeight();let a=!0;for(let l=0;l<t.length&&a;l+=2){const h=Math.floor(t[l]),u=Math.floor(t[l+1]);if(h<-1||h>i||u<-1||u>o)throw new M;a=!1,h===-1?(t[l]=0,a=!0):h===i&&(t[l]=i-1,a=!0),u===-1?(t[l+1]=0,a=!0):u===o&&(t[l+1]=o-1,a=!0)}a=!0;for(let l=t.length-2;l>=0&&a;l-=2){const h=Math.floor(t[l]),u=Math.floor(t[l+1]);if(h<-1||h>i||u<-1||u>o)throw new M;a=!1,h===-1?(t[l]=0,a=!0):h===i&&(t[l]=i-1,a=!0),u===-1?(t[l+1]=0,a=!0):u===o&&(t[l+1]=o-1,a=!0)}}}class kt{constructor(e,t,i,o,a,l,h,u,g){this.a11=e,this.a21=t,this.a31=i,this.a12=o,this.a22=a,this.a32=l,this.a13=h,this.a23=u,this.a33=g}static quadrilateralToQuadrilateral(e,t,i,o,a,l,h,u,g,x,m,A,I,b,T,v){const D=kt.quadrilateralToSquare(e,t,i,o,a,l,h,u);return kt.squareToQuadrilateral(g,x,m,A,I,b,T,v).times(D)}transformPoints(e){const t=e.length,i=this.a11,o=this.a12,a=this.a13,l=this.a21,h=this.a22,u=this.a23,g=this.a31,x=this.a32,m=this.a33;for(let A=0;A<t;A+=2){const I=e[A],b=e[A+1],T=a*I+u*b+m;e[A]=(i*I+l*b+g)/T,e[A+1]=(o*I+h*b+x)/T}}transformPointsWithValues(e,t){const i=this.a11,o=this.a12,a=this.a13,l=this.a21,h=this.a22,u=this.a23,g=this.a31,x=this.a32,m=this.a33,A=e.length;for(let I=0;I<A;I++){const b=e[I],T=t[I],v=a*b+u*T+m;e[I]=(i*b+l*T+g)/v,t[I]=(o*b+h*T+x)/v}}static squareToQuadrilateral(e,t,i,o,a,l,h,u){const g=e-i+a-h,x=t-o+l-u;if(g===0&&x===0)return new kt(i-e,a-i,e,o-t,l-o,t,0,0,1);{const m=i-a,A=h-a,I=o-l,b=u-l,T=m*b-A*I,v=(g*b-A*x)/T,D=(m*x-g*I)/T;return new kt(i-e+v*i,h-e+D*h,e,o-t+v*o,u-t+D*u,t,v,D,1)}}static quadrilateralToSquare(e,t,i,o,a,l,h,u){return kt.squareToQuadrilateral(e,t,i,o,a,l,h,u).buildAdjoint()}buildAdjoint(){return new kt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new kt(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class Aa extends _s{sampleGrid(e,t,i,o,a,l,h,u,g,x,m,A,I,b,T,v,D,F,U){const B=kt.quadrilateralToQuadrilateral(o,a,l,h,u,g,x,m,A,I,b,T,v,D,F,U);return this.sampleGridWithTransform(e,t,i,B)}sampleGridWithTransform(e,t,i,o){if(t<=0||i<=0)throw new M;const a=new je(t,i),l=new Float32Array(2*t);for(let h=0;h<i;h++){const u=l.length,g=h+.5;for(let x=0;x<u;x+=2)l[x]=x/2+.5,l[x+1]=g;o.transformPoints(l),_s.checkAndNudgePoints(e,l);try{for(let x=0;x<u;x+=2)e.get(Math.floor(l[x]),Math.floor(l[x+1]))&&a.set(x/2,h)}catch{throw new M}}return a}}class an{static setGridSampler(e){an.gridSampler=e}static getInstance(){return an.gridSampler}}an.gridSampler=new Aa;class dt{constructor(e,t){this.x=e,this.y=t}toResultPoint(){return new X(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Ca{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let t=this.getMatrixCenter(),i=this.getBullsEyeCorners(t);if(e){let l=i[0];i[0]=i[2],i[2]=l}this.extractParameters(i);let o=this.sampleGrid(this.image,i[this.shift%4],i[(this.shift+1)%4],i[(this.shift+2)%4],i[(this.shift+3)%4]),a=this.getMatrixCornerPoints(i);return new Ea(o,a,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new M;let t=2*this.nbCenterLayers,i=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(i,t);let o=0;for(let l=0;l<4;l++){let h=i[(this.shift+l)%4];this.compact?(o<<=7,o+=h>>1&127):(o<<=10,o+=(h>>2&31<<5)+(h>>1&31))}let a=this.getCorrectedParameterData(o,this.compact);this.compact?(this.nbLayers=(a>>6)+1,this.nbDataBlocks=(a&63)+1):(this.nbLayers=(a>>11)+1,this.nbDataBlocks=(a&2047)+1)}getRotation(e,t){let i=0;e.forEach((o,a,l)=>{let h=(o>>t-2<<1)+(o&1);i=(i<<3)+h}),i=((i&1)<<11)+(i>>1);for(let o=0;o<4;o++)if(K.bitCount(i^this.EXPECTED_CORNER_BITS[o])<=2)return o;throw new M}getCorrectedParameterData(e,t){let i,o;t?(i=7,o=2):(i=10,o=4);let a=i-o,l=new Int32Array(i);for(let u=i-1;u>=0;--u)l[u]=e&15,e>>=4;try{new Ar(me.AZTEC_PARAM).decode(l,a)}catch{throw new M}let h=0;for(let u=0;u<o;u++)h=(h<<4)+l[u];return h}getBullsEyeCorners(e){let t=e,i=e,o=e,a=e,l=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let m=this.getFirstDifferent(t,l,1,-1),A=this.getFirstDifferent(i,l,1,1),I=this.getFirstDifferent(o,l,-1,1),b=this.getFirstDifferent(a,l,-1,-1);if(this.nbCenterLayers>2){let T=this.distancePoint(b,m)*this.nbCenterLayers/(this.distancePoint(a,t)*(this.nbCenterLayers+2));if(T<.75||T>1.25||!this.isWhiteOrBlackRectangle(m,A,I,b))break}t=m,i=A,o=I,a=b,l=!l}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new M;this.compact=this.nbCenterLayers===5;let h=new X(t.getX()+.5,t.getY()-.5),u=new X(i.getX()+.5,i.getY()+.5),g=new X(o.getX()-.5,o.getY()+.5),x=new X(a.getX()-.5,a.getY()-.5);return this.expandSquare([h,u,g,x],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,t,i,o;try{let h=new Zt(this.image).detect();e=h[0],t=h[1],i=h[2],o=h[3]}catch{let u=this.image.getWidth()/2,g=this.image.getHeight()/2;e=this.getFirstDifferent(new dt(u+7,g-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new dt(u+7,g+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new dt(u-7,g+7),!1,-1,1).toResultPoint(),o=this.getFirstDifferent(new dt(u-7,g-7),!1,-1,-1).toResultPoint()}let a=xe.round((e.getX()+o.getX()+t.getX()+i.getX())/4),l=xe.round((e.getY()+o.getY()+t.getY()+i.getY())/4);try{let h=new Zt(this.image,15,a,l).detect();e=h[0],t=h[1],i=h[2],o=h[3]}catch{e=this.getFirstDifferent(new dt(a+7,l-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new dt(a+7,l+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new dt(a-7,l+7),!1,-1,1).toResultPoint(),o=this.getFirstDifferent(new dt(a-7,l-7),!1,-1,-1).toResultPoint()}return a=xe.round((e.getX()+o.getX()+t.getX()+i.getX())/4),l=xe.round((e.getY()+o.getY()+t.getY()+i.getY())/4),new dt(a,l)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,t,i,o,a){let l=an.getInstance(),h=this.getDimension(),u=h/2-this.nbCenterLayers,g=h/2+this.nbCenterLayers;return l.sampleGrid(e,h,h,u,u,g,u,g,g,u,g,t.getX(),t.getY(),i.getX(),i.getY(),o.getX(),o.getY(),a.getX(),a.getY())}sampleLine(e,t,i){let o=0,a=this.distanceResultPoint(e,t),l=a/i,h=e.getX(),u=e.getY(),g=l*(t.getX()-e.getX())/a,x=l*(t.getY()-e.getY())/a;for(let m=0;m<i;m++)this.image.get(xe.round(h+m*g),xe.round(u+m*x))&&(o|=1<<i-m-1);return o}isWhiteOrBlackRectangle(e,t,i,o){let a=3;e=new dt(e.getX()-a,e.getY()+a),t=new dt(t.getX()-a,t.getY()-a),i=new dt(i.getX()+a,i.getY()-a),o=new dt(o.getX()+a,o.getY()+a);let l=this.getColor(o,e);if(l===0)return!1;let h=this.getColor(e,t);return h!==l||(h=this.getColor(t,i),h!==l)?!1:(h=this.getColor(i,o),h===l)}getColor(e,t){let i=this.distancePoint(e,t),o=(t.getX()-e.getX())/i,a=(t.getY()-e.getY())/i,l=0,h=e.getX(),u=e.getY(),g=this.image.get(e.getX(),e.getY()),x=Math.ceil(i);for(let A=0;A<x;A++)h+=o,u+=a,this.image.get(xe.round(h),xe.round(u))!==g&&l++;let m=l/i;return m>.1&&m<.9?0:m<=.1===g?1:-1}getFirstDifferent(e,t,i,o){let a=e.getX()+i,l=e.getY()+o;for(;this.isValid(a,l)&&this.image.get(a,l)===t;)a+=i,l+=o;for(a-=i,l-=o;this.isValid(a,l)&&this.image.get(a,l)===t;)a+=i;for(a-=i;this.isValid(a,l)&&this.image.get(a,l)===t;)l+=o;return l-=o,new dt(a,l)}expandSquare(e,t,i){let o=i/(2*t),a=e[0].getX()-e[2].getX(),l=e[0].getY()-e[2].getY(),h=(e[0].getX()+e[2].getX())/2,u=(e[0].getY()+e[2].getY())/2,g=new X(h+o*a,u+o*l),x=new X(h-o*a,u-o*l);a=e[1].getX()-e[3].getX(),l=e[1].getY()-e[3].getY(),h=(e[1].getX()+e[3].getX())/2,u=(e[1].getY()+e[3].getY())/2;let m=new X(h+o*a,u+o*l),A=new X(h-o*a,u-o*l);return[g,m,x,A]}isValid(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()}isValidPoint(e){let t=xe.round(e.getX()),i=xe.round(e.getY());return this.isValid(t,i)}distancePoint(e,t){return xe.distance(e.getX(),e.getY(),t.getX(),t.getY())}distanceResultPoint(e,t){return xe.distance(e.getX(),e.getY(),t.getX(),t.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(K.truncDivision(this.nbLayers-4,8)+1)+15}}class Ei{decode(e,t=null){let i=null,o=new Ca(e.getBlackMatrix()),a=null,l=null;try{let x=o.detectMirror(!1);a=x.getPoints(),this.reportFoundResultPoints(t,a),l=new ve().decode(x)}catch(x){i=x}if(l==null)try{let x=o.detectMirror(!0);a=x.getPoints(),this.reportFoundResultPoints(t,a),l=new ve().decode(x)}catch(x){throw i!=null?i:x}let h=new ft(l.getText(),l.getRawBytes(),l.getNumBits(),a,q.AZTEC,te.currentTimeMillis()),u=l.getByteSegments();u!=null&&h.putMetadata(Ye.BYTE_SEGMENTS,u);let g=l.getECLevel();return g!=null&&h.putMetadata(Ye.ERROR_CORRECTION_LEVEL,g),h}reportFoundResultPoints(e,t){if(e!=null){let i=e.get(ne.NEED_RESULT_POINT_CALLBACK);i!=null&&t.forEach((o,a,l)=>{i.foundPossibleResultPoint(o)})}}reset(){}}class Hh extends bn{constructor(e=500){super(new Ei,e)}}class He{decode(e,t){try{return this.doDecode(e,t)}catch{if(t&&t.get(ne.TRY_HARDER)===!0&&e.isRotateSupported()){const a=e.rotateCounterClockwise(),l=this.doDecode(a,t),h=l.getResultMetadata();let u=270;h!==null&&h.get(Ye.ORIENTATION)===!0&&(u=u+h.get(Ye.ORIENTATION)%360),l.putMetadata(Ye.ORIENTATION,u);const g=l.getResultPoints();if(g!==null){const x=a.getHeight();for(let m=0;m<g.length;m++)g[m]=new X(x-g[m].getY()-1,g[m].getX())}return l}else throw new M}}reset(){}doDecode(e,t){const i=e.getWidth(),o=e.getHeight();let a=new J(i);const l=t&&t.get(ne.TRY_HARDER)===!0,h=Math.max(1,o>>(l?8:5));let u;l?u=o:u=15;const g=Math.trunc(o/2);for(let x=0;x<u;x++){const m=Math.trunc((x+1)/2),A=(x&1)===0,I=g+h*(A?m:-m);if(I<0||I>=o)break;try{a=e.getBlackRow(I,a)}catch{continue}for(let b=0;b<2;b++){if(b===1&&(a.reverse(),t&&t.get(ne.NEED_RESULT_POINT_CALLBACK)===!0)){const T=new Map;t.forEach((v,D)=>T.set(D,v)),T.delete(ne.NEED_RESULT_POINT_CALLBACK),t=T}try{const T=this.decodeRow(I,a,t);if(b===1){T.putMetadata(Ye.ORIENTATION,180);const v=T.getResultPoints();v!==null&&(v[0]=new X(i-v[0].getX()-1,v[0].getY()),v[1]=new X(i-v[1].getX()-1,v[1].getY()))}return T}catch{}}}throw new M}static recordPattern(e,t,i){const o=i.length;for(let g=0;g<o;g++)i[g]=0;const a=e.getSize();if(t>=a)throw new M;let l=!e.get(t),h=0,u=t;for(;u<a;){if(e.get(u)!==l)i[h]++;else{if(++h===o)break;i[h]=1,l=!l}u++}if(!(h===o||h===o-1&&u===a))throw new M}static recordPatternInReverse(e,t,i){let o=i.length,a=e.get(t);for(;t>0&&o>=0;)e.get(--t)!==a&&(o--,a=!a);if(o>=0)throw new M;He.recordPattern(e,t+1,i)}static patternMatchVariance(e,t,i){const o=e.length;let a=0,l=0;for(let g=0;g<o;g++)a+=e[g],l+=t[g];if(a<l)return Number.POSITIVE_INFINITY;const h=a/l;i*=h;let u=0;for(let g=0;g<o;g++){const x=e[g],m=t[g]*h,A=x>m?x-m:m-x;if(A>i)return Number.POSITIVE_INFINITY;u+=A}return u/a}}class V extends He{static findStartPattern(e){const t=e.getSize(),i=e.getNextSet(0);let o=0,a=Int32Array.from([0,0,0,0,0,0]),l=i,h=!1;const u=6;for(let g=i;g<t;g++)if(e.get(g)!==h)a[o]++;else{if(o===u-1){let x=V.MAX_AVG_VARIANCE,m=-1;for(let A=V.CODE_START_A;A<=V.CODE_START_C;A++){const I=He.patternMatchVariance(a,V.CODE_PATTERNS[A],V.MAX_INDIVIDUAL_VARIANCE);I<x&&(x=I,m=A)}if(m>=0&&e.isRange(Math.max(0,l-(g-l)/2),l,!1))return Int32Array.from([l,g,m]);l+=a[0]+a[1],a=a.slice(2,a.length-1),a[o-1]=0,a[o]=0,o--}else o++;a[o]=1,h=!h}throw new M}static decodeCode(e,t,i){He.recordPattern(e,i,t);let o=V.MAX_AVG_VARIANCE,a=-1;for(let l=0;l<V.CODE_PATTERNS.length;l++){const h=V.CODE_PATTERNS[l],u=this.patternMatchVariance(t,h,V.MAX_INDIVIDUAL_VARIANCE);u<o&&(o=u,a=l)}if(a>=0)return a;throw new M}decodeRow(e,t,i){const o=i&&i.get(ne.ASSUME_GS1)===!0,a=V.findStartPattern(t),l=a[2];let h=0;const u=new Uint8Array(20);u[h++]=l;let g;switch(l){case V.CODE_START_A:g=V.CODE_CODE_A;break;case V.CODE_START_B:g=V.CODE_CODE_B;break;case V.CODE_START_C:g=V.CODE_CODE_C;break;default:throw new k}let x=!1,m=!1,A="",I=a[0],b=a[1];const T=Int32Array.from([0,0,0,0,0,0]);let v=0,D=0,F=l,U=0,B=!0,he=!1,oe=!1;for(;!x;){const $n=m;switch(m=!1,v=D,D=V.decodeCode(t,T,b),u[h++]=D,D!==V.CODE_STOP&&(B=!0),D!==V.CODE_STOP&&(U++,F+=U*D),I=b,b+=T.reduce((pu,mu)=>pu+mu,0),D){case V.CODE_START_A:case V.CODE_START_B:case V.CODE_START_C:throw new k}switch(g){case V.CODE_CODE_A:if(D<64)oe===he?A+=String.fromCharCode(" ".charCodeAt(0)+D):A+=String.fromCharCode(" ".charCodeAt(0)+D+128),oe=!1;else if(D<96)oe===he?A+=String.fromCharCode(D-64):A+=String.fromCharCode(D+64),oe=!1;else switch(D!==V.CODE_STOP&&(B=!1),D){case V.CODE_FNC_1:o&&(A.length===0?A+="]C1":A+=String.fromCharCode(29));break;case V.CODE_FNC_2:case V.CODE_FNC_3:break;case V.CODE_FNC_4_A:!he&&oe?(he=!0,oe=!1):he&&oe?(he=!1,oe=!1):oe=!0;break;case V.CODE_SHIFT:m=!0,g=V.CODE_CODE_B;break;case V.CODE_CODE_B:g=V.CODE_CODE_B;break;case V.CODE_CODE_C:g=V.CODE_CODE_C;break;case V.CODE_STOP:x=!0;break}break;case V.CODE_CODE_B:if(D<96)oe===he?A+=String.fromCharCode(" ".charCodeAt(0)+D):A+=String.fromCharCode(" ".charCodeAt(0)+D+128),oe=!1;else switch(D!==V.CODE_STOP&&(B=!1),D){case V.CODE_FNC_1:o&&(A.length===0?A+="]C1":A+=String.fromCharCode(29));break;case V.CODE_FNC_2:case V.CODE_FNC_3:break;case V.CODE_FNC_4_B:!he&&oe?(he=!0,oe=!1):he&&oe?(he=!1,oe=!1):oe=!0;break;case V.CODE_SHIFT:m=!0,g=V.CODE_CODE_A;break;case V.CODE_CODE_A:g=V.CODE_CODE_A;break;case V.CODE_CODE_C:g=V.CODE_CODE_C;break;case V.CODE_STOP:x=!0;break}break;case V.CODE_CODE_C:if(D<100)D<10&&(A+="0"),A+=D;else switch(D!==V.CODE_STOP&&(B=!1),D){case V.CODE_FNC_1:o&&(A.length===0?A+="]C1":A+=String.fromCharCode(29));break;case V.CODE_CODE_A:g=V.CODE_CODE_A;break;case V.CODE_CODE_B:g=V.CODE_CODE_B;break;case V.CODE_STOP:x=!0;break}break}$n&&(g=g===V.CODE_CODE_A?V.CODE_CODE_B:V.CODE_CODE_A)}const It=b-I;if(b=t.getNextUnset(b),!t.isRange(b,Math.min(t.getSize(),b+(b-I)/2),!1))throw new M;if(F-=U*v,F%103!==v)throw new W;const Lt=A.length;if(Lt===0)throw new M;Lt>0&&B&&(g===V.CODE_CODE_C?A=A.substring(0,Lt-2):A=A.substring(0,Lt-1));const yt=(a[1]+a[0])/2,Te=I+It/2,tt=u.length,_t=new Uint8Array(tt);for(let $n=0;$n<tt;$n++)_t[$n]=u[$n];const Jn=[new X(yt,e),new X(Te,e)];return new ft(A,_t,0,Jn,q.CODE_128,new Date().getTime())}}V.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],V.MAX_AVG_VARIANCE=.25,V.MAX_INDIVIDUAL_VARIANCE=.7,V.CODE_SHIFT=98,V.CODE_CODE_C=99,V.CODE_CODE_B=100,V.CODE_CODE_A=101,V.CODE_FNC_1=102,V.CODE_FNC_2=97,V.CODE_FNC_3=96,V.CODE_FNC_4_A=101,V.CODE_FNC_4_B=100,V.CODE_START_A=103,V.CODE_START_B=104,V.CODE_START_C=105,V.CODE_STOP=106;class Ge extends He{constructor(e=!1,t=!1){super(),this.usingCheckDigit=e,this.extendedMode=t,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,t,i){let o=this.counters;o.fill(0),this.decodeRowResult="";let a=Ge.findAsteriskPattern(t,o),l=t.getNextSet(a[1]),h=t.getSize(),u,g;do{Ge.recordPattern(t,l,o);let T=Ge.toNarrowWidePattern(o);if(T<0)throw new M;u=Ge.patternToChar(T),this.decodeRowResult+=u,g=l;for(let v of o)l+=v;l=t.getNextSet(l)}while(u!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let x=0;for(let T of o)x+=T;let m=l-g-x;if(l!==h&&m*2<x)throw new M;if(this.usingCheckDigit){let T=this.decodeRowResult.length-1,v=0;for(let D=0;D<T;D++)v+=Ge.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(D));if(this.decodeRowResult.charAt(T)!==Ge.ALPHABET_STRING.charAt(v%43))throw new W;this.decodeRowResult=this.decodeRowResult.substring(0,T)}if(this.decodeRowResult.length===0)throw new M;let A;this.extendedMode?A=Ge.decodeExtended(this.decodeRowResult):A=this.decodeRowResult;let I=(a[1]+a[0])/2,b=g+x/2;return new ft(A,null,0,[new X(I,e),new X(b,e)],q.CODE_39,new Date().getTime())}static findAsteriskPattern(e,t){let i=e.getSize(),o=e.getNextSet(0),a=0,l=o,h=!1,u=t.length;for(let g=o;g<i;g++)if(e.get(g)!==h)t[a]++;else{if(a===u-1){if(this.toNarrowWidePattern(t)===Ge.ASTERISK_ENCODING&&e.isRange(Math.max(0,l-Math.floor((g-l)/2)),l,!1))return[l,g];l+=t[0]+t[1],t.copyWithin(0,2,2+a-1),t[a-1]=0,t[a]=0,a--}else a++;t[a]=1,h=!h}throw new M}static toNarrowWidePattern(e){let t=e.length,i=0,o;do{let a=2147483647;for(let u of e)u<a&&u>i&&(a=u);i=a,o=0;let l=0,h=0;for(let u=0;u<t;u++){let g=e[u];g>i&&(h|=1<<t-1-u,o++,l+=g)}if(o===3){for(let u=0;u<t&&o>0;u++){let g=e[u];if(g>i&&(o--,g*2>=l))return-1}return h}}while(o>3);return-1}static patternToChar(e){for(let t=0;t<Ge.CHARACTER_ENCODINGS.length;t++)if(Ge.CHARACTER_ENCODINGS[t]===e)return Ge.ALPHABET_STRING.charAt(t);if(e===Ge.ASTERISK_ENCODING)return"*";throw new M}static decodeExtended(e){let t=e.length,i="";for(let o=0;o<t;o++){let a=e.charAt(o);if(a==="+"||a==="$"||a==="%"||a==="/"){let l=e.charAt(o+1),h="\0";switch(a){case"+":if(l>="A"&&l<="Z")h=String.fromCharCode(l.charCodeAt(0)+32);else throw new k;break;case"$":if(l>="A"&&l<="Z")h=String.fromCharCode(l.charCodeAt(0)-64);else throw new k;break;case"%":if(l>="A"&&l<="E")h=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")h=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")h=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")h=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")h="\0";else if(l==="V")h="@";else if(l==="W")h="`";else if(l==="X"||l==="Y"||l==="Z")h="\x7F";else throw new k;break;case"/":if(l>="A"&&l<="O")h=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")h=":";else throw new k;break}i+=h,o++}else i+=a}return i}}Ge.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Ge.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Ge.ASTERISK_ENCODING=148;class _e extends He{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,t,i){let o=this.decodeStart(t),a=this.decodeEnd(t),l=new Ie;_e.decodeMiddle(t,o[1],a[0],l);let h=l.toString(),u=null;i!=null&&(u=i.get(ne.ALLOWED_LENGTHS)),u==null&&(u=_e.DEFAULT_ALLOWED_LENGTHS);let g=h.length,x=!1,m=0;for(let b of u){if(g===b){x=!0;break}b>m&&(m=b)}if(!x&&g>m&&(x=!0),!x)throw new k;const A=[new X(o[1],e),new X(a[0],e)];return new ft(h,null,0,A,q.ITF,new Date().getTime())}static decodeMiddle(e,t,i,o){let a=new Int32Array(10),l=new Int32Array(5),h=new Int32Array(5);for(a.fill(0),l.fill(0),h.fill(0);t<i;){He.recordPattern(e,t,a);for(let g=0;g<5;g++){let x=2*g;l[g]=a[x],h[g]=a[x+1]}let u=_e.decodeDigit(l);o.append(u.toString()),u=this.decodeDigit(h),o.append(u.toString()),a.forEach(function(g){t+=g})}}decodeStart(e){let t=_e.skipWhiteSpace(e),i=_e.findGuardPattern(e,t,_e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(e,i[0]),i}validateQuietZone(e,t){let i=this.narrowLineWidth*10;i=i<t?i:t;for(let o=t-1;i>0&&o>=0&&!e.get(o);o--)i--;if(i!==0)throw new M}static skipWhiteSpace(e){const t=e.getSize(),i=e.getNextSet(0);if(i===t)throw new M;return i}decodeEnd(e){e.reverse();try{let t=_e.skipWhiteSpace(e),i;try{i=_e.findGuardPattern(e,t,_e.END_PATTERN_REVERSED[0])}catch(a){a instanceof M&&(i=_e.findGuardPattern(e,t,_e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,i[0]);let o=i[0];return i[0]=e.getSize()-i[1],i[1]=e.getSize()-o,i}finally{e.reverse()}}static findGuardPattern(e,t,i){let o=i.length,a=new Int32Array(o),l=e.getSize(),h=!1,u=0,g=t;a.fill(0);for(let x=t;x<l;x++)if(e.get(x)!==h)a[u]++;else{if(u===o-1){if(He.patternMatchVariance(a,i,_e.MAX_INDIVIDUAL_VARIANCE)<_e.MAX_AVG_VARIANCE)return[g,x];g+=a[0]+a[1],te.arraycopy(a,2,a,0,u-1),a[u-1]=0,a[u]=0,u--}else u++;a[u]=1,h=!h}throw new M}static decodeDigit(e){let t=_e.MAX_AVG_VARIANCE,i=-1,o=_e.PATTERNS.length;for(let a=0;a<o;a++){let l=_e.PATTERNS[a],h=He.patternMatchVariance(e,l,_e.MAX_INDIVIDUAL_VARIANCE);h<t?(t=h,i=a):h===t&&(i=-1)}if(i>=0)return i%10;throw new M}}_e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],_e.MAX_AVG_VARIANCE=.38,_e.MAX_INDIVIDUAL_VARIANCE=.5,_e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],_e.START_PATTERN=Int32Array.from([1,1,1,1]),_e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class ke extends He{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let t=!1,i,o=0,a=Int32Array.from([0,0,0]);for(;!t;){a=Int32Array.from([0,0,0]),i=ke.findGuardPattern(e,o,!1,this.START_END_PATTERN,a);let l=i[0];o=i[1];let h=l-(o-l);h>=0&&(t=e.isRange(h,l,!1))}return i}static checkChecksum(e){return ke.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(t===0)return!1;let i=parseInt(e.charAt(t-1),10);return ke.getStandardUPCEANChecksum(e.substring(0,t-1))===i}static getStandardUPCEANChecksum(e){let t=e.length,i=0;for(let o=t-1;o>=0;o-=2){let a=e.charAt(o).charCodeAt(0)-"0".charCodeAt(0);if(a<0||a>9)throw new k;i+=a}i*=3;for(let o=t-2;o>=0;o-=2){let a=e.charAt(o).charCodeAt(0)-"0".charCodeAt(0);if(a<0||a>9)throw new k;i+=a}return(1e3-i)%10}static decodeEnd(e,t){return ke.findGuardPattern(e,t,!1,ke.START_END_PATTERN,new Int32Array(ke.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,t,i,o){return this.findGuardPattern(e,t,i,o,new Int32Array(o.length))}static findGuardPattern(e,t,i,o,a){let l=e.getSize();t=i?e.getNextUnset(t):e.getNextSet(t);let h=0,u=t,g=o.length,x=i;for(let m=t;m<l;m++)if(e.get(m)!==x)a[h]++;else{if(h===g-1){if(He.patternMatchVariance(a,o,ke.MAX_INDIVIDUAL_VARIANCE)<ke.MAX_AVG_VARIANCE)return Int32Array.from([u,m]);u+=a[0]+a[1];let A=a.slice(2,a.length-1);for(let I=0;I<h-1;I++)a[I]=A[I];a[h-1]=0,a[h]=0,h--}else h++;a[h]=1,x=!x}throw new M}static decodeDigit(e,t,i,o){this.recordPattern(e,i,t);let a=this.MAX_AVG_VARIANCE,l=-1,h=o.length;for(let u=0;u<h;u++){let g=o[u],x=He.patternMatchVariance(t,g,ke.MAX_INDIVIDUAL_VARIANCE);x<a&&(a=x,l=u)}if(l>=0)return l;throw new M}}ke.MAX_AVG_VARIANCE=.48,ke.MAX_INDIVIDUAL_VARIANCE=.7,ke.START_END_PATTERN=Int32Array.from([1,1,1]),ke.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),ke.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ke.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Cr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,i){let o=this.decodeRowStringBuffer,a=this.decodeMiddle(t,i,o),l=o.toString(),h=Cr.parseExtensionString(l),u=[new X((i[0]+i[1])/2,e),new X(a,e)],g=new ft(l,null,0,u,q.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&g.putAllMetadata(h),g}decodeMiddle(e,t,i){let o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let a=e.getSize(),l=t[1],h=0;for(let g=0;g<5&&l<a;g++){let x=ke.decodeDigit(e,o,l,ke.L_AND_G_PATTERNS);i+=String.fromCharCode("0".charCodeAt(0)+x%10);for(let m of o)l+=m;x>=10&&(h|=1<<4-g),g!==4&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(i.length!==5)throw new M;let u=this.determineCheckDigit(h);if(Cr.extensionChecksum(i.toString())!==u)throw new M;return l}static extensionChecksum(e){let t=e.length,i=0;for(let o=t-2;o>=0;o-=2)i+=e.charAt(o).charCodeAt(0)-"0".charCodeAt(0);i*=3;for(let o=t-1;o>=0;o-=2)i+=e.charAt(o).charCodeAt(0)-"0".charCodeAt(0);return i*=3,i%10}determineCheckDigit(e){for(let t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new M}static parseExtensionString(e){if(e.length!==5)return null;let t=Cr.parseExtension5String(e);return t==null?null:new Map([[Ye.SUGGESTED_PRICE,t]])}static parseExtension5String(e){let t;switch(e.charAt(0)){case"0":t="\xA3";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}let i=parseInt(e.substring(1)),o=(i/100).toString(),a=i%100,l=a<10?"0"+a:a.toString();return t+o+"."+l}}class bs{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,i){let o=this.decodeRowStringBuffer,a=this.decodeMiddle(t,i,o),l=o.toString(),h=bs.parseExtensionString(l),u=[new X((i[0]+i[1])/2,e),new X(a,e)],g=new ft(l,null,0,u,q.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&g.putAllMetadata(h),g}decodeMiddle(e,t,i){let o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let a=e.getSize(),l=t[1],h=0;for(let u=0;u<2&&l<a;u++){let g=ke.decodeDigit(e,o,l,ke.L_AND_G_PATTERNS);i+=String.fromCharCode("0".charCodeAt(0)+g%10);for(let x of o)l+=x;g>=10&&(h|=1<<1-u),u!==1&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(i.length!==2)throw new M;if(parseInt(i.toString())%4!==h)throw new M;return l}static parseExtensionString(e){return e.length!==2?null:new Map([[Ye.ISSUE_NUMBER,parseInt(e)]])}}class Ia{static decodeRow(e,t,i){let o=ke.findGuardPattern(t,i,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Cr().decodeRow(e,t,o)}catch{return new bs().decodeRow(e,t,o)}}}Ia.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class we extends ke{constructor(){super(),this.decodeRowStringBuffer="",we.L_AND_G_PATTERNS=we.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let t=we.L_PATTERNS[e-10],i=new Int32Array(t.length);for(let o=0;o<t.length;o++)i[o]=t[t.length-o-1];we.L_AND_G_PATTERNS[e]=i}}decodeRow(e,t,i){let o=we.findStartGuardPattern(t),a=i==null?null:i.get(ne.NEED_RESULT_POINT_CALLBACK);if(a!=null){const B=new X((o[0]+o[1])/2,e);a.foundPossibleResultPoint(B)}let l=this.decodeMiddle(t,o,this.decodeRowStringBuffer),h=l.rowOffset,u=l.resultString;if(a!=null){const B=new X(h,e);a.foundPossibleResultPoint(B)}let g=this.decodeEnd(t,h);if(a!=null){const B=new X((g[0]+g[1])/2,e);a.foundPossibleResultPoint(B)}let x=g[1],m=x+(x-g[0]);if(m>=t.getSize()||!t.isRange(x,m,!1))throw new M;let A=u.toString();if(A.length<8)throw new k;if(!we.checkChecksum(A))throw new W;let I=(o[1]+o[0])/2,b=(g[1]+g[0])/2,T=this.getBarcodeFormat(),v=[new X(I,e),new X(b,e)],D=new ft(A,null,0,v,T,new Date().getTime()),F=0;try{let B=Ia.decodeRow(e,t,g[1]);D.putMetadata(Ye.UPC_EAN_EXTENSION,B.getText()),D.putAllMetadata(B.getResultMetadata()),D.addResultPoints(B.getResultPoints()),F=B.getText().length}catch{}let U=i==null?null:i.get(ne.ALLOWED_EAN_EXTENSIONS);if(U!=null){let B=!1;for(let he in U)if(F.toString()===he){B=!0;break}if(!B)throw new M}return D}decodeEnd(e,t){return we.findGuardPattern(e,t,!1,we.START_END_PATTERN,new Int32Array(we.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return we.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(t===0)return!1;let i=parseInt(e.charAt(t-1),10);return we.getStandardUPCEANChecksum(e.substring(0,t-1))===i}static getStandardUPCEANChecksum(e){let t=e.length,i=0;for(let o=t-1;o>=0;o-=2){let a=e.charAt(o).charCodeAt(0)-"0".charCodeAt(0);if(a<0||a>9)throw new k;i+=a}i*=3;for(let o=t-2;o>=0;o-=2){let a=e.charAt(o).charCodeAt(0)-"0".charCodeAt(0);if(a<0||a>9)throw new k;i+=a}return(1e3-i)%10}}class Tn extends we{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,i){let o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let a=e.getSize(),l=t[1],h=0;for(let g=0;g<6&&l<a;g++){let x=we.decodeDigit(e,o,l,we.L_AND_G_PATTERNS);i+=String.fromCharCode("0".charCodeAt(0)+x%10);for(let m of o)l+=m;x>=10&&(h|=1<<5-g)}i=Tn.determineFirstDigit(i,h),l=we.findGuardPattern(e,l,!0,we.MIDDLE_PATTERN,new Int32Array(we.MIDDLE_PATTERN.length).fill(0))[1];for(let g=0;g<6&&l<a;g++){let x=we.decodeDigit(e,o,l,we.L_PATTERNS);i+=String.fromCharCode("0".charCodeAt(0)+x);for(let m of o)l+=m}return{rowOffset:l,resultString:i}}getBarcodeFormat(){return q.EAN_13}static determineFirstDigit(e,t){for(let i=0;i<10;i++)if(t===this.FIRST_DIGIT_ENCODINGS[i])return e=String.fromCharCode("0".charCodeAt(0)+i)+e,e;throw new M}}Tn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class ya extends we{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,i){const o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let a=e.getSize(),l=t[1];for(let u=0;u<4&&l<a;u++){let g=we.decodeDigit(e,o,l,we.L_PATTERNS);i+=String.fromCharCode("0".charCodeAt(0)+g);for(let x of o)l+=x}l=we.findGuardPattern(e,l,!0,we.MIDDLE_PATTERN,new Int32Array(we.MIDDLE_PATTERN.length).fill(0))[1];for(let u=0;u<4&&l<a;u++){let g=we.decodeDigit(e,o,l,we.L_PATTERNS);i+=String.fromCharCode("0".charCodeAt(0)+g);for(let x of o)l+=x}return{rowOffset:l,resultString:i}}getBarcodeFormat(){return q.EAN_8}}class _a extends we{constructor(){super(...arguments),this.ean13Reader=new Tn}getBarcodeFormat(){return q.UPC_A}decode(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,t,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,i))}decodeMiddle(e,t,i){return this.ean13Reader.decodeMiddle(e,t,i)}maybeReturnResult(e){let t=e.getText();if(t.charAt(0)==="0"){let i=new ft(t.substring(1),null,null,e.getResultPoints(),q.UPC_A);return e.getResultMetadata()!=null&&i.putAllMetadata(e.getResultMetadata()),i}else throw new M}reset(){this.ean13Reader.reset()}}class Bt extends we{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,t,i){const o=this.decodeMiddleCounters.map(g=>g);o[0]=0,o[1]=0,o[2]=0,o[3]=0;const a=e.getSize();let l=t[1],h=0;for(let g=0;g<6&&l<a;g++){const x=Bt.decodeDigit(e,o,l,Bt.L_AND_G_PATTERNS);i+=String.fromCharCode("0".charCodeAt(0)+x%10);for(let m of o)l+=m;x>=10&&(h|=1<<5-g)}let u=Bt.determineNumSysAndCheckDigit(i,h);return{rowOffset:l,resultString:u}}decodeEnd(e,t){return Bt.findGuardPatternWithoutCounters(e,t,!0,Bt.MIDDLE_END_PATTERN)}checkChecksum(e){return we.checkChecksum(Bt.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,t){for(let i=0;i<=1;i++)for(let o=0;o<10;o++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][o]){let a=String.fromCharCode("0".charCodeAt(0)+i),l=String.fromCharCode("0".charCodeAt(0)+o);return a+e+l}throw M.getNotFoundInstance()}getBarcodeFormat(){return q.UPC_E}static convertUPCEtoUPCA(e){const t=e.slice(1,7).split("").map(a=>a.charCodeAt(0)),i=new Ie;i.append(e.charAt(0));let o=t[5];switch(o){case 0:case 1:case 2:i.appendChars(t,0,2),i.append(o),i.append("0000"),i.appendChars(t,2,3);break;case 3:i.appendChars(t,0,3),i.append("00000"),i.appendChars(t,3,2);break;case 4:i.appendChars(t,0,4),i.append("00000"),i.append(t[4]);break;default:i.appendChars(t,0,5),i.append("0000"),i.append(o);break}return e.length>=8&&i.append(e.charAt(7)),i.toString()}}Bt.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Bt.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ts extends He{constructor(e){super();let t=e==null?null:e.get(ne.POSSIBLE_FORMATS),i=[];c(t)?(i.push(new Tn),i.push(new _a),i.push(new ya),i.push(new Bt)):(t.indexOf(q.EAN_13)>-1&&i.push(new Tn),t.indexOf(q.UPC_A)>-1&&i.push(new _a),t.indexOf(q.EAN_8)>-1&&i.push(new ya),t.indexOf(q.UPC_E)>-1&&i.push(new Bt)),this.readers=i}decodeRow(e,t,i){for(let o of this.readers)try{const a=o.decodeRow(e,t,i),l=a.getBarcodeFormat()===q.EAN_13&&a.getText().charAt(0)==="0",h=i==null?null:i.get(ne.POSSIBLE_FORMATS),u=h==null||h.includes(q.UPC_A);if(l&&u){const g=a.getRawBytes(),x=new ft(a.getText().substring(1),g,g?g.length:null,a.getResultPoints(),q.UPC_A);return x.putAllMetadata(a.getResultMetadata()),x}return a}catch{}throw new M}reset(){for(let e of this.readers)e.reset()}}class st extends He{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,t){for(let i=0;i<t.length;i++)if(He.patternMatchVariance(e,t[i],st.MAX_INDIVIDUAL_VARIANCE)<st.MAX_AVG_VARIANCE)return i;throw new M}static count(e){return xe.sum(new Int32Array(e))}static increment(e,t){let i=0,o=t[0];for(let a=1;a<e.length;a++)t[a]>o&&(o=t[a],i=a);e[i]++}static decrement(e,t){let i=0,o=t[0];for(let a=1;a<e.length;a++)t[a]<o&&(o=t[a],i=a);e[i]--}static isFinderPattern(e){let t=e[0]+e[1],i=t+e[2]+e[3],o=t/i;if(o>=st.MIN_FINDER_PATTERN_RATIO&&o<=st.MAX_FINDER_PATTERN_RATIO){let a=Number.MAX_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER;for(let h of e)h>l&&(l=h),h<a&&(a=h);return l<10*a}return!1}}st.MAX_AVG_VARIANCE=.2,st.MAX_INDIVIDUAL_VARIANCE=.45,st.MIN_FINDER_PATTERN_RATIO=9.5/12,st.MAX_FINDER_PATTERN_RATIO=12.5/14;class jn{constructor(e,t){this.value=e,this.checksumPortion=t}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof jn))return!1;const t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ai{constructor(e,t,i,o,a){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new X(i,a)),this.resultPoints.push(new X(o,a))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof Ai))return!1;const t=e;return this.value===t.value}hashCode(){return this.value}}class Vt{constructor(){}static getRSSvalue(e,t,i){let o=0;for(let u of e)o+=u;let a=0,l=0,h=e.length;for(let u=0;u<h-1;u++){let g;for(g=1,l|=1<<u;g<e[u];g++,l&=~(1<<u)){let x=Vt.combins(o-g-1,h-u-2);if(i&&l===0&&o-g-(h-u-1)>=h-u-1&&(x-=Vt.combins(o-g-(h-u),h-u-2)),h-u-1>1){let m=0;for(let A=o-g-(h-u-2);A>t;A--)m+=Vt.combins(o-g-A-1,h-u-3);x-=m*(h-1-u)}else o-g>t&&x--;a+=x}o-=g}return a}static combins(e,t){let i,o;e-t>t?(o=t,i=e-t):(o=e-t,i=t);let a=1,l=1;for(let h=e;h>i;h--)a*=h,l<=o&&(a/=l,l++);for(;l<=o;)a/=l,l++;return a}}class Gh{static buildBitArray(e){let t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);let i=12*t,o=new J(i),a=0,h=e[0].getRightChar().getValue();for(let u=11;u>=0;--u)(h&1<<u)!=0&&o.set(a),a++;for(let u=1;u<e.length;++u){let g=e[u],x=g.getLeftChar().getValue();for(let m=11;m>=0;--m)(x&1<<m)!=0&&o.set(a),a++;if(g.getRightChar()!=null){let m=g.getRightChar().getValue();for(let A=11;A>=0;--A)(m&1<<A)!=0&&o.set(a),a++}}return o}}class Sn{constructor(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Ss{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class Et extends Ss{constructor(e,t){super(e),this.value=t}getValue(){return this.value}isFNC1(){return this.value===Et.FNC1}}Et.FNC1="$";class vn extends Ss{constructor(e,t,i){super(e),i?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=t}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Rt extends Ss{constructor(e,t,i){if(super(e),t<0||t>10||i<0||i>10)throw new k;this.firstDigit=t,this.secondDigit=i}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Rt.FNC1}isSecondDigitFNC1(){return this.secondDigit===Rt.FNC1}isAnyFNC1(){return this.firstDigit===Rt.FNC1||this.secondDigit===Rt.FNC1}}Rt.FNC1=10;class H{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new M;let t=e.substring(0,2);for(let a of H.TWO_DIGIT_DATA_LENGTH)if(a[0]===t)return a[1]===H.VARIABLE_LENGTH?H.processVariableAI(2,a[2],e):H.processFixedAI(2,a[1],e);if(e.length<3)throw new M;let i=e.substring(0,3);for(let a of H.THREE_DIGIT_DATA_LENGTH)if(a[0]===i)return a[1]===H.VARIABLE_LENGTH?H.processVariableAI(3,a[2],e):H.processFixedAI(3,a[1],e);for(let a of H.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(a[0]===i)return a[1]===H.VARIABLE_LENGTH?H.processVariableAI(4,a[2],e):H.processFixedAI(4,a[1],e);if(e.length<4)throw new M;let o=e.substring(0,4);for(let a of H.FOUR_DIGIT_DATA_LENGTH)if(a[0]===o)return a[1]===H.VARIABLE_LENGTH?H.processVariableAI(4,a[2],e):H.processFixedAI(4,a[1],e);throw new M}static processFixedAI(e,t,i){if(i.length<e)throw new M;let o=i.substring(0,e);if(i.length<e+t)throw new M;let a=i.substring(e,e+t),l=i.substring(e+t),h="("+o+")"+a,u=H.parseFieldsInGeneralPurpose(l);return u==null?h:h+u}static processVariableAI(e,t,i){let o=i.substring(0,e),a;i.length<e+t?a=i.length:a=e+t;let l=i.substring(e,a),h=i.substring(a),u="("+o+")"+l,g=H.parseFieldsInGeneralPurpose(h);return g==null?u:u+g}}H.VARIABLE_LENGTH=[],H.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",H.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",H.VARIABLE_LENGTH,20],["22",H.VARIABLE_LENGTH,29],["30",H.VARIABLE_LENGTH,8],["37",H.VARIABLE_LENGTH,8],["90",H.VARIABLE_LENGTH,30],["91",H.VARIABLE_LENGTH,30],["92",H.VARIABLE_LENGTH,30],["93",H.VARIABLE_LENGTH,30],["94",H.VARIABLE_LENGTH,30],["95",H.VARIABLE_LENGTH,30],["96",H.VARIABLE_LENGTH,30],["97",H.VARIABLE_LENGTH,3],["98",H.VARIABLE_LENGTH,30],["99",H.VARIABLE_LENGTH,30]],H.THREE_DIGIT_DATA_LENGTH=[["240",H.VARIABLE_LENGTH,30],["241",H.VARIABLE_LENGTH,30],["242",H.VARIABLE_LENGTH,6],["250",H.VARIABLE_LENGTH,30],["251",H.VARIABLE_LENGTH,30],["253",H.VARIABLE_LENGTH,17],["254",H.VARIABLE_LENGTH,20],["400",H.VARIABLE_LENGTH,30],["401",H.VARIABLE_LENGTH,30],["402",17],["403",H.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",H.VARIABLE_LENGTH,20],["421",H.VARIABLE_LENGTH,15],["422",3],["423",H.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],H.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",H.VARIABLE_LENGTH,15],["391",H.VARIABLE_LENGTH,18],["392",H.VARIABLE_LENGTH,15],["393",H.VARIABLE_LENGTH,18],["703",H.VARIABLE_LENGTH,30]],H.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",H.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",H.VARIABLE_LENGTH,20],["8003",H.VARIABLE_LENGTH,30],["8004",H.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",H.VARIABLE_LENGTH,30],["8008",H.VARIABLE_LENGTH,12],["8018",18],["8020",H.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",H.VARIABLE_LENGTH,70],["8200",H.VARIABLE_LENGTH,70]];class zn{constructor(e){this.buffer=new Ie,this.information=e}decodeAllCodes(e,t){let i=t,o=null;do{let a=this.decodeGeneralPurposeField(i,o),l=H.parseFieldsInGeneralPurpose(a.getNewString());if(l!=null&&e.append(l),a.isRemaining()?o=""+a.getRemainingValue():o=null,i===a.getNewPosition())break;i=a.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let a=this.extractNumericValueFromBitArray(e,4);return a===0?new Rt(this.information.getSize(),Rt.FNC1,Rt.FNC1):new Rt(this.information.getSize(),a-1,Rt.FNC1)}let t=this.extractNumericValueFromBitArray(e,7),i=(t-8)/11,o=(t-8)%11;return new Rt(e+7,i,o)}extractNumericValueFromBitArray(e,t){return zn.extractNumericValueFromBitArray(this.information,e,t)}static extractNumericValueFromBitArray(e,t,i){let o=0;for(let a=0;a<i;++a)e.get(t+a)&&(o|=1<<i-a-1);return o}decodeGeneralPurposeField(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);let i=this.parseBlocks();return i!=null&&i.isRemaining()?new vn(this.current.getPosition(),this.buffer.toString(),i.getRemainingValue()):new vn(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,t;do{let i=this.current.getPosition();if(this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished()),!(i!==this.current.getPosition())&&!e)break}while(!e);return t.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let t;return e.isSecondDigitFNC1()?t=new vn(this.current.getPosition(),this.buffer.toString()):t=new vn(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Sn(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let t=new vn(this.current.getPosition(),this.buffer.toString());return new Sn(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Sn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let t=new vn(this.current.getPosition(),this.buffer.toString());return new Sn(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Sn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let t=new vn(this.current.getPosition(),this.buffer.toString());return new Sn(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Sn(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<116)return!0;if(e+8>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(e,8);return o>=232&&o<253}decodeIsoIec646(e){let t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Et(e+5,Et.FNC1);if(t>=5&&t<15)return new Et(e+5,"0"+(t-5));let i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<90)return new Et(e+7,""+(i+1));if(i>=90&&i<116)return new Et(e+7,""+(i+7));let o=this.extractNumericValueFromBitArray(e,8),a;switch(o){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new k}return new Et(e+8,a)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,6);return i>=16&&i<63}decodeAlphanumeric(e){let t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Et(e+5,Et.FNC1);if(t>=5&&t<15)return new Et(e+5,"0"+(t-5));let i=this.extractNumericValueFromBitArray(e,6);if(i>=32&&i<58)return new Et(e+6,""+(i+33));let o;switch(i){case 58:o="*";break;case 59:o=",";break;case 60:o="-";break;case 61:o=".";break;case 62:o="/";break;default:throw new Ut("Decoding invalid alphanumeric value: "+i)}return new Et(e+6,o)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0}}class vs{constructor(e){this.information=e,this.generalDecoder=new zn(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class At extends vs{constructor(e){super(e)}encodeCompressedGtin(e,t){e.append("(01)");let i=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,i)}encodeCompressedGtinWithoutAI(e,t,i){for(let o=0;o<4;++o){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(t+10*o,10);a/100===0&&e.append("0"),a/10===0&&e.append("0"),e.append(a)}At.appendCheckDigit(e,i)}static appendCheckDigit(e,t){let i=0;for(let o=0;o<13;o++){let a=e.charAt(o+t).charCodeAt(0)-"0".charCodeAt(0);i+=(o&1)===0?3*a:a}i=10-i%10,i===10&&(i=0),e.append(i)}}At.GTIN_SIZE=40;class Yn extends At{constructor(e){super(e)}parseInformation(){let e=new Ie;e.append("(01)");let t=e.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(Yn.HEADER_SIZE,4);return e.append(i),this.encodeCompressedGtinWithoutAI(e,Yn.HEADER_SIZE+4,t),this.getGeneralDecoder().decodeAllCodes(e,Yn.HEADER_SIZE+44)}}Yn.HEADER_SIZE=1+1+2;class Ci extends vs{constructor(e){super(e)}parseInformation(){let e=new Ie;return this.getGeneralDecoder().decodeAllCodes(e,Ci.HEADER_SIZE)}}Ci.HEADER_SIZE=2+1+2;class Ii extends At{constructor(e){super(e)}encodeCompressedWeight(e,t,i){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(t,i);this.addWeightCode(e,o);let a=this.checkWeight(o),l=1e5;for(let h=0;h<5;++h)a/l===0&&e.append("0"),l/=10;e.append(a)}}class Ht extends Ii{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=Ht.HEADER_SIZE+Ii.GTIN_SIZE+Ht.WEIGHT_SIZE)throw new M;let e=new Ie;return this.encodeCompressedGtin(e,Ht.HEADER_SIZE),this.encodeCompressedWeight(e,Ht.HEADER_SIZE+Ii.GTIN_SIZE,Ht.WEIGHT_SIZE),e.toString()}}Ht.HEADER_SIZE=4+1,Ht.WEIGHT_SIZE=15;class Wh extends Ht{constructor(e){super(e)}addWeightCode(e,t){e.append("(3103)")}checkWeight(e){return e}}class Xh extends Ht{constructor(e){super(e)}addWeightCode(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class Gt extends At{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Gt.HEADER_SIZE+At.GTIN_SIZE)throw new M;let e=new Ie;this.encodeCompressedGtin(e,Gt.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(Gt.HEADER_SIZE+At.GTIN_SIZE,Gt.LAST_DIGIT_SIZE);e.append("(392"),e.append(t),e.append(")");let i=this.getGeneralDecoder().decodeGeneralPurposeField(Gt.HEADER_SIZE+At.GTIN_SIZE+Gt.LAST_DIGIT_SIZE,null);return e.append(i.getNewString()),e.toString()}}Gt.HEADER_SIZE=5+1+2,Gt.LAST_DIGIT_SIZE=2;class gt extends At{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<gt.HEADER_SIZE+At.GTIN_SIZE)throw new M;let e=new Ie;this.encodeCompressedGtin(e,gt.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(gt.HEADER_SIZE+At.GTIN_SIZE,gt.LAST_DIGIT_SIZE);e.append("(393"),e.append(t),e.append(")");let i=this.getGeneralDecoder().extractNumericValueFromBitArray(gt.HEADER_SIZE+At.GTIN_SIZE+gt.LAST_DIGIT_SIZE,gt.FIRST_THREE_DIGITS_SIZE);i/100==0&&e.append("0"),i/10==0&&e.append("0"),e.append(i);let o=this.getGeneralDecoder().decodeGeneralPurposeField(gt.HEADER_SIZE+At.GTIN_SIZE+gt.LAST_DIGIT_SIZE+gt.FIRST_THREE_DIGITS_SIZE,null);return e.append(o.getNewString()),e.toString()}}gt.HEADER_SIZE=5+1+2,gt.LAST_DIGIT_SIZE=2,gt.FIRST_THREE_DIGITS_SIZE=10;class De extends Ii{constructor(e,t,i){super(e),this.dateCode=i,this.firstAIdigits=t}parseInformation(){if(this.getInformation().getSize()!=De.HEADER_SIZE+De.GTIN_SIZE+De.WEIGHT_SIZE+De.DATE_SIZE)throw new M;let e=new Ie;return this.encodeCompressedGtin(e,De.HEADER_SIZE),this.encodeCompressedWeight(e,De.HEADER_SIZE+De.GTIN_SIZE,De.WEIGHT_SIZE),this.encodeCompressedDate(e,De.HEADER_SIZE+De.GTIN_SIZE+De.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,t){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(t,De.DATE_SIZE);if(i==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let o=i%32;i/=32;let a=i%12+1;i/=12;let l=i;l/10==0&&e.append("0"),e.append(l),a/10==0&&e.append("0"),e.append(a),o/10==0&&e.append("0"),e.append(o)}addWeightCode(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")}checkWeight(e){return e%1e5}}De.HEADER_SIZE=7+1,De.WEIGHT_SIZE=20,De.DATE_SIZE=16;function ba(p){try{if(p.get(1))return new Yn(p);if(!p.get(2))return new Ci(p);switch(zn.extractNumericValueFromBitArray(p,1,4)){case 4:return new Wh(p);case 5:return new Xh(p)}switch(zn.extractNumericValueFromBitArray(p,1,5)){case 12:return new Gt(p);case 13:return new gt(p)}switch(zn.extractNumericValueFromBitArray(p,1,7)){case 56:return new De(p,"310","11");case 57:return new De(p,"320","11");case 58:return new De(p,"310","13");case 59:return new De(p,"320","13");case 60:return new De(p,"310","15");case 61:return new De(p,"320","15");case 62:return new De(p,"310","17");case 63:return new De(p,"320","17")}}catch(e){throw console.log(e),new Ut("unknown decoder: "+p)}}class ln{constructor(e,t,i,o){this.leftchar=e,this.rightchar=t,this.finderpattern=i,this.maybeLast=o}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,t){return e instanceof ln?ln.equalsOrNull(e.leftchar,t.leftchar)&&ln.equalsOrNull(e.rightchar,t.rightchar)&&ln.equalsOrNull(e.finderpattern,t.finderpattern):!1}static equalsOrNull(e,t){return e===null?t===null:ln.equals(e,t)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Ns{constructor(e,t,i){this.pairs=e,this.rowNumber=t,this.wasReversed=i}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,t){return e instanceof Ns?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1}checkEqualitity(e,t){if(!e||!t)return;let i;return e.forEach((o,a)=>{t.forEach(l=>{o.getLeftChar().getValue()===l.getLeftChar().getValue()&&o.getRightChar().getValue()===l.getRightChar().getValue()&&o.getFinderPatter().getValue()===l.getFinderPatter().getValue()&&(i=!0)})}),i}}class P extends st{constructor(e){super(...arguments),this.pairs=new Array(P.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,t,i){this.pairs.length=0,this.startFromEven=!1;try{return P.constructResult(this.decodeRow2pairs(e,t))}catch(o){this.verbose&&console.log(o)}return this.pairs.length=0,this.startFromEven=!0,P.constructResult(this.decodeRow2pairs(e,t))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,t){let i=!1;for(;!i;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(a){if(a instanceof M){if(!this.pairs.length)throw new M;i=!0}}if(this.checkChecksum())return this.pairs;let o;if(this.rows.length?o=!0:o=!1,this.storeRow(e,!1),o){let a=this.checkRowsBoolean(!1);if(a!=null||(a=this.checkRowsBoolean(!0),a!=null))return a}throw new M}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let t=null;try{t=this.checkRows(new Array,0)}catch(i){this.verbose&&console.log(i)}return e&&(this.rows=this.rows.reverse()),t}checkRows(e,t){for(let i=t;i<this.rows.length;i++){let o=this.rows[i];this.pairs.length=0;for(let l of e)this.pairs.push(l.getPairs());if(this.pairs.push(o.getPairs()),!P.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let a=new Array(e);a.push(o);try{return this.checkRows(a,i+1)}catch(l){this.verbose&&console.log(l)}}throw new M}static isValidSequence(e){for(let t of P.FINDER_PATTERN_SEQUENCES){if(e.length>t.length)continue;let i=!0;for(let o=0;o<e.length;o++)if(e[o].getFinderPattern().getValue()!=t[o]){i=!1;break}if(i)return!0}return!1}storeRow(e,t){let i=0,o=!1,a=!1;for(;i<this.rows.length;){let l=this.rows[i];if(l.getRowNumber()>e){a=l.isEquivalent(this.pairs);break}o=l.isEquivalent(this.pairs),i++}a||o||P.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new Ns(this.pairs,e,t)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,t){for(let i of t)if(i.getPairs().length!==e.length){for(let o of i.getPairs())for(let a of e)if(ln.equals(o,a))break}}static isPartialRow(e,t){for(let i of t){let o=!0;for(let a of e){let l=!1;for(let h of i.getPairs())if(a.equals(h)){l=!0;break}if(!l){o=!1;break}}if(o)return!0}return!1}getRows(){return this.rows}static constructResult(e){let t=Gh.buildBitArray(e),o=ba(t).parseInformation(),a=e[0].getFinderPattern().getResultPoints(),l=e[e.length-1].getFinderPattern().getResultPoints(),h=[a[0],a[1],l[0],l[1]];return new ft(o,null,null,h,q.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),t=e.getLeftChar(),i=e.getRightChar();if(i==null)return!1;let o=i.getChecksumPortion(),a=2;for(let h=1;h<this.pairs.size();++h){let u=this.pairs.get(h);o+=u.getLeftChar().getChecksumPortion(),a++;let g=u.getRightChar();g!=null&&(o+=g.getChecksumPortion(),a++)}return o%=211,211*(a-4)+o==t.getValue()}static getNextSecondBar(e,t){let i;return e.get(t)?(i=e.getNextUnset(t),i=e.getNextSet(i)):(i=e.getNextSet(t),i=e.getNextUnset(i)),i}retrieveNextPair(e,t,i){let o=t.length%2==0;this.startFromEven&&(o=!o);let a,l=!0,h=-1;do this.findNextPair(e,t,h),a=this.parseFoundFinderPattern(e,i,o),a==null?h=P.getNextSecondBar(e,this.startEnd[0]):l=!1;while(l);let u=this.decodeDataCharacter(e,a,o,!0);if(!this.isEmptyPair(t)&&t[t.length-1].mustBeLast())throw new M;let g;try{g=this.decodeDataCharacter(e,a,o,!1)}catch(x){g=null,this.verbose&&console.log(x)}return new ln(u,g,a,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,t,i){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let a=e.getSize(),l;i>=0?l=i:this.isEmptyPair(t)?l=0:l=t[t.length-1].getFinderPattern().getStartEnd()[1];let h=t.length%2!=0;this.startFromEven&&(h=!h);let u=!1;for(;l<a&&(u=!e.get(l),!!u);)l++;let g=0,x=l;for(let m=l;m<a;m++)if(e.get(m)!=u)o[g]++;else{if(g==3){if(h&&P.reverseCounters(o),P.isFinderPattern(o)){this.startEnd[0]=x,this.startEnd[1]=m;return}h&&P.reverseCounters(o),x+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,g--}else g++;o[g]=1,u=!u}throw new M}static reverseCounters(e){let t=e.length;for(let i=0;i<t/2;++i){let o=e[i];e[i]=e[t-i-1],e[t-i-1]=o}}parseFoundFinderPattern(e,t,i){let o,a,l;if(i){let g=this.startEnd[0]-1;for(;g>=0&&!e.get(g);)g--;g++,o=this.startEnd[0]-g,a=g,l=this.startEnd[1]}else a=this.startEnd[0],l=e.getNextUnset(this.startEnd[1]+1),o=l-this.startEnd[1];let h=this.getDecodeFinderCounters();te.arraycopy(h,0,h,1,h.length-1),h[0]=o;let u;try{u=this.parseFinderValue(h,P.FINDER_PATTERNS)}catch{return null}return new Ai(u,[a,l],a,l,t)}decodeDataCharacter(e,t,i,o){let a=this.getDataCharacterCounters();for(let Te=0;Te<a.length;Te++)a[Te]=0;if(o)P.recordPatternInReverse(e,t.getStartEnd()[0],a);else{P.recordPattern(e,t.getStartEnd()[1],a);for(let Te=0,tt=a.length-1;Te<tt;Te++,tt--){let _t=a[Te];a[Te]=a[tt],a[tt]=_t}}let l=17,h=xe.sum(new Int32Array(a))/l,u=(t.getStartEnd()[1]-t.getStartEnd()[0])/15;if(Math.abs(h-u)/u>.3)throw new M;let g=this.getOddCounts(),x=this.getEvenCounts(),m=this.getOddRoundingErrors(),A=this.getEvenRoundingErrors();for(let Te=0;Te<a.length;Te++){let tt=1*a[Te]/h,_t=tt+.5;if(_t<1){if(tt<.3)throw new M;_t=1}else if(_t>8){if(tt>8.7)throw new M;_t=8}let Jn=Te/2;(Te&1)==0?(g[Jn]=_t,m[Jn]=tt-_t):(x[Jn]=_t,A[Jn]=tt-_t)}this.adjustOddEvenCounts(l);let I=4*t.getValue()+(i?0:2)+(o?0:1)-1,b=0,T=0;for(let Te=g.length-1;Te>=0;Te--){if(P.isNotA1left(t,i,o)){let tt=P.WEIGHTS[I][2*Te];T+=g[Te]*tt}b+=g[Te]}let v=0;for(let Te=x.length-1;Te>=0;Te--)if(P.isNotA1left(t,i,o)){let tt=P.WEIGHTS[I][2*Te+1];v+=x[Te]*tt}let D=T+v;if((b&1)!=0||b>13||b<4)throw new M;let F=(13-b)/2,U=P.SYMBOL_WIDEST[F],B=9-U,he=Vt.getRSSvalue(g,U,!0),oe=Vt.getRSSvalue(x,B,!1),It=P.EVEN_TOTAL_SUBSET[F],Lt=P.GSUM[F],yt=he*It+oe+Lt;return new jn(yt,D)}static isNotA1left(e,t,i){return!(e.getValue()==0&&t&&i)}adjustOddEvenCounts(e){let t=xe.sum(new Int32Array(this.getOddCounts())),i=xe.sum(new Int32Array(this.getEvenCounts())),o=!1,a=!1;t>13?a=!0:t<4&&(o=!0);let l=!1,h=!1;i>13?h=!0:i<4&&(l=!0);let u=t+i-e,g=(t&1)==1,x=(i&1)==0;if(u==1)if(g){if(x)throw new M;a=!0}else{if(!x)throw new M;h=!0}else if(u==-1)if(g){if(x)throw new M;o=!0}else{if(!x)throw new M;l=!0}else if(u==0){if(g){if(!x)throw new M;t<i?(o=!0,h=!0):(a=!0,l=!0)}else if(x)throw new M}else throw new M;if(o){if(a)throw new M;P.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&P.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(h)throw new M;P.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&P.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}P.SYMBOL_WIDEST=[7,5,4,3,1],P.EVEN_TOTAL_SUBSET=[4,20,52,104,204],P.GSUM=[0,348,1388,2948,3988],P.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],P.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],P.FINDER_PAT_A=0,P.FINDER_PAT_B=1,P.FINDER_PAT_C=2,P.FINDER_PAT_D=3,P.FINDER_PAT_E=4,P.FINDER_PAT_F=5,P.FINDER_PATTERN_SEQUENCES=[[P.FINDER_PAT_A,P.FINDER_PAT_A],[P.FINDER_PAT_A,P.FINDER_PAT_B,P.FINDER_PAT_B],[P.FINDER_PAT_A,P.FINDER_PAT_C,P.FINDER_PAT_B,P.FINDER_PAT_D],[P.FINDER_PAT_A,P.FINDER_PAT_E,P.FINDER_PAT_B,P.FINDER_PAT_D,P.FINDER_PAT_C],[P.FINDER_PAT_A,P.FINDER_PAT_E,P.FINDER_PAT_B,P.FINDER_PAT_D,P.FINDER_PAT_D,P.FINDER_PAT_F],[P.FINDER_PAT_A,P.FINDER_PAT_E,P.FINDER_PAT_B,P.FINDER_PAT_D,P.FINDER_PAT_E,P.FINDER_PAT_F,P.FINDER_PAT_F],[P.FINDER_PAT_A,P.FINDER_PAT_A,P.FINDER_PAT_B,P.FINDER_PAT_B,P.FINDER_PAT_C,P.FINDER_PAT_C,P.FINDER_PAT_D,P.FINDER_PAT_D],[P.FINDER_PAT_A,P.FINDER_PAT_A,P.FINDER_PAT_B,P.FINDER_PAT_B,P.FINDER_PAT_C,P.FINDER_PAT_C,P.FINDER_PAT_D,P.FINDER_PAT_E,P.FINDER_PAT_E],[P.FINDER_PAT_A,P.FINDER_PAT_A,P.FINDER_PAT_B,P.FINDER_PAT_B,P.FINDER_PAT_C,P.FINDER_PAT_C,P.FINDER_PAT_D,P.FINDER_PAT_E,P.FINDER_PAT_F,P.FINDER_PAT_F],[P.FINDER_PAT_A,P.FINDER_PAT_A,P.FINDER_PAT_B,P.FINDER_PAT_B,P.FINDER_PAT_C,P.FINDER_PAT_D,P.FINDER_PAT_D,P.FINDER_PAT_E,P.FINDER_PAT_E,P.FINDER_PAT_F,P.FINDER_PAT_F]],P.MAX_PAIRS=11;class jh extends jn{constructor(e,t,i){super(e,t),this.count=0,this.finderPattern=i}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Be extends st{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,t,i){const o=this.decodePair(t,!1,e,i);Be.addOrTally(this.possibleLeftPairs,o),t.reverse();let a=this.decodePair(t,!0,e,i);Be.addOrTally(this.possibleRightPairs,a),t.reverse();for(let l of this.possibleLeftPairs)if(l.getCount()>1){for(let h of this.possibleRightPairs)if(h.getCount()>1&&Be.checkChecksum(l,h))return Be.constructResult(l,h)}throw new M}static addOrTally(e,t){if(t==null)return;let i=!1;for(let o of e)if(o.getValue()===t.getValue()){o.incrementCount(),i=!0;break}i||e.push(t)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,t){let i=4537077*e.getValue()+t.getValue(),o=new String(i).toString(),a=new Ie;for(let g=13-o.length;g>0;g--)a.append("0");a.append(o);let l=0;for(let g=0;g<13;g++){let x=a.charAt(g).charCodeAt(0)-"0".charCodeAt(0);l+=(g&1)===0?3*x:x}l=10-l%10,l===10&&(l=0),a.append(l.toString());let h=e.getFinderPattern().getResultPoints(),u=t.getFinderPattern().getResultPoints();return new ft(a.toString(),null,0,[h[0],h[1],u[0],u[1]],q.RSS_14,new Date().getTime())}static checkChecksum(e,t){let i=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,o=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,i===o}decodePair(e,t,i,o){try{let a=this.findFinderPattern(e,t),l=this.parseFoundFinderPattern(e,i,t,a),h=o==null?null:o.get(ne.NEED_RESULT_POINT_CALLBACK);if(h!=null){let x=(a[0]+a[1])/2;t&&(x=e.getSize()-1-x),h.foundPossibleResultPoint(new X(x,i))}let u=this.decodeDataCharacter(e,l,!0),g=this.decodeDataCharacter(e,l,!1);return new jh(1597*u.getValue()+g.getValue(),u.getChecksumPortion()+4*g.getChecksumPortion(),l)}catch{return null}}decodeDataCharacter(e,t,i){let o=this.getDataCharacterCounters();for(let v=0;v<o.length;v++)o[v]=0;if(i)He.recordPatternInReverse(e,t.getStartEnd()[0],o);else{He.recordPattern(e,t.getStartEnd()[1]+1,o);for(let v=0,D=o.length-1;v<D;v++,D--){let F=o[v];o[v]=o[D],o[D]=F}}let a=i?16:15,l=xe.sum(new Int32Array(o))/a,h=this.getOddCounts(),u=this.getEvenCounts(),g=this.getOddRoundingErrors(),x=this.getEvenRoundingErrors();for(let v=0;v<o.length;v++){let D=o[v]/l,F=Math.floor(D+.5);F<1?F=1:F>8&&(F=8);let U=Math.floor(v/2);(v&1)===0?(h[U]=F,g[U]=D-F):(u[U]=F,x[U]=D-F)}this.adjustOddEvenCounts(i,a);let m=0,A=0;for(let v=h.length-1;v>=0;v--)A*=9,A+=h[v],m+=h[v];let I=0,b=0;for(let v=u.length-1;v>=0;v--)I*=9,I+=u[v],b+=u[v];let T=A+3*I;if(i){if((m&1)!==0||m>12||m<4)throw new M;let v=(12-m)/2,D=Be.OUTSIDE_ODD_WIDEST[v],F=9-D,U=Vt.getRSSvalue(h,D,!1),B=Vt.getRSSvalue(u,F,!0),he=Be.OUTSIDE_EVEN_TOTAL_SUBSET[v],oe=Be.OUTSIDE_GSUM[v];return new jn(U*he+B+oe,T)}else{if((b&1)!==0||b>10||b<4)throw new M;let v=(10-b)/2,D=Be.INSIDE_ODD_WIDEST[v],F=9-D,U=Vt.getRSSvalue(h,D,!0),B=Vt.getRSSvalue(u,F,!1),he=Be.INSIDE_ODD_TOTAL_SUBSET[v],oe=Be.INSIDE_GSUM[v];return new jn(B*he+U+oe,T)}}findFinderPattern(e,t){let i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;let o=e.getSize(),a=!1,l=0;for(;l<o&&(a=!e.get(l),t!==a);)l++;let h=0,u=l;for(let g=l;g<o;g++)if(e.get(g)!==a)i[h]++;else{if(h===3){if(st.isFinderPattern(i))return[u,g];u+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,h--}else h++;i[h]=1,a=!a}throw new M}parseFoundFinderPattern(e,t,i,o){let a=e.get(o[0]),l=o[0]-1;for(;l>=0&&a!==e.get(l);)l--;l++;const h=o[0]-l,u=this.getDecodeFinderCounters(),g=new Int32Array(u.length);te.arraycopy(u,0,g,1,u.length-1),g[0]=h;const x=this.parseFinderValue(g,Be.FINDER_PATTERNS);let m=l,A=o[1];return i&&(m=e.getSize()-1-m,A=e.getSize()-1-A),new Ai(x,[l,o[1]],m,A,t)}adjustOddEvenCounts(e,t){let i=xe.sum(new Int32Array(this.getOddCounts())),o=xe.sum(new Int32Array(this.getEvenCounts())),a=!1,l=!1,h=!1,u=!1;e?(i>12?l=!0:i<4&&(a=!0),o>12?u=!0:o<4&&(h=!0)):(i>11?l=!0:i<5&&(a=!0),o>10?u=!0:o<4&&(h=!0));let g=i+o-t,x=(i&1)===(e?1:0),m=(o&1)===1;if(g===1)if(x){if(m)throw new M;l=!0}else{if(!m)throw new M;u=!0}else if(g===-1)if(x){if(m)throw new M;a=!0}else{if(!m)throw new M;h=!0}else if(g===0){if(x){if(!m)throw new M;i<o?(a=!0,u=!0):(l=!0,h=!0)}else if(m)throw new M}else throw new M;if(a){if(l)throw new M;st.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&st.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(u)throw new M;st.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&st.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Be.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Be.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Be.OUTSIDE_GSUM=[0,161,961,2015,2715],Be.INSIDE_GSUM=[0,336,1036,1516],Be.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Be.INSIDE_ODD_WIDEST=[2,4,6,8],Be.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Kn extends He{constructor(e,t){super(),this.readers=[],this.verbose=t===!0;const i=e?e.get(ne.POSSIBLE_FORMATS):null,o=e&&e.get(ne.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;i?((i.includes(q.EAN_13)||i.includes(q.UPC_A)||i.includes(q.EAN_8)||i.includes(q.UPC_E))&&this.readers.push(new Ts(e)),i.includes(q.CODE_39)&&this.readers.push(new Ge(o)),i.includes(q.CODE_128)&&this.readers.push(new V),i.includes(q.ITF)&&this.readers.push(new _e),i.includes(q.RSS_14)&&this.readers.push(new Be),i.includes(q.RSS_EXPANDED)&&this.readers.push(new P(this.verbose))):(this.readers.push(new Ts(e)),this.readers.push(new Ge),this.readers.push(new Ts(e)),this.readers.push(new V),this.readers.push(new _e),this.readers.push(new Be),this.readers.push(new P(this.verbose)))}decodeRow(e,t,i){for(let o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(e,t,i)}catch{}throw new M}reset(){this.readers.forEach(e=>e.reset())}}class zh extends bn{constructor(e=500,t){super(new Kn(t),e,t)}}class Ae{constructor(e,t,i){this.ecCodewords=e,this.ecBlocks=[t],i&&this.ecBlocks.push(i)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ee{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ue{constructor(e,t,i,o,a,l){this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=i,this.dataRegionSizeRows=o,this.dataRegionSizeColumns=a,this.ecBlocks=l;let h=0;const u=l.getECCodewords(),g=l.getECBlocks();for(let x of g)h+=x.getCount()*(x.getDataCodewords()+u);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,t){if((e&1)!==0||(t&1)!==0)throw new k;for(let i of ue.VERSIONS)if(i.symbolSizeRows===e&&i.symbolSizeColumns===t)return i;throw new k}toString(){return""+this.versionNumber}static buildVersions(){return[new ue(1,10,10,8,8,new Ae(5,new Ee(1,3))),new ue(2,12,12,10,10,new Ae(7,new Ee(1,5))),new ue(3,14,14,12,12,new Ae(10,new Ee(1,8))),new ue(4,16,16,14,14,new Ae(12,new Ee(1,12))),new ue(5,18,18,16,16,new Ae(14,new Ee(1,18))),new ue(6,20,20,18,18,new Ae(18,new Ee(1,22))),new ue(7,22,22,20,20,new Ae(20,new Ee(1,30))),new ue(8,24,24,22,22,new Ae(24,new Ee(1,36))),new ue(9,26,26,24,24,new Ae(28,new Ee(1,44))),new ue(10,32,32,14,14,new Ae(36,new Ee(1,62))),new ue(11,36,36,16,16,new Ae(42,new Ee(1,86))),new ue(12,40,40,18,18,new Ae(48,new Ee(1,114))),new ue(13,44,44,20,20,new Ae(56,new Ee(1,144))),new ue(14,48,48,22,22,new Ae(68,new Ee(1,174))),new ue(15,52,52,24,24,new Ae(42,new Ee(2,102))),new ue(16,64,64,14,14,new Ae(56,new Ee(2,140))),new ue(17,72,72,16,16,new Ae(36,new Ee(4,92))),new ue(18,80,80,18,18,new Ae(48,new Ee(4,114))),new ue(19,88,88,20,20,new Ae(56,new Ee(4,144))),new ue(20,96,96,22,22,new Ae(68,new Ee(4,174))),new ue(21,104,104,24,24,new Ae(56,new Ee(6,136))),new ue(22,120,120,18,18,new Ae(68,new Ee(6,175))),new ue(23,132,132,20,20,new Ae(62,new Ee(8,163))),new ue(24,144,144,22,22,new Ae(62,new Ee(8,156),new Ee(2,155))),new ue(25,8,18,6,16,new Ae(7,new Ee(1,5))),new ue(26,8,32,6,14,new Ae(11,new Ee(1,10))),new ue(27,12,26,10,24,new Ae(14,new Ee(1,16))),new ue(28,12,36,10,16,new Ae(18,new Ee(1,22))),new ue(29,16,36,14,16,new Ae(24,new Ee(1,32))),new ue(30,16,48,14,22,new Ae(28,new Ee(1,49)))]}}ue.VERSIONS=ue.buildVersions();class Rs{constructor(e){const t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new k;this.version=Rs.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new je(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const t=e.getHeight(),i=e.getWidth();return ue.getVersionForDimensions(t,i)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let t=0,i=4,o=0;const a=this.mappingBitMatrix.getHeight(),l=this.mappingBitMatrix.getWidth();let h=!1,u=!1,g=!1,x=!1;do if(i===a&&o===0&&!h)e[t++]=this.readCorner1(a,l)&255,i-=2,o+=2,h=!0;else if(i===a-2&&o===0&&(l&3)!==0&&!u)e[t++]=this.readCorner2(a,l)&255,i-=2,o+=2,u=!0;else if(i===a+4&&o===2&&(l&7)===0&&!g)e[t++]=this.readCorner3(a,l)&255,i-=2,o+=2,g=!0;else if(i===a-2&&o===0&&(l&7)===4&&!x)e[t++]=this.readCorner4(a,l)&255,i-=2,o+=2,x=!0;else{do i<a&&o>=0&&!this.readMappingMatrix.get(o,i)&&(e[t++]=this.readUtah(i,o,a,l)&255),i-=2,o+=2;while(i>=0&&o<l);i+=1,o+=3;do i>=0&&o<l&&!this.readMappingMatrix.get(o,i)&&(e[t++]=this.readUtah(i,o,a,l)&255),i+=2,o-=2;while(i<a&&o>=0);i+=3,o+=1}while(i<a||o<l);if(t!==this.version.getTotalCodewords())throw new k;return e}readModule(e,t,i,o){return e<0&&(e+=i,t+=4-(i+4&7)),t<0&&(t+=o,e+=4-(o+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)}readUtah(e,t,i,o){let a=0;return this.readModule(e-2,t-2,i,o)&&(a|=1),a<<=1,this.readModule(e-2,t-1,i,o)&&(a|=1),a<<=1,this.readModule(e-1,t-2,i,o)&&(a|=1),a<<=1,this.readModule(e-1,t-1,i,o)&&(a|=1),a<<=1,this.readModule(e-1,t,i,o)&&(a|=1),a<<=1,this.readModule(e,t-2,i,o)&&(a|=1),a<<=1,this.readModule(e,t-1,i,o)&&(a|=1),a<<=1,this.readModule(e,t,i,o)&&(a|=1),a}readCorner1(e,t){let i=0;return this.readModule(e-1,0,e,t)&&(i|=1),i<<=1,this.readModule(e-1,1,e,t)&&(i|=1),i<<=1,this.readModule(e-1,2,e,t)&&(i|=1),i<<=1,this.readModule(0,t-2,e,t)&&(i|=1),i<<=1,this.readModule(0,t-1,e,t)&&(i|=1),i<<=1,this.readModule(1,t-1,e,t)&&(i|=1),i<<=1,this.readModule(2,t-1,e,t)&&(i|=1),i<<=1,this.readModule(3,t-1,e,t)&&(i|=1),i}readCorner2(e,t){let i=0;return this.readModule(e-3,0,e,t)&&(i|=1),i<<=1,this.readModule(e-2,0,e,t)&&(i|=1),i<<=1,this.readModule(e-1,0,e,t)&&(i|=1),i<<=1,this.readModule(0,t-4,e,t)&&(i|=1),i<<=1,this.readModule(0,t-3,e,t)&&(i|=1),i<<=1,this.readModule(0,t-2,e,t)&&(i|=1),i<<=1,this.readModule(0,t-1,e,t)&&(i|=1),i<<=1,this.readModule(1,t-1,e,t)&&(i|=1),i}readCorner3(e,t){let i=0;return this.readModule(e-1,0,e,t)&&(i|=1),i<<=1,this.readModule(e-1,t-1,e,t)&&(i|=1),i<<=1,this.readModule(0,t-3,e,t)&&(i|=1),i<<=1,this.readModule(0,t-2,e,t)&&(i|=1),i<<=1,this.readModule(0,t-1,e,t)&&(i|=1),i<<=1,this.readModule(1,t-3,e,t)&&(i|=1),i<<=1,this.readModule(1,t-2,e,t)&&(i|=1),i<<=1,this.readModule(1,t-1,e,t)&&(i|=1),i}readCorner4(e,t){let i=0;return this.readModule(e-3,0,e,t)&&(i|=1),i<<=1,this.readModule(e-2,0,e,t)&&(i|=1),i<<=1,this.readModule(e-1,0,e,t)&&(i|=1),i<<=1,this.readModule(0,t-2,e,t)&&(i|=1),i<<=1,this.readModule(0,t-1,e,t)&&(i|=1),i<<=1,this.readModule(1,t-1,e,t)&&(i|=1),i<<=1,this.readModule(2,t-1,e,t)&&(i|=1),i<<=1,this.readModule(3,t-1,e,t)&&(i|=1),i}extractDataRegion(e){const t=this.version.getSymbolSizeRows(),i=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new N("Dimension of bitMatrix must match the version size");const o=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),l=t/o|0,h=i/a|0,u=l*o,g=h*a,x=new je(g,u);for(let m=0;m<l;++m){const A=m*o;for(let I=0;I<h;++I){const b=I*a;for(let T=0;T<o;++T){const v=m*(o+2)+1+T,D=A+T;for(let F=0;F<a;++F){const U=I*(a+2)+1+F;if(e.get(U,v)){const B=b+F;x.set(B,D)}}}}}return x}}class Os{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t){const i=t.getECBlocks();let o=0;const a=i.getECBlocks();for(let T of a)o+=T.getCount();const l=new Array(o);let h=0;for(let T of a)for(let v=0;v<T.getCount();v++){const D=T.getDataCodewords(),F=i.getECCodewords()+D;l[h++]=new Os(D,new Uint8Array(F))}const g=l[0].codewords.length-i.getECCodewords(),x=g-1;let m=0;for(let T=0;T<x;T++)for(let v=0;v<h;v++)l[v].codewords[T]=e[m++];const A=t.getVersionNumber()===24,I=A?8:h;for(let T=0;T<I;T++)l[T].codewords[g-1]=e[m++];const b=l[0].codewords.length;for(let T=g;T<b;T++)for(let v=0;v<h;v++){const D=A?(v+8)%h:v,F=A&&D>7?T-1:T;l[D].codewords[F]=e[m++]}if(m!==e.length)throw new N;return l}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ds{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new N(""+e);let t=0,i=this.bitOffset,o=this.byteOffset;const a=this.bytes;if(i>0){const l=8-i,h=e<l?e:l,u=l-h,g=255>>8-h<<u;t=(a[o]&g)>>u,e-=h,i+=h,i===8&&(i=0,o++)}if(e>0){for(;e>=8;)t=t<<8|a[o]&255,o++,e-=8;if(e>0){const l=8-e,h=255>>l<<l;t=t<<e|(a[o]&h)>>l,i+=e}}return this.bitOffset=i,this.byteOffset=o,t}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var We;(function(p){p[p.PAD_ENCODE=0]="PAD_ENCODE",p[p.ASCII_ENCODE=1]="ASCII_ENCODE",p[p.C40_ENCODE=2]="C40_ENCODE",p[p.TEXT_ENCODE=3]="TEXT_ENCODE",p[p.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",p[p.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",p[p.BASE256_ENCODE=6]="BASE256_ENCODE"})(We||(We={}));class cn{static decode(e){const t=new Ds(e),i=new Ie,o=new Ie,a=new Array;let l=We.ASCII_ENCODE;do if(l===We.ASCII_ENCODE)l=this.decodeAsciiSegment(t,i,o);else{switch(l){case We.C40_ENCODE:this.decodeC40Segment(t,i);break;case We.TEXT_ENCODE:this.decodeTextSegment(t,i);break;case We.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,i);break;case We.EDIFACT_ENCODE:this.decodeEdifactSegment(t,i);break;case We.BASE256_ENCODE:this.decodeBase256Segment(t,i,a);break;default:throw new k}l=We.ASCII_ENCODE}while(l!==We.PAD_ENCODE&&t.available()>0);return o.length()>0&&i.append(o.toString()),new wr(e,i.toString(),a.length===0?null:a,null)}static decodeAsciiSegment(e,t,i){let o=!1;do{let a=e.readBits(8);if(a===0)throw new k;if(a<=128)return o&&(a+=128),t.append(String.fromCharCode(a-1)),We.ASCII_ENCODE;if(a===129)return We.PAD_ENCODE;if(a<=229){const l=a-130;l<10&&t.append("0"),t.append(""+l)}else switch(a){case 230:return We.C40_ENCODE;case 231:return We.BASE256_ENCODE;case 232:t.append(String.fromCharCode(29));break;case 233:case 234:break;case 235:o=!0;break;case 236:t.append("[)>05"),i.insert(0,"");break;case 237:t.append("[)>06"),i.insert(0,"");break;case 238:return We.ANSIX12_ENCODE;case 239:return We.TEXT_ENCODE;case 240:return We.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new k;break}}while(e.available()>0);return We.ASCII_ENCODE}static decodeC40Segment(e,t){let i=!1;const o=[];let a=0;do{if(e.available()===8)return;const l=e.readBits(8);if(l===254)return;this.parseTwoBytes(l,e.readBits(8),o);for(let h=0;h<3;h++){const u=o[h];switch(a){case 0:if(u<3)a=u+1;else if(u<this.C40_BASIC_SET_CHARS.length){const g=this.C40_BASIC_SET_CHARS[u];i?(t.append(String.fromCharCode(g.charCodeAt(0)+128)),i=!1):t.append(g)}else throw new k;break;case 1:i?(t.append(String.fromCharCode(u+128)),i=!1):t.append(String.fromCharCode(u)),a=0;break;case 2:if(u<this.C40_SHIFT2_SET_CHARS.length){const g=this.C40_SHIFT2_SET_CHARS[u];i?(t.append(String.fromCharCode(g.charCodeAt(0)+128)),i=!1):t.append(g)}else switch(u){case 27:t.append(String.fromCharCode(29));break;case 30:i=!0;break;default:throw new k}a=0;break;case 3:i?(t.append(String.fromCharCode(u+224)),i=!1):t.append(String.fromCharCode(u+96)),a=0;break;default:throw new k}}}while(e.available()>0)}static decodeTextSegment(e,t){let i=!1,o=[],a=0;do{if(e.available()===8)return;const l=e.readBits(8);if(l===254)return;this.parseTwoBytes(l,e.readBits(8),o);for(let h=0;h<3;h++){const u=o[h];switch(a){case 0:if(u<3)a=u+1;else if(u<this.TEXT_BASIC_SET_CHARS.length){const g=this.TEXT_BASIC_SET_CHARS[u];i?(t.append(String.fromCharCode(g.charCodeAt(0)+128)),i=!1):t.append(g)}else throw new k;break;case 1:i?(t.append(String.fromCharCode(u+128)),i=!1):t.append(String.fromCharCode(u)),a=0;break;case 2:if(u<this.TEXT_SHIFT2_SET_CHARS.length){const g=this.TEXT_SHIFT2_SET_CHARS[u];i?(t.append(String.fromCharCode(g.charCodeAt(0)+128)),i=!1):t.append(g)}else switch(u){case 27:t.append(String.fromCharCode(29));break;case 30:i=!0;break;default:throw new k}a=0;break;case 3:if(u<this.TEXT_SHIFT3_SET_CHARS.length){const g=this.TEXT_SHIFT3_SET_CHARS[u];i?(t.append(String.fromCharCode(g.charCodeAt(0)+128)),i=!1):t.append(g),a=0}else throw new k;break;default:throw new k}}}while(e.available()>0)}static decodeAnsiX12Segment(e,t){const i=[];do{if(e.available()===8)return;const o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(let a=0;a<3;a++){const l=i[a];switch(l){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(l<14)t.append(String.fromCharCode(l+44));else if(l<40)t.append(String.fromCharCode(l+51));else throw new k;break}}}while(e.available()>0)}static parseTwoBytes(e,t,i){let o=(e<<8)+t-1,a=Math.floor(o/1600);i[0]=a,o-=a*1600,a=Math.floor(o/40),i[1]=a,i[2]=o-a*40}static decodeEdifactSegment(e,t){do{if(e.available()<=16)return;for(let i=0;i<4;i++){let o=e.readBits(6);if(o===31){const a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(o&32)===0&&(o|=64),t.append(String.fromCharCode(o))}}while(e.available()>0)}static decodeBase256Segment(e,t,i){let o=1+e.getByteOffset();const a=this.unrandomize255State(e.readBits(8),o++);let l;if(a===0?l=e.available()/8|0:a<250?l=a:l=250*(a-249)+this.unrandomize255State(e.readBits(8),o++),l<0)throw new k;const h=new Uint8Array(l);for(let u=0;u<l;u++){if(e.available()<8)throw new k;h[u]=this.unrandomize255State(e.readBits(8),o++)}i.push(h);try{t.append(mt.decode(h,ie.ISO88591))}catch(u){throw new Ut("Platform does not support required encoding: "+u.message)}}static unrandomize255State(e,t){const i=149*t%255+1,o=e-i;return o>=0?o:o+256}}cn.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],cn.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],cn.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],cn.TEXT_SHIFT2_SET_CHARS=cn.C40_SHIFT2_SET_CHARS,cn.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class Yh{constructor(){this.rsDecoder=new Ar(me.DATA_MATRIX_FIELD_256)}decode(e){const t=new Rs(e),i=t.getVersion(),o=t.readCodewords(),a=Os.getDataBlocks(o,i);let l=0;for(let g of a)l+=g.getNumDataCodewords();const h=new Uint8Array(l),u=a.length;for(let g=0;g<u;g++){const x=a[g],m=x.getCodewords(),A=x.getNumDataCodewords();this.correctErrors(m,A);for(let I=0;I<A;I++)h[I*u+g]=m[I]}return cn.decode(h)}correctErrors(e,t){const i=new Int32Array(e);try{this.rsDecoder.decode(i,e.length-t)}catch{throw new W}for(let o=0;o<t;o++)e[o]=i[o]}}class Ue{constructor(e){this.image=e,this.rectangleDetector=new Zt(this.image)}detect(){const e=this.rectangleDetector.detect();let t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new M;t=this.shiftToModuleCenter(t);const i=t[0],o=t[1],a=t[2],l=t[3];let h=this.transitionsBetween(i,l)+1,u=this.transitionsBetween(a,l)+1;(h&1)===1&&(h+=1),(u&1)===1&&(u+=1),4*h<7*u&&4*u<7*h&&(h=u=Math.max(h,u));let g=Ue.sampleGrid(this.image,i,o,a,l,h,u);return new wi(g,[i,o,a,l])}static shiftPoint(e,t,i){let o=(t.getX()-e.getX())/(i+1),a=(t.getY()-e.getY())/(i+1);return new X(e.getX()+o,e.getY()+a)}static moveAway(e,t,i){let o=e.getX(),a=e.getY();return o<t?o-=1:o+=1,a<i?a-=1:a+=1,new X(o,a)}detectSolid1(e){let t=e[0],i=e[1],o=e[3],a=e[2],l=this.transitionsBetween(t,i),h=this.transitionsBetween(i,o),u=this.transitionsBetween(o,a),g=this.transitionsBetween(a,t),x=l,m=[a,t,i,o];return x>h&&(x=h,m[0]=t,m[1]=i,m[2]=o,m[3]=a),x>u&&(x=u,m[0]=i,m[1]=o,m[2]=a,m[3]=t),x>g&&(m[0]=o,m[1]=a,m[2]=t,m[3]=i),m}detectSolid2(e){let t=e[0],i=e[1],o=e[2],a=e[3],l=this.transitionsBetween(t,a),h=Ue.shiftPoint(i,o,(l+1)*4),u=Ue.shiftPoint(o,i,(l+1)*4),g=this.transitionsBetween(h,t),x=this.transitionsBetween(u,a);return g<x?(e[0]=t,e[1]=i,e[2]=o,e[3]=a):(e[0]=i,e[1]=o,e[2]=a,e[3]=t),e}correctTopRight(e){let t=e[0],i=e[1],o=e[2],a=e[3],l=this.transitionsBetween(t,a),h=this.transitionsBetween(i,a),u=Ue.shiftPoint(t,i,(h+1)*4),g=Ue.shiftPoint(o,i,(l+1)*4);l=this.transitionsBetween(u,a),h=this.transitionsBetween(g,a);let x=new X(a.getX()+(o.getX()-i.getX())/(l+1),a.getY()+(o.getY()-i.getY())/(l+1)),m=new X(a.getX()+(t.getX()-i.getX())/(h+1),a.getY()+(t.getY()-i.getY())/(h+1));if(!this.isValid(x))return this.isValid(m)?m:null;if(!this.isValid(m))return x;let A=this.transitionsBetween(u,x)+this.transitionsBetween(g,x),I=this.transitionsBetween(u,m)+this.transitionsBetween(g,m);return A>I?x:m}shiftToModuleCenter(e){let t=e[0],i=e[1],o=e[2],a=e[3],l=this.transitionsBetween(t,a)+1,h=this.transitionsBetween(o,a)+1,u=Ue.shiftPoint(t,i,h*4),g=Ue.shiftPoint(o,i,l*4);l=this.transitionsBetween(u,a)+1,h=this.transitionsBetween(g,a)+1,(l&1)===1&&(l+=1),(h&1)===1&&(h+=1);let x=(t.getX()+i.getX()+o.getX()+a.getX())/4,m=(t.getY()+i.getY()+o.getY()+a.getY())/4;t=Ue.moveAway(t,x,m),i=Ue.moveAway(i,x,m),o=Ue.moveAway(o,x,m),a=Ue.moveAway(a,x,m);let A,I;return u=Ue.shiftPoint(t,i,h*4),u=Ue.shiftPoint(u,a,l*4),A=Ue.shiftPoint(i,t,h*4),A=Ue.shiftPoint(A,o,l*4),g=Ue.shiftPoint(o,a,h*4),g=Ue.shiftPoint(g,i,l*4),I=Ue.shiftPoint(a,o,h*4),I=Ue.shiftPoint(I,t,l*4),[u,A,g,I]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,t,i,o,a,l,h){return an.getInstance().sampleGrid(e,l,h,.5,.5,l-.5,.5,l-.5,h-.5,.5,h-.5,t.getX(),t.getY(),a.getX(),a.getY(),o.getX(),o.getY(),i.getX(),i.getY())}transitionsBetween(e,t){let i=Math.trunc(e.getX()),o=Math.trunc(e.getY()),a=Math.trunc(t.getX()),l=Math.trunc(t.getY()),h=Math.abs(l-o)>Math.abs(a-i);if(h){let T=i;i=o,o=T,T=a,a=l,l=T}let u=Math.abs(a-i),g=Math.abs(l-o),x=-u/2,m=o<l?1:-1,A=i<a?1:-1,I=0,b=this.image.get(h?o:i,h?i:o);for(let T=i,v=o;T!==a;T+=A){let D=this.image.get(h?v:T,h?T:v);if(D!==b&&(I++,b=D),x+=g,x>0){if(v===l)break;v+=m,x-=u}}return I}}class hn{constructor(){this.decoder=new Yh}decode(e,t=null){let i,o;if(t!=null&&t.has(ne.PURE_BARCODE)){const g=hn.extractPureBits(e.getBlackMatrix());i=this.decoder.decode(g),o=hn.NO_POINTS}else{const g=new Ue(e.getBlackMatrix()).detect();i=this.decoder.decode(g.getBits()),o=g.getPoints()}const a=i.getRawBytes(),l=new ft(i.getText(),a,8*a.length,o,q.DATA_MATRIX,te.currentTimeMillis()),h=i.getByteSegments();h!=null&&l.putMetadata(Ye.BYTE_SEGMENTS,h);const u=i.getECLevel();return u!=null&&l.putMetadata(Ye.ERROR_CORRECTION_LEVEL,u),l}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),i=e.getBottomRightOnBit();if(t==null||i==null)throw new M;const o=this.moduleSize(t,e);let a=t[1];const l=i[1];let h=t[0];const g=(i[0]-h+1)/o,x=(l-a+1)/o;if(g<=0||x<=0)throw new M;const m=o/2;a+=m,h+=m;const A=new je(g,x);for(let I=0;I<x;I++){const b=a+I*o;for(let T=0;T<g;T++)e.get(h+T*o,b)&&A.set(T,I)}return A}static moduleSize(e,t){const i=t.getWidth();let o=e[0];const a=e[1];for(;o<i&&t.get(o,a);)o++;if(o===i)throw new M;const l=o-e[0];if(l===0)throw new M;return l}}hn.NO_POINTS=[];class Kh extends bn{constructor(e=500){super(new hn,e)}}var Zn;(function(p){p[p.L=0]="L",p[p.M=1]="M",p[p.Q=2]="Q",p[p.H=3]="H"})(Zn||(Zn={}));class Ne{constructor(e,t,i){this.value=e,this.stringValue=t,this.bits=i,Ne.FOR_BITS.set(i,this),Ne.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return Ne.L;case"M":return Ne.M;case"Q":return Ne.Q;case"H":return Ne.H;default:throw new S(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof Ne))return!1;const t=e;return this.value===t.value}static forBits(e){if(e<0||e>=Ne.FOR_BITS.size)throw new N;return Ne.FOR_BITS.get(e)}}Ne.FOR_BITS=new Map,Ne.FOR_VALUE=new Map,Ne.L=new Ne(Zn.L,"L",1),Ne.M=new Ne(Zn.M,"M",0),Ne.Q=new Ne(Zn.Q,"Q",3),Ne.H=new Ne(Zn.H,"H",2);class ot{constructor(e){this.errorCorrectionLevel=Ne.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,t){return K.bitCount(e^t)}static decodeFormatInformation(e,t){const i=ot.doDecodeFormatInformation(e,t);return i!==null?i:ot.doDecodeFormatInformation(e^ot.FORMAT_INFO_MASK_QR,t^ot.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,t){let i=Number.MAX_SAFE_INTEGER,o=0;for(const a of ot.FORMAT_INFO_DECODE_LOOKUP){const l=a[0];if(l===e||l===t)return new ot(a[1]);let h=ot.numBitsDiffering(e,l);h<i&&(o=a[1],i=h),e!==t&&(h=ot.numBitsDiffering(t,l),h<i&&(o=a[1],i=h))}return i<=3?new ot(o):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof ot))return!1;const t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask}}ot.FORMAT_INFO_MASK_QR=21522,ot.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class R{constructor(e,...t){this.ecCodewordsPerBlock=e,this.ecBlocks=t}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const t=this.ecBlocks;for(const i of t)e+=i.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class C{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Y{constructor(e,t,...i){this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=i;let o=0;const a=i[0].getECCodewordsPerBlock(),l=i[0].getECBlocks();for(const h of l)o+=h.getCount()*(h.getDataCodewords()+a);this.totalCodewords=o}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new k;try{return this.getVersionForNumber((e-17)/4)}catch{throw new k}}static getVersionForNumber(e){if(e<1||e>40)throw new N;return Y.VERSIONS[e-1]}static decodeVersionInformation(e){let t=Number.MAX_SAFE_INTEGER,i=0;for(let o=0;o<Y.VERSION_DECODE_INFO.length;o++){const a=Y.VERSION_DECODE_INFO[o];if(a===e)return Y.getVersionForNumber(o+7);const l=ot.numBitsDiffering(e,a);l<t&&(i=o+7,t=l)}return t<=3?Y.getVersionForNumber(i):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),t=new je(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);const i=this.alignmentPatternCenters.length;for(let o=0;o<i;o++){const a=this.alignmentPatternCenters[o]-2;for(let l=0;l<i;l++)o===0&&(l===0||l===i-1)||o===i-1&&l===0||t.setRegion(this.alignmentPatternCenters[l]-2,a,5,5)}return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t}toString(){return""+this.versionNumber}}Y.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Y.VERSIONS=[new Y(1,new Int32Array(0),new R(7,new C(1,19)),new R(10,new C(1,16)),new R(13,new C(1,13)),new R(17,new C(1,9))),new Y(2,Int32Array.from([6,18]),new R(10,new C(1,34)),new R(16,new C(1,28)),new R(22,new C(1,22)),new R(28,new C(1,16))),new Y(3,Int32Array.from([6,22]),new R(15,new C(1,55)),new R(26,new C(1,44)),new R(18,new C(2,17)),new R(22,new C(2,13))),new Y(4,Int32Array.from([6,26]),new R(20,new C(1,80)),new R(18,new C(2,32)),new R(26,new C(2,24)),new R(16,new C(4,9))),new Y(5,Int32Array.from([6,30]),new R(26,new C(1,108)),new R(24,new C(2,43)),new R(18,new C(2,15),new C(2,16)),new R(22,new C(2,11),new C(2,12))),new Y(6,Int32Array.from([6,34]),new R(18,new C(2,68)),new R(16,new C(4,27)),new R(24,new C(4,19)),new R(28,new C(4,15))),new Y(7,Int32Array.from([6,22,38]),new R(20,new C(2,78)),new R(18,new C(4,31)),new R(18,new C(2,14),new C(4,15)),new R(26,new C(4,13),new C(1,14))),new Y(8,Int32Array.from([6,24,42]),new R(24,new C(2,97)),new R(22,new C(2,38),new C(2,39)),new R(22,new C(4,18),new C(2,19)),new R(26,new C(4,14),new C(2,15))),new Y(9,Int32Array.from([6,26,46]),new R(30,new C(2,116)),new R(22,new C(3,36),new C(2,37)),new R(20,new C(4,16),new C(4,17)),new R(24,new C(4,12),new C(4,13))),new Y(10,Int32Array.from([6,28,50]),new R(18,new C(2,68),new C(2,69)),new R(26,new C(4,43),new C(1,44)),new R(24,new C(6,19),new C(2,20)),new R(28,new C(6,15),new C(2,16))),new Y(11,Int32Array.from([6,30,54]),new R(20,new C(4,81)),new R(30,new C(1,50),new C(4,51)),new R(28,new C(4,22),new C(4,23)),new R(24,new C(3,12),new C(8,13))),new Y(12,Int32Array.from([6,32,58]),new R(24,new C(2,92),new C(2,93)),new R(22,new C(6,36),new C(2,37)),new R(26,new C(4,20),new C(6,21)),new R(28,new C(7,14),new C(4,15))),new Y(13,Int32Array.from([6,34,62]),new R(26,new C(4,107)),new R(22,new C(8,37),new C(1,38)),new R(24,new C(8,20),new C(4,21)),new R(22,new C(12,11),new C(4,12))),new Y(14,Int32Array.from([6,26,46,66]),new R(30,new C(3,115),new C(1,116)),new R(24,new C(4,40),new C(5,41)),new R(20,new C(11,16),new C(5,17)),new R(24,new C(11,12),new C(5,13))),new Y(15,Int32Array.from([6,26,48,70]),new R(22,new C(5,87),new C(1,88)),new R(24,new C(5,41),new C(5,42)),new R(30,new C(5,24),new C(7,25)),new R(24,new C(11,12),new C(7,13))),new Y(16,Int32Array.from([6,26,50,74]),new R(24,new C(5,98),new C(1,99)),new R(28,new C(7,45),new C(3,46)),new R(24,new C(15,19),new C(2,20)),new R(30,new C(3,15),new C(13,16))),new Y(17,Int32Array.from([6,30,54,78]),new R(28,new C(1,107),new C(5,108)),new R(28,new C(10,46),new C(1,47)),new R(28,new C(1,22),new C(15,23)),new R(28,new C(2,14),new C(17,15))),new Y(18,Int32Array.from([6,30,56,82]),new R(30,new C(5,120),new C(1,121)),new R(26,new C(9,43),new C(4,44)),new R(28,new C(17,22),new C(1,23)),new R(28,new C(2,14),new C(19,15))),new Y(19,Int32Array.from([6,30,58,86]),new R(28,new C(3,113),new C(4,114)),new R(26,new C(3,44),new C(11,45)),new R(26,new C(17,21),new C(4,22)),new R(26,new C(9,13),new C(16,14))),new Y(20,Int32Array.from([6,34,62,90]),new R(28,new C(3,107),new C(5,108)),new R(26,new C(3,41),new C(13,42)),new R(30,new C(15,24),new C(5,25)),new R(28,new C(15,15),new C(10,16))),new Y(21,Int32Array.from([6,28,50,72,94]),new R(28,new C(4,116),new C(4,117)),new R(26,new C(17,42)),new R(28,new C(17,22),new C(6,23)),new R(30,new C(19,16),new C(6,17))),new Y(22,Int32Array.from([6,26,50,74,98]),new R(28,new C(2,111),new C(7,112)),new R(28,new C(17,46)),new R(30,new C(7,24),new C(16,25)),new R(24,new C(34,13))),new Y(23,Int32Array.from([6,30,54,78,102]),new R(30,new C(4,121),new C(5,122)),new R(28,new C(4,47),new C(14,48)),new R(30,new C(11,24),new C(14,25)),new R(30,new C(16,15),new C(14,16))),new Y(24,Int32Array.from([6,28,54,80,106]),new R(30,new C(6,117),new C(4,118)),new R(28,new C(6,45),new C(14,46)),new R(30,new C(11,24),new C(16,25)),new R(30,new C(30,16),new C(2,17))),new Y(25,Int32Array.from([6,32,58,84,110]),new R(26,new C(8,106),new C(4,107)),new R(28,new C(8,47),new C(13,48)),new R(30,new C(7,24),new C(22,25)),new R(30,new C(22,15),new C(13,16))),new Y(26,Int32Array.from([6,30,58,86,114]),new R(28,new C(10,114),new C(2,115)),new R(28,new C(19,46),new C(4,47)),new R(28,new C(28,22),new C(6,23)),new R(30,new C(33,16),new C(4,17))),new Y(27,Int32Array.from([6,34,62,90,118]),new R(30,new C(8,122),new C(4,123)),new R(28,new C(22,45),new C(3,46)),new R(30,new C(8,23),new C(26,24)),new R(30,new C(12,15),new C(28,16))),new Y(28,Int32Array.from([6,26,50,74,98,122]),new R(30,new C(3,117),new C(10,118)),new R(28,new C(3,45),new C(23,46)),new R(30,new C(4,24),new C(31,25)),new R(30,new C(11,15),new C(31,16))),new Y(29,Int32Array.from([6,30,54,78,102,126]),new R(30,new C(7,116),new C(7,117)),new R(28,new C(21,45),new C(7,46)),new R(30,new C(1,23),new C(37,24)),new R(30,new C(19,15),new C(26,16))),new Y(30,Int32Array.from([6,26,52,78,104,130]),new R(30,new C(5,115),new C(10,116)),new R(28,new C(19,47),new C(10,48)),new R(30,new C(15,24),new C(25,25)),new R(30,new C(23,15),new C(25,16))),new Y(31,Int32Array.from([6,30,56,82,108,134]),new R(30,new C(13,115),new C(3,116)),new R(28,new C(2,46),new C(29,47)),new R(30,new C(42,24),new C(1,25)),new R(30,new C(23,15),new C(28,16))),new Y(32,Int32Array.from([6,34,60,86,112,138]),new R(30,new C(17,115)),new R(28,new C(10,46),new C(23,47)),new R(30,new C(10,24),new C(35,25)),new R(30,new C(19,15),new C(35,16))),new Y(33,Int32Array.from([6,30,58,86,114,142]),new R(30,new C(17,115),new C(1,116)),new R(28,new C(14,46),new C(21,47)),new R(30,new C(29,24),new C(19,25)),new R(30,new C(11,15),new C(46,16))),new Y(34,Int32Array.from([6,34,62,90,118,146]),new R(30,new C(13,115),new C(6,116)),new R(28,new C(14,46),new C(23,47)),new R(30,new C(44,24),new C(7,25)),new R(30,new C(59,16),new C(1,17))),new Y(35,Int32Array.from([6,30,54,78,102,126,150]),new R(30,new C(12,121),new C(7,122)),new R(28,new C(12,47),new C(26,48)),new R(30,new C(39,24),new C(14,25)),new R(30,new C(22,15),new C(41,16))),new Y(36,Int32Array.from([6,24,50,76,102,128,154]),new R(30,new C(6,121),new C(14,122)),new R(28,new C(6,47),new C(34,48)),new R(30,new C(46,24),new C(10,25)),new R(30,new C(2,15),new C(64,16))),new Y(37,Int32Array.from([6,28,54,80,106,132,158]),new R(30,new C(17,122),new C(4,123)),new R(28,new C(29,46),new C(14,47)),new R(30,new C(49,24),new C(10,25)),new R(30,new C(24,15),new C(46,16))),new Y(38,Int32Array.from([6,32,58,84,110,136,162]),new R(30,new C(4,122),new C(18,123)),new R(28,new C(13,46),new C(32,47)),new R(30,new C(48,24),new C(14,25)),new R(30,new C(42,15),new C(32,16))),new Y(39,Int32Array.from([6,26,54,82,110,138,166]),new R(30,new C(20,117),new C(4,118)),new R(28,new C(40,47),new C(7,48)),new R(30,new C(43,24),new C(22,25)),new R(30,new C(10,15),new C(67,16))),new Y(40,Int32Array.from([6,30,58,86,114,142,170]),new R(30,new C(19,118),new C(6,119)),new R(28,new C(18,47),new C(31,48)),new R(30,new C(34,24),new C(34,25)),new R(30,new C(20,15),new C(61,16)))];var Ke;(function(p){p[p.DATA_MASK_000=0]="DATA_MASK_000",p[p.DATA_MASK_001=1]="DATA_MASK_001",p[p.DATA_MASK_010=2]="DATA_MASK_010",p[p.DATA_MASK_011=3]="DATA_MASK_011",p[p.DATA_MASK_100=4]="DATA_MASK_100",p[p.DATA_MASK_101=5]="DATA_MASK_101",p[p.DATA_MASK_110=6]="DATA_MASK_110",p[p.DATA_MASK_111=7]="DATA_MASK_111"})(Ke||(Ke={}));class Ot{constructor(e,t){this.value=e,this.isMasked=t}unmaskBitMatrix(e,t){for(let i=0;i<t;i++)for(let o=0;o<t;o++)this.isMasked(i,o)&&e.flip(o,i)}}Ot.values=new Map([[Ke.DATA_MASK_000,new Ot(Ke.DATA_MASK_000,(p,e)=>(p+e&1)===0)],[Ke.DATA_MASK_001,new Ot(Ke.DATA_MASK_001,(p,e)=>(p&1)===0)],[Ke.DATA_MASK_010,new Ot(Ke.DATA_MASK_010,(p,e)=>e%3===0)],[Ke.DATA_MASK_011,new Ot(Ke.DATA_MASK_011,(p,e)=>(p+e)%3===0)],[Ke.DATA_MASK_100,new Ot(Ke.DATA_MASK_100,(p,e)=>(Math.floor(p/2)+Math.floor(e/3)&1)===0)],[Ke.DATA_MASK_101,new Ot(Ke.DATA_MASK_101,(p,e)=>p*e%6===0)],[Ke.DATA_MASK_110,new Ot(Ke.DATA_MASK_110,(p,e)=>p*e%6<3)],[Ke.DATA_MASK_111,new Ot(Ke.DATA_MASK_111,(p,e)=>(p+e+p*e%3&1)===0)]]);class Zh{constructor(e){const t=e.getHeight();if(t<21||(t&3)!==1)throw new k;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let a=0;a<6;a++)e=this.copyBit(a,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let a=5;a>=0;a--)e=this.copyBit(8,a,e);const t=this.bitMatrix.getHeight();let i=0;const o=t-7;for(let a=t-1;a>=o;a--)i=this.copyBit(8,a,i);for(let a=t-8;a<t;a++)i=this.copyBit(a,8,i);if(this.parsedFormatInfo=ot.decodeFormatInformation(e,i),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new k}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Y.getVersionForNumber(t);let i=0;const o=e-11;for(let l=5;l>=0;l--)for(let h=e-9;h>=o;h--)i=this.copyBit(h,l,i);let a=Y.decodeVersionInformation(i);if(a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;i=0;for(let l=5;l>=0;l--)for(let h=e-9;h>=o;h--)i=this.copyBit(l,h,i);if(a=Y.decodeVersionInformation(i),a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;throw new k}copyBit(e,t,i){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?i<<1|1:i<<1}readCodewords(){const e=this.readFormatInformation(),t=this.readVersion(),i=Ot.values.get(e.getDataMask()),o=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,o);const a=t.buildFunctionPattern();let l=!0;const h=new Uint8Array(t.getTotalCodewords());let u=0,g=0,x=0;for(let m=o-1;m>0;m-=2){m===6&&m--;for(let A=0;A<o;A++){const I=l?o-1-A:A;for(let b=0;b<2;b++)a.get(m-b,I)||(x++,g<<=1,this.bitMatrix.get(m-b,I)&&(g|=1),x===8&&(h[u++]=g,x=0,g=0))}l=!l}if(u!==t.getTotalCodewords())throw new k;return h}remask(){if(this.parsedFormatInfo===null)return;const e=Ot.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let t=0,i=e.getWidth();t<i;t++)for(let o=t+1,a=e.getHeight();o<a;o++)e.get(t,o)!==e.get(o,t)&&(e.flip(o,t),e.flip(t,o))}}class Ms{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t,i){if(e.length!==t.getTotalCodewords())throw new N;const o=t.getECBlocksForLevel(i);let a=0;const l=o.getECBlocks();for(const b of l)a+=b.getCount();const h=new Array(a);let u=0;for(const b of l)for(let T=0;T<b.getCount();T++){const v=b.getDataCodewords(),D=o.getECCodewordsPerBlock()+v;h[u++]=new Ms(v,new Uint8Array(D))}const g=h[0].codewords.length;let x=h.length-1;for(;x>=0&&h[x].codewords.length!==g;)x--;x++;const m=g-o.getECCodewordsPerBlock();let A=0;for(let b=0;b<m;b++)for(let T=0;T<u;T++)h[T].codewords[b]=e[A++];for(let b=x;b<u;b++)h[b].codewords[m]=e[A++];const I=h[0].codewords.length;for(let b=m;b<I;b++)for(let T=0;T<u;T++){const v=T<x?b:b+1;h[T].codewords[v]=e[A++]}return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Dt;(function(p){p[p.TERMINATOR=0]="TERMINATOR",p[p.NUMERIC=1]="NUMERIC",p[p.ALPHANUMERIC=2]="ALPHANUMERIC",p[p.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",p[p.BYTE=4]="BYTE",p[p.ECI=5]="ECI",p[p.KANJI=6]="KANJI",p[p.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",p[p.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",p[p.HANZI=9]="HANZI"})(Dt||(Dt={}));class Z{constructor(e,t,i,o){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=i,this.bits=o,Z.FOR_BITS.set(o,this),Z.FOR_VALUE.set(e,this)}static forBits(e){const t=Z.FOR_BITS.get(e);if(t===void 0)throw new N;return t}getCharacterCountBits(e){const t=e.getVersionNumber();let i;return t<=9?i=0:t<=26?i=1:i=2,this.characterCountBitsForVersions[i]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof Z))return!1;const t=e;return this.value===t.value}toString(){return this.stringValue}}Z.FOR_BITS=new Map,Z.FOR_VALUE=new Map,Z.TERMINATOR=new Z(Dt.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Z.NUMERIC=new Z(Dt.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Z.ALPHANUMERIC=new Z(Dt.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Z.STRUCTURED_APPEND=new Z(Dt.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Z.BYTE=new Z(Dt.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Z.ECI=new Z(Dt.ECI,"ECI",Int32Array.from([0,0,0]),7),Z.KANJI=new Z(Dt.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Z.FNC1_FIRST_POSITION=new Z(Dt.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Z.FNC1_SECOND_POSITION=new Z(Dt.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Z.HANZI=new Z(Dt.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Pe{static decode(e,t,i,o){const a=new Ds(e);let l=new Ie;const h=new Array;let u=-1,g=-1;try{let x=null,m=!1,A;do{if(a.available()<4)A=Z.TERMINATOR;else{const I=a.readBits(4);A=Z.forBits(I)}switch(A){case Z.TERMINATOR:break;case Z.FNC1_FIRST_POSITION:case Z.FNC1_SECOND_POSITION:m=!0;break;case Z.STRUCTURED_APPEND:if(a.available()<16)throw new k;u=a.readBits(8),g=a.readBits(8);break;case Z.ECI:const I=Pe.parseECIValue(a);if(x=L.getCharacterSetECIByValue(I),x===null)throw new k;break;case Z.HANZI:const b=a.readBits(4),T=a.readBits(A.getCharacterCountBits(t));b===Pe.GB2312_SUBSET&&Pe.decodeHanziSegment(a,l,T);break;default:const v=a.readBits(A.getCharacterCountBits(t));switch(A){case Z.NUMERIC:Pe.decodeNumericSegment(a,l,v);break;case Z.ALPHANUMERIC:Pe.decodeAlphanumericSegment(a,l,v,m);break;case Z.BYTE:Pe.decodeByteSegment(a,l,v,x,h,o);break;case Z.KANJI:Pe.decodeKanjiSegment(a,l,v);break;default:throw new k}break}}while(A!==Z.TERMINATOR)}catch{throw new k}return new wr(e,l.toString(),h.length===0?null:h,i===null?null:i.toString(),u,g)}static decodeHanziSegment(e,t,i){if(i*13>e.available())throw new k;const o=new Uint8Array(2*i);let a=0;for(;i>0;){const l=e.readBits(13);let h=l/96<<8&4294967295|l%96;h<959?h+=41377:h+=42657,o[a]=h>>8&255,o[a+1]=h&255,a+=2,i--}try{t.append(mt.decode(o,ie.GB2312))}catch(l){throw new k(l)}}static decodeKanjiSegment(e,t,i){if(i*13>e.available())throw new k;const o=new Uint8Array(2*i);let a=0;for(;i>0;){const l=e.readBits(13);let h=l/192<<8&4294967295|l%192;h<7936?h+=33088:h+=49472,o[a]=h>>8,o[a+1]=h,a+=2,i--}try{t.append(mt.decode(o,ie.SHIFT_JIS))}catch(l){throw new k(l)}}static decodeByteSegment(e,t,i,o,a,l){if(8*i>e.available())throw new k;const h=new Uint8Array(i);for(let g=0;g<i;g++)h[g]=e.readBits(8);let u;o===null?u=ie.guessEncoding(h,l):u=o.getName();try{t.append(mt.decode(h,u))}catch(g){throw new k(g)}a.push(h)}static toAlphaNumericChar(e){if(e>=Pe.ALPHANUMERIC_CHARS.length)throw new k;return Pe.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,t,i,o){const a=t.length();for(;i>1;){if(e.available()<11)throw new k;const l=e.readBits(11);t.append(Pe.toAlphaNumericChar(Math.floor(l/45))),t.append(Pe.toAlphaNumericChar(l%45)),i-=2}if(i===1){if(e.available()<6)throw new k;t.append(Pe.toAlphaNumericChar(e.readBits(6)))}if(o)for(let l=a;l<t.length();l++)t.charAt(l)==="%"&&(l<t.length()-1&&t.charAt(l+1)==="%"?t.deleteCharAt(l+1):t.setCharAt(l,String.fromCharCode(29)))}static decodeNumericSegment(e,t,i){for(;i>=3;){if(e.available()<10)throw new k;const o=e.readBits(10);if(o>=1e3)throw new k;t.append(Pe.toAlphaNumericChar(Math.floor(o/100))),t.append(Pe.toAlphaNumericChar(Math.floor(o/10)%10)),t.append(Pe.toAlphaNumericChar(o%10)),i-=3}if(i===2){if(e.available()<7)throw new k;const o=e.readBits(7);if(o>=100)throw new k;t.append(Pe.toAlphaNumericChar(Math.floor(o/10))),t.append(Pe.toAlphaNumericChar(o%10))}else if(i===1){if(e.available()<4)throw new k;const o=e.readBits(4);if(o>=10)throw new k;t.append(Pe.toAlphaNumericChar(o))}}static parseECIValue(e){const t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){const i=e.readBits(8);return(t&63)<<8&4294967295|i}if((t&224)===192){const i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new k}}Pe.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Pe.GB2312_SUBSET=1;class Ta{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const t=e[0];e[0]=e[2],e[2]=t}}class qh{constructor(){this.rsDecoder=new Ar(me.QR_CODE_FIELD_256)}decodeBooleanArray(e,t){return this.decodeBitMatrix(je.parseFromBooleanArray(e),t)}decodeBitMatrix(e,t){const i=new Zh(e);let o=null;try{return this.decodeBitMatrixParser(i,t)}catch(a){o=a}try{i.remask(),i.setMirror(!0),i.readVersion(),i.readFormatInformation(),i.mirror();const a=this.decodeBitMatrixParser(i,t);return a.setOther(new Ta(!0)),a}catch(a){throw o!==null?o:a}}decodeBitMatrixParser(e,t){const i=e.readVersion(),o=e.readFormatInformation().getErrorCorrectionLevel(),a=e.readCodewords(),l=Ms.getDataBlocks(a,i,o);let h=0;for(const x of l)h+=x.getNumDataCodewords();const u=new Uint8Array(h);let g=0;for(const x of l){const m=x.getCodewords(),A=x.getNumDataCodewords();this.correctErrors(m,A);for(let I=0;I<A;I++)u[g++]=m[I]}return Pe.decode(u,i,o,t)}correctErrors(e,t){const i=new Int32Array(e);try{this.rsDecoder.decode(i,e.length-t)}catch{throw new W}for(let o=0;o<t;o++)e[o]=i[o]}}class Ps extends X{constructor(e,t,i){super(e,t),this.estimatedModuleSize=i}aboutEquals(e,t,i){if(Math.abs(t-this.getY())<=e&&Math.abs(i-this.getX())<=e){const o=Math.abs(e-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1}combineEstimate(e,t,i){const o=(this.getX()+t)/2,a=(this.getY()+e)/2,l=(this.estimatedModuleSize+i)/2;return new Ps(o,a,l)}}class yi{constructor(e,t,i,o,a,l,h){this.image=e,this.startX=t,this.startY=i,this.width=o,this.height=a,this.moduleSize=l,this.resultPointCallback=h,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,t=this.height,i=this.width,o=e+i,a=this.startY+t/2,l=new Int32Array(3),h=this.image;for(let u=0;u<t;u++){const g=a+((u&1)===0?Math.floor((u+1)/2):-Math.floor((u+1)/2));l[0]=0,l[1]=0,l[2]=0;let x=e;for(;x<o&&!h.get(x,g);)x++;let m=0;for(;x<o;){if(h.get(x,g))if(m===1)l[1]++;else if(m===2){if(this.foundPatternCross(l)){const A=this.handlePossibleCenter(l,g,x);if(A!==null)return A}l[0]=l[2],l[1]=1,l[2]=0,m=1}else l[++m]++;else m===1&&m++,l[m]++;x++}if(this.foundPatternCross(l)){const A=this.handlePossibleCenter(l,g,o);if(A!==null)return A}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new M}static centerFromEnd(e,t){return t-e[2]-e[1]/2}foundPatternCross(e){const t=this.moduleSize,i=t/2;for(let o=0;o<3;o++)if(Math.abs(t-e[o])>=i)return!1;return!0}crossCheckVertical(e,t,i,o){const a=this.image,l=a.getHeight(),h=this.crossCheckStateCount;h[0]=0,h[1]=0,h[2]=0;let u=e;for(;u>=0&&a.get(t,u)&&h[1]<=i;)h[1]++,u--;if(u<0||h[1]>i)return NaN;for(;u>=0&&!a.get(t,u)&&h[0]<=i;)h[0]++,u--;if(h[0]>i)return NaN;for(u=e+1;u<l&&a.get(t,u)&&h[1]<=i;)h[1]++,u++;if(u===l||h[1]>i)return NaN;for(;u<l&&!a.get(t,u)&&h[2]<=i;)h[2]++,u++;if(h[2]>i)return NaN;const g=h[0]+h[1]+h[2];return 5*Math.abs(g-o)>=2*o?NaN:this.foundPatternCross(h)?yi.centerFromEnd(h,u):NaN}handlePossibleCenter(e,t,i){const o=e[0]+e[1]+e[2],a=yi.centerFromEnd(e,i),l=this.crossCheckVertical(t,a,2*e[1],o);if(!isNaN(l)){const h=(e[0]+e[1]+e[2])/3;for(const g of this.possibleCenters)if(g.aboutEquals(h,l,a))return g.combineEstimate(l,a,h);const u=new Ps(a,l,h);this.possibleCenters.push(u),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(u)}return null}}class ks extends X{constructor(e,t,i,o){super(e,t),this.estimatedModuleSize=i,this.count=o,o===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,t,i){if(Math.abs(t-this.getY())<=e&&Math.abs(i-this.getX())<=e){const o=Math.abs(e-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1}combineEstimate(e,t,i){const o=this.count+1,a=(this.count*this.getX()+t)/o,l=(this.count*this.getY()+e)/o,h=(this.count*this.estimatedModuleSize+i)/o;return new ks(a,l,h,o)}}class Qh{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Ze{constructor(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const t=e!=null&&e.get(ne.TRY_HARDER)!==void 0,i=e!=null&&e.get(ne.PURE_BARCODE)!==void 0,o=this.image,a=o.getHeight(),l=o.getWidth();let h=Math.floor(3*a/(4*Ze.MAX_MODULES));(h<Ze.MIN_SKIP||t)&&(h=Ze.MIN_SKIP);let u=!1;const g=new Int32Array(5);for(let m=h-1;m<a&&!u;m+=h){g[0]=0,g[1]=0,g[2]=0,g[3]=0,g[4]=0;let A=0;for(let I=0;I<l;I++)if(o.get(I,m))(A&1)===1&&A++,g[A]++;else if((A&1)===0)if(A===4)if(Ze.foundPatternCross(g)){if(this.handlePossibleCenter(g,m,I,i)===!0)if(h=2,this.hasSkipped===!0)u=this.haveMultiplyConfirmedCenters();else{const T=this.findRowSkip();T>g[2]&&(m+=T-g[2]-h,I=l-1)}else{g[0]=g[2],g[1]=g[3],g[2]=g[4],g[3]=1,g[4]=0,A=3;continue}A=0,g[0]=0,g[1]=0,g[2]=0,g[3]=0,g[4]=0}else g[0]=g[2],g[1]=g[3],g[2]=g[4],g[3]=1,g[4]=0,A=3;else g[++A]++;else g[A]++;Ze.foundPatternCross(g)&&this.handlePossibleCenter(g,m,l,i)===!0&&(h=g[0],this.hasSkipped&&(u=this.haveMultiplyConfirmedCenters()))}const x=this.selectBestPatterns();return X.orderBestPatterns(x),new Qh(x)}static centerFromEnd(e,t){return t-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let t=0;for(let a=0;a<5;a++){const l=e[a];if(l===0)return!1;t+=l}if(t<7)return!1;const i=t/7,o=i/2;return Math.abs(i-e[0])<o&&Math.abs(i-e[1])<o&&Math.abs(3*i-e[2])<3*o&&Math.abs(i-e[3])<o&&Math.abs(i-e[4])<o}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,t,i,o){const a=this.getCrossCheckStateCount();let l=0;const h=this.image;for(;e>=l&&t>=l&&h.get(t-l,e-l);)a[2]++,l++;if(e<l||t<l)return!1;for(;e>=l&&t>=l&&!h.get(t-l,e-l)&&a[1]<=i;)a[1]++,l++;if(e<l||t<l||a[1]>i)return!1;for(;e>=l&&t>=l&&h.get(t-l,e-l)&&a[0]<=i;)a[0]++,l++;if(a[0]>i)return!1;const u=h.getHeight(),g=h.getWidth();for(l=1;e+l<u&&t+l<g&&h.get(t+l,e+l);)a[2]++,l++;if(e+l>=u||t+l>=g)return!1;for(;e+l<u&&t+l<g&&!h.get(t+l,e+l)&&a[3]<i;)a[3]++,l++;if(e+l>=u||t+l>=g||a[3]>=i)return!1;for(;e+l<u&&t+l<g&&h.get(t+l,e+l)&&a[4]<i;)a[4]++,l++;if(a[4]>=i)return!1;const x=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(x-o)<2*o&&Ze.foundPatternCross(a)}crossCheckVertical(e,t,i,o){const a=this.image,l=a.getHeight(),h=this.getCrossCheckStateCount();let u=e;for(;u>=0&&a.get(t,u);)h[2]++,u--;if(u<0)return NaN;for(;u>=0&&!a.get(t,u)&&h[1]<=i;)h[1]++,u--;if(u<0||h[1]>i)return NaN;for(;u>=0&&a.get(t,u)&&h[0]<=i;)h[0]++,u--;if(h[0]>i)return NaN;for(u=e+1;u<l&&a.get(t,u);)h[2]++,u++;if(u===l)return NaN;for(;u<l&&!a.get(t,u)&&h[3]<i;)h[3]++,u++;if(u===l||h[3]>=i)return NaN;for(;u<l&&a.get(t,u)&&h[4]<i;)h[4]++,u++;if(h[4]>=i)return NaN;const g=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(g-o)>=2*o?NaN:Ze.foundPatternCross(h)?Ze.centerFromEnd(h,u):NaN}crossCheckHorizontal(e,t,i,o){const a=this.image,l=a.getWidth(),h=this.getCrossCheckStateCount();let u=e;for(;u>=0&&a.get(u,t);)h[2]++,u--;if(u<0)return NaN;for(;u>=0&&!a.get(u,t)&&h[1]<=i;)h[1]++,u--;if(u<0||h[1]>i)return NaN;for(;u>=0&&a.get(u,t)&&h[0]<=i;)h[0]++,u--;if(h[0]>i)return NaN;for(u=e+1;u<l&&a.get(u,t);)h[2]++,u++;if(u===l)return NaN;for(;u<l&&!a.get(u,t)&&h[3]<i;)h[3]++,u++;if(u===l||h[3]>=i)return NaN;for(;u<l&&a.get(u,t)&&h[4]<i;)h[4]++,u++;if(h[4]>=i)return NaN;const g=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(g-o)>=o?NaN:Ze.foundPatternCross(h)?Ze.centerFromEnd(h,u):NaN}handlePossibleCenter(e,t,i,o){const a=e[0]+e[1]+e[2]+e[3]+e[4];let l=Ze.centerFromEnd(e,i),h=this.crossCheckVertical(t,Math.floor(l),e[2],a);if(!isNaN(h)&&(l=this.crossCheckHorizontal(Math.floor(l),Math.floor(h),e[2],a),!isNaN(l)&&(!o||this.crossCheckDiagonal(Math.floor(h),Math.floor(l),e[2],a)))){const u=a/7;let g=!1;const x=this.possibleCenters;for(let m=0,A=x.length;m<A;m++){const I=x[m];if(I.aboutEquals(u,h,l)){x[m]=I.combineEstimate(h,l,u),g=!0;break}}if(!g){const m=new ks(l,h,u);x.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let t=null;for(const i of this.possibleCenters)if(i.getCount()>=Ze.CENTER_QUORUM)if(t==null)t=i;else return this.hasSkipped=!0,Math.floor((Math.abs(t.getX()-i.getX())-Math.abs(t.getY()-i.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,t=0;const i=this.possibleCenters.length;for(const l of this.possibleCenters)l.getCount()>=Ze.CENTER_QUORUM&&(e++,t+=l.getEstimatedModuleSize());if(e<3)return!1;const o=t/i;let a=0;for(const l of this.possibleCenters)a+=Math.abs(l.getEstimatedModuleSize()-o);return a<=.05*t}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new M;const t=this.possibleCenters;let i;if(e>3){let o=0,a=0;for(const u of this.possibleCenters){const g=u.getEstimatedModuleSize();o+=g,a+=g*g}i=o/e;let l=Math.sqrt(a/e-i*i);t.sort((u,g)=>{const x=Math.abs(g.getEstimatedModuleSize()-i),m=Math.abs(u.getEstimatedModuleSize()-i);return x<m?-1:x>m?1:0});const h=Math.max(.2*i,l);for(let u=0;u<t.length&&t.length>3;u++){const g=t[u];Math.abs(g.getEstimatedModuleSize()-i)>h&&(t.splice(u,1),u--)}}if(t.length>3){let o=0;for(const a of t)o+=a.getEstimatedModuleSize();i=o/t.length,t.sort((a,l)=>{if(l.getCount()===a.getCount()){const h=Math.abs(l.getEstimatedModuleSize()-i),u=Math.abs(a.getEstimatedModuleSize()-i);return h<u?1:h>u?-1:0}else return l.getCount()-a.getCount()}),t.splice(3)}return[t[0],t[1],t[2]]}}Ze.CENTER_QUORUM=2,Ze.MIN_SKIP=3,Ze.MAX_MODULES=57;class Ir{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(ne.NEED_RESULT_POINT_CALLBACK);const i=new Ze(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(i)}processFinderPatternInfo(e){const t=e.getTopLeft(),i=e.getTopRight(),o=e.getBottomLeft(),a=this.calculateModuleSize(t,i,o);if(a<1)throw new M("No pattern found in proccess finder.");const l=Ir.computeDimension(t,i,o,a),h=Y.getProvisionalVersionForDimension(l),u=h.getDimensionForVersion()-7;let g=null;if(h.getAlignmentPatternCenters().length>0){const I=i.getX()-t.getX()+o.getX(),b=i.getY()-t.getY()+o.getY(),T=1-3/u,v=Math.floor(t.getX()+T*(I-t.getX())),D=Math.floor(t.getY()+T*(b-t.getY()));for(let F=4;F<=16;F<<=1)try{g=this.findAlignmentInRegion(a,v,D,F);break}catch(U){if(!(U instanceof M))throw U}}const x=Ir.createTransform(t,i,o,g,l),m=Ir.sampleGrid(this.image,x,l);let A;return g===null?A=[o,t,i]:A=[o,t,i,g],new wi(m,A)}static createTransform(e,t,i,o,a){const l=a-3.5;let h,u,g,x;return o!==null?(h=o.getX(),u=o.getY(),g=l-3,x=g):(h=t.getX()-e.getX()+i.getX(),u=t.getY()-e.getY()+i.getY(),g=l,x=l),kt.quadrilateralToQuadrilateral(3.5,3.5,l,3.5,g,x,3.5,l,e.getX(),e.getY(),t.getX(),t.getY(),h,u,i.getX(),i.getY())}static sampleGrid(e,t,i){return an.getInstance().sampleGridWithTransform(e,i,i,t)}static computeDimension(e,t,i,o){const a=xe.round(X.distance(e,t)/o),l=xe.round(X.distance(e,i)/o);let h=Math.floor((a+l)/2)+7;switch(h&3){case 0:h++;break;case 2:h--;break;case 3:throw new M("Dimensions could be not found.")}return h}calculateModuleSize(e,t,i){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,i))/2}calculateModuleSizeOneWay(e,t){const i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(i)?o/7:isNaN(o)?i/7:(i+o)/14}sizeOfBlackWhiteBlackRunBothWays(e,t,i,o){let a=this.sizeOfBlackWhiteBlackRun(e,t,i,o),l=1,h=e-(i-e);h<0?(l=e/(e-h),h=0):h>=this.image.getWidth()&&(l=(this.image.getWidth()-1-e)/(h-e),h=this.image.getWidth()-1);let u=Math.floor(t-(o-t)*l);return l=1,u<0?(l=t/(t-u),u=0):u>=this.image.getHeight()&&(l=(this.image.getHeight()-1-t)/(u-t),u=this.image.getHeight()-1),h=Math.floor(e+(h-e)*l),a+=this.sizeOfBlackWhiteBlackRun(e,t,h,u),a-1}sizeOfBlackWhiteBlackRun(e,t,i,o){const a=Math.abs(o-t)>Math.abs(i-e);if(a){let I=e;e=t,t=I,I=i,i=o,o=I}const l=Math.abs(i-e),h=Math.abs(o-t);let u=-l/2;const g=e<i?1:-1,x=t<o?1:-1;let m=0;const A=i+g;for(let I=e,b=t;I!==A;I+=g){const T=a?b:I,v=a?I:b;if(m===1===this.image.get(T,v)){if(m===2)return xe.distance(I,b,e,t);m++}if(u+=h,u>0){if(b===o)break;b+=x,u-=l}}return m===2?xe.distance(i+g,o,e,t):NaN}findAlignmentInRegion(e,t,i,o){const a=Math.floor(o*e),l=Math.max(0,t-a),h=Math.min(this.image.getWidth()-1,t+a);if(h-l<e*3)throw new M("Alignment top exceeds estimated module size.");const u=Math.max(0,i-a),g=Math.min(this.image.getHeight()-1,i+a);if(g-u<e*3)throw new M("Alignment bottom exceeds estimated module size.");return new yi(this.image,l,u,h-l,g-u,e,this.resultPointCallback).find()}}class un{constructor(){this.decoder=new qh}getDecoder(){return this.decoder}decode(e,t){let i,o;if(t!=null&&t.get(ne.PURE_BARCODE)!==void 0){const u=un.extractPureBits(e.getBlackMatrix());i=this.decoder.decodeBitMatrix(u,t),o=un.NO_POINTS}else{const u=new Ir(e.getBlackMatrix()).detect(t);i=this.decoder.decodeBitMatrix(u.getBits(),t),o=u.getPoints()}i.getOther()instanceof Ta&&i.getOther().applyMirroredCorrection(o);const a=new ft(i.getText(),i.getRawBytes(),void 0,o,q.QR_CODE,void 0),l=i.getByteSegments();l!==null&&a.putMetadata(Ye.BYTE_SEGMENTS,l);const h=i.getECLevel();return h!==null&&a.putMetadata(Ye.ERROR_CORRECTION_LEVEL,h),i.hasStructuredAppend()&&(a.putMetadata(Ye.STRUCTURED_APPEND_SEQUENCE,i.getStructuredAppendSequenceNumber()),a.putMetadata(Ye.STRUCTURED_APPEND_PARITY,i.getStructuredAppendParity())),a}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),i=e.getBottomRightOnBit();if(t===null||i===null)throw new M;const o=this.moduleSize(t,e);let a=t[1],l=i[1],h=t[0],u=i[0];if(h>=u||a>=l)throw new M;if(l-a!==u-h&&(u=h+(l-a),u>=e.getWidth()))throw new M;const g=Math.round((u-h+1)/o),x=Math.round((l-a+1)/o);if(g<=0||x<=0)throw new M;if(x!==g)throw new M;const m=Math.floor(o/2);a+=m,h+=m;const A=h+Math.floor((g-1)*o)-u;if(A>0){if(A>m)throw new M;h-=A}const I=a+Math.floor((x-1)*o)-l;if(I>0){if(I>m)throw new M;a-=I}const b=new je(g,x);for(let T=0;T<x;T++){const v=a+Math.floor(T*o);for(let D=0;D<g;D++)e.get(h+Math.floor(D*o),v)&&b.set(D,T)}return b}static moduleSize(e,t){const i=t.getHeight(),o=t.getWidth();let a=e[0],l=e[1],h=!0,u=0;for(;a<o&&l<i;){if(h!==t.get(a,l)){if(++u===5)break;h=!h}a++,l++}if(a===o||l===i)throw new M;return(a-e[0])/7}}un.NO_POINTS=new Array;class ${PDF417Common(){}static getBitCountSum(e){return xe.sum(e)}static toIntArray(e){if(e==null||!e.length)return $.EMPTY_INT_ARRAY;const t=new Int32Array(e.length);let i=0;for(const o of e)t[i++]=o;return t}static getCodeword(e){const t=ge.binarySearch($.SYMBOL_TABLE,e&262143);return t<0?-1:($.CODEWORD_TABLE[t]-1)%$.NUMBER_OF_CODEWORDS}}$.NUMBER_OF_CODEWORDS=929,$.MAX_CODEWORDS_IN_BARCODE=$.NUMBER_OF_CODEWORDS-1,$.MIN_ROWS_IN_BARCODE=3,$.MAX_ROWS_IN_BARCODE=90,$.MODULES_IN_CODEWORD=17,$.MODULES_IN_STOP_PATTERN=18,$.BARS_IN_MODULE=8,$.EMPTY_INT_ARRAY=new Int32Array([]),$.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),$.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Jh{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class le{static detectMultiple(e,t,i){let o=e.getBlackMatrix(),a=le.detect(i,o);return a.length||(o=o.clone(),o.rotate180(),a=le.detect(i,o)),new Jh(o,a)}static detect(e,t){const i=new Array;let o=0,a=0,l=!1;for(;o<t.getHeight();){const h=le.findVertices(t,o,a);if(h[0]==null&&h[3]==null){if(!l)break;l=!1,a=0;for(const u of i)u[1]!=null&&(o=Math.trunc(Math.max(o,u[1].getY()))),u[3]!=null&&(o=Math.max(o,Math.trunc(u[3].getY())));o+=le.ROW_STEP;continue}if(l=!0,i.push(h),!e)break;h[2]!=null?(a=Math.trunc(h[2].getX()),o=Math.trunc(h[2].getY())):(a=Math.trunc(h[4].getX()),o=Math.trunc(h[4].getY()))}return i}static findVertices(e,t,i){const o=e.getHeight(),a=e.getWidth(),l=new Array(8);return le.copyToResult(l,le.findRowsWithPattern(e,o,a,t,i,le.START_PATTERN),le.INDEXES_START_PATTERN),l[4]!=null&&(i=Math.trunc(l[4].getX()),t=Math.trunc(l[4].getY())),le.copyToResult(l,le.findRowsWithPattern(e,o,a,t,i,le.STOP_PATTERN),le.INDEXES_STOP_PATTERN),l}static copyToResult(e,t,i){for(let o=0;o<i.length;o++)e[i[o]]=t[o]}static findRowsWithPattern(e,t,i,o,a,l){const h=new Array(4);let u=!1;const g=new Int32Array(l.length);for(;o<t;o+=le.ROW_STEP){let m=le.findGuardPattern(e,a,o,i,!1,l,g);if(m!=null){for(;o>0;){const A=le.findGuardPattern(e,a,--o,i,!1,l,g);if(A!=null)m=A;else{o++;break}}h[0]=new X(m[0],o),h[1]=new X(m[1],o),u=!0;break}}let x=o+1;if(u){let m=0,A=Int32Array.from([Math.trunc(h[0].getX()),Math.trunc(h[1].getX())]);for(;x<t;x++){const I=le.findGuardPattern(e,A[0],x,i,!1,l,g);if(I!=null&&Math.abs(A[0]-I[0])<le.MAX_PATTERN_DRIFT&&Math.abs(A[1]-I[1])<le.MAX_PATTERN_DRIFT)A=I,m=0;else{if(m>le.SKIPPED_ROW_COUNT_MAX)break;m++}}x-=m+1,h[2]=new X(A[0],x),h[3]=new X(A[1],x)}return x-o<le.BARCODE_MIN_HEIGHT&&ge.fill(h,null),h}static findGuardPattern(e,t,i,o,a,l,h){ge.fillWithin(h,0,h.length,0);let u=t,g=0;for(;e.get(u,i)&&u>0&&g++<le.MAX_PIXEL_DRIFT;)u--;let x=u,m=0,A=l.length;for(let I=a;x<o;x++)if(e.get(x,i)!==I)h[m]++;else{if(m===A-1){if(le.patternMatchVariance(h,l,le.MAX_INDIVIDUAL_VARIANCE)<le.MAX_AVG_VARIANCE)return new Int32Array([u,x]);u+=h[0]+h[1],te.arraycopy(h,2,h,0,m-1),h[m-1]=0,h[m]=0,m--}else m++;h[m]=1,I=!I}return m===A-1&&le.patternMatchVariance(h,l,le.MAX_INDIVIDUAL_VARIANCE)<le.MAX_AVG_VARIANCE?new Int32Array([u,x-1]):null}static patternMatchVariance(e,t,i){let o=e.length,a=0,l=0;for(let g=0;g<o;g++)a+=e[g],l+=t[g];if(a<l)return 1/0;let h=a/l;i*=h;let u=0;for(let g=0;g<o;g++){let x=e[g],m=t[g]*h,A=x>m?x-m:m-x;if(A>i)return 1/0;u+=A}return u/a}}le.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),le.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),le.MAX_AVG_VARIANCE=.42,le.MAX_INDIVIDUAL_VARIANCE=.8,le.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),le.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),le.MAX_PIXEL_DRIFT=3,le.MAX_PATTERN_DRIFT=5,le.SKIPPED_ROW_COUNT_MAX=25,le.ROW_STEP=5,le.BARCODE_MIN_HEIGHT=10;class $e{constructor(e,t){if(t.length===0)throw new N;this.field=e;let i=t.length;if(i>1&&t[0]===0){let o=1;for(;o<i&&t[o]===0;)o++;o===i?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(i-o),te.arraycopy(t,o,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let o=0;for(let a of this.coefficients)o=this.field.add(o,a);return o}let t=this.coefficients[0],i=this.coefficients.length;for(let o=1;o<i;o++)t=this.field.add(this.field.multiply(e,t),this.coefficients[o]);return t}add(e){if(!this.field.equals(e.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,i=e.coefficients;if(t.length>i.length){let l=t;t=i,i=l}let o=new Int32Array(i.length),a=i.length-t.length;te.arraycopy(i,0,o,0,a);for(let l=a;l<i.length;l++)o[l]=this.field.add(t[l-a],i[l]);return new $e(this.field,o)}subtract(e){if(!this.field.equals(e.field))throw new N("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof $e?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new $e(this.field,new Int32Array([0]));let t=this.coefficients,i=t.length,o=e.coefficients,a=o.length,l=new Int32Array(i+a-1);for(let h=0;h<i;h++){let u=t[h];for(let g=0;g<a;g++)l[h+g]=this.field.add(l[h+g],this.field.multiply(u,o[g]))}return new $e(this.field,l)}negative(){let e=this.coefficients.length,t=new Int32Array(e);for(let i=0;i<e;i++)t[i]=this.field.subtract(0,this.coefficients[i]);return new $e(this.field,t)}multiplyScalar(e){if(e===0)return new $e(this.field,new Int32Array([0]));if(e===1)return this;let t=this.coefficients.length,i=new Int32Array(t);for(let o=0;o<t;o++)i[o]=this.field.multiply(this.coefficients[o],e);return new $e(this.field,i)}multiplyByMonomial(e,t){if(e<0)throw new N;if(t===0)return new $e(this.field,new Int32Array([0]));let i=this.coefficients.length,o=new Int32Array(i+e);for(let a=0;a<i;a++)o[a]=this.field.multiply(this.coefficients[a],t);return new $e(this.field,o)}toString(){let e=new Ie;for(let t=this.getDegree();t>=0;t--){let i=this.getCoefficient(t);i!==0&&(i<0?(e.append(" - "),i=-i):e.length()>0&&e.append(" + "),(t===0||i!==1)&&e.append(i),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()}}class $h{add(e,t){return(e+t)%this.modulus}subtract(e,t){return(this.modulus+e-t)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new N;return this.logTable[e]}inverse(e){if(e===0)throw new pi;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class Bs extends $h{constructor(e,t){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let i=1;for(let o=0;o<e;o++)this.expTable[o]=i,i=i*t%e;for(let o=0;o<e-1;o++)this.logTable[this.expTable[o]]=o;this.zero=new $e(this,new Int32Array([0])),this.one=new $e(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new N;if(t===0)return this.zero;let i=new Int32Array(e+1);return i[0]=t,new $e(this,i)}}Bs.PDF417_GF=new Bs($.NUMBER_OF_CODEWORDS,3);class Sa{constructor(){this.field=Bs.PDF417_GF}decode(e,t,i){let o=new $e(this.field,e),a=new Int32Array(t),l=!1;for(let b=t;b>0;b--){let T=o.evaluateAt(this.field.exp(b));a[t-b]=T,T!==0&&(l=!0)}if(!l)return 0;let h=this.field.getOne();if(i!=null)for(const b of i){let T=this.field.exp(e.length-1-b),v=new $e(this.field,new Int32Array([this.field.subtract(0,T),1]));h=h.multiply(v)}let u=new $e(this.field,a),g=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),u,t),x=g[0],m=g[1],A=this.findErrorLocations(x),I=this.findErrorMagnitudes(m,x,A);for(let b=0;b<A.length;b++){let T=e.length-1-this.field.log(A[b]);if(T<0)throw W.getChecksumInstance();e[T]=this.field.subtract(e[T],I[b])}return A.length}runEuclideanAlgorithm(e,t,i){if(e.getDegree()<t.getDegree()){let A=e;e=t,t=A}let o=e,a=t,l=this.field.getZero(),h=this.field.getOne();for(;a.getDegree()>=Math.round(i/2);){let A=o,I=l;if(o=a,l=h,o.isZero())throw W.getChecksumInstance();a=A;let b=this.field.getZero(),T=o.getCoefficient(o.getDegree()),v=this.field.inverse(T);for(;a.getDegree()>=o.getDegree()&&!a.isZero();){let D=a.getDegree()-o.getDegree(),F=this.field.multiply(a.getCoefficient(a.getDegree()),v);b=b.add(this.field.buildMonomial(D,F)),a=a.subtract(o.multiplyByMonomial(D,F))}h=b.multiply(l).subtract(I).negative()}let u=h.getCoefficient(0);if(u===0)throw W.getChecksumInstance();let g=this.field.inverse(u),x=h.multiply(g),m=a.multiply(g);return[x,m]}findErrorLocations(e){let t=e.getDegree(),i=new Int32Array(t),o=0;for(let a=1;a<this.field.getSize()&&o<t;a++)e.evaluateAt(a)===0&&(i[o]=this.field.inverse(a),o++);if(o!==t)throw W.getChecksumInstance();return i}findErrorMagnitudes(e,t,i){let o=t.getDegree(),a=new Int32Array(o);for(let g=1;g<=o;g++)a[o-g]=this.field.multiply(g,t.getCoefficient(g));let l=new $e(this.field,a),h=i.length,u=new Int32Array(h);for(let g=0;g<h;g++){let x=this.field.inverse(i[g]),m=this.field.subtract(0,e.evaluateAt(x)),A=this.field.inverse(l.evaluateAt(x));u[g]=this.field.multiply(m,A)}return u}}class Nn{constructor(e,t,i,o,a){e instanceof Nn?this.constructor_2(e):this.constructor_1(e,t,i,o,a)}constructor_1(e,t,i,o,a){const l=t==null||i==null,h=o==null||a==null;if(l&&h)throw new M;l?(t=new X(0,o.getY()),i=new X(0,a.getY())):h&&(o=new X(e.getWidth()-1,t.getY()),a=new X(e.getWidth()-1,i.getY())),this.image=e,this.topLeft=t,this.bottomLeft=i,this.topRight=o,this.bottomRight=a,this.minX=Math.trunc(Math.min(t.getX(),i.getX())),this.maxX=Math.trunc(Math.max(o.getX(),a.getX())),this.minY=Math.trunc(Math.min(t.getY(),o.getY())),this.maxY=Math.trunc(Math.max(i.getY(),a.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,t){return e==null?t:t==null?e:new Nn(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)}addMissingRows(e,t,i){let o=this.topLeft,a=this.bottomLeft,l=this.topRight,h=this.bottomRight;if(e>0){let u=i?this.topLeft:this.topRight,g=Math.trunc(u.getY()-e);g<0&&(g=0);let x=new X(u.getX(),g);i?o=x:l=x}if(t>0){let u=i?this.bottomLeft:this.bottomRight,g=Math.trunc(u.getY()+t);g>=this.image.getHeight()&&(g=this.image.getHeight()-1);let x=new X(u.getX(),g);i?a=x:h=x}return new Nn(this.image,o,a,l,h)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class eu{constructor(e,t,i,o){this.columnCount=e,this.errorCorrectionLevel=o,this.rowCountUpperPart=t,this.rowCountLowerPart=i,this.rowCount=t+i}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class yr{constructor(){this.buffer=""}static form(e,t){let i=-1;function o(l,h,u,g,x,m){if(l==="%%")return"%";if(t[++i]===void 0)return;l=g?parseInt(g.substr(1)):void 0;let A=x?parseInt(x.substr(1)):void 0,I;switch(m){case"s":I=t[i];break;case"c":I=t[i][0];break;case"f":I=parseFloat(t[i]).toFixed(l);break;case"p":I=parseFloat(t[i]).toPrecision(l);break;case"e":I=parseFloat(t[i]).toExponential(l);break;case"x":I=parseInt(t[i]).toString(A||16);break;case"d":I=parseFloat(parseInt(t[i],A||10).toPrecision(l)).toFixed(0);break}I=typeof I=="object"?JSON.stringify(I):(+I).toString(A);let b=parseInt(u),T=u&&u[0]+""=="0"?"0":" ";for(;I.length<b;)I=h!==void 0?I+T:T+I;return I}let a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,o)}format(e,...t){this.buffer+=yr.form(e,t)}toString(){return this.buffer}}class _r{constructor(e){this.boundingBox=new Nn(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let t=this.getCodeword(e);if(t!=null)return t;for(let i=1;i<_r.MAX_NEARBY_DISTANCE;i++){let o=this.imageRowToCodewordIndex(e)-i;if(o>=0&&(t=this.codewords[o],t!=null)||(o=this.imageRowToCodewordIndex(e)+i,o<this.codewords.length&&(t=this.codewords[o],t!=null)))return t}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new yr;let t=0;for(const i of this.codewords){if(i==null){e.format("%3d:    |   %n",t++);continue}e.format("%3d: %3d|%3d%n",t++,i.getRowNumber(),i.getValue())}return e.toString()}}_r.MAX_NEARBY_DISTANCE=5;class br{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)}getValue(){let e=-1,t=new Array;for(const[i,o]of this.values.entries()){const a={getKey:()=>i,getValue:()=>o};a.getValue()>e?(e=a.getValue(),t=[],t.push(a.getKey())):a.getValue()===e&&t.push(a.getKey())}return $.toIntArray(t)}getConfidence(e){return this.values.get(e)}}class va extends _r{constructor(e,t){super(e),this._isLeft=t}setRowNumbers(){for(let e of this.getCodewords())e!=null&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);let i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),a=this._isLeft?i.getBottomLeft():i.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(o.getY())),h=this.imageRowToCodewordIndex(Math.trunc(a.getY())),u=-1,g=1,x=0;for(let m=l;m<h;m++){if(t[m]==null)continue;let A=t[m],I=A.getRowNumber()-u;if(I===0)x++;else if(I===1)g=Math.max(g,x),x=1,u=A.getRowNumber();else if(I<0||A.getRowNumber()>=e.getRowCount()||I>m)t[m]=null;else{let b;g>2?b=(g-2)*I:b=I;let T=b>=m;for(let v=1;v<=b&&!T;v++)T=t[m-v]!=null;T?t[m]=null:(u=A.getRowNumber(),x=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let t=new Int32Array(e.getRowCount());for(let i of this.getCodewords())if(i!=null){let o=i.getRowNumber();if(o>=t.length)continue;t[o]++}return t}adjustIncompleteIndicatorColumnRowNumbers(e){let t=this.getBoundingBox(),i=this._isLeft?t.getTopLeft():t.getTopRight(),o=this._isLeft?t.getBottomLeft():t.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(i.getY())),l=this.imageRowToCodewordIndex(Math.trunc(o.getY())),h=this.getCodewords(),u=-1;for(let g=a;g<l;g++){if(h[g]==null)continue;let x=h[g];x.setRowNumberAsRowIndicatorColumn();let m=x.getRowNumber()-u;m===0||(m===1?u=x.getRowNumber():x.getRowNumber()>=e.getRowCount()?h[g]=null:u=x.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),t=new br,i=new br,o=new br,a=new br;for(let h of e){if(h==null)continue;h.setRowNumberAsRowIndicatorColumn();let u=h.getValue()%30,g=h.getRowNumber();switch(this._isLeft||(g+=2),g%3){case 0:i.setValue(u*3+1);break;case 1:a.setValue(u/3),o.setValue(u%3);break;case 2:t.setValue(u+1);break}}if(t.getValue().length===0||i.getValue().length===0||o.getValue().length===0||a.getValue().length===0||t.getValue()[0]<1||i.getValue()[0]+o.getValue()[0]<$.MIN_ROWS_IN_BARCODE||i.getValue()[0]+o.getValue()[0]>$.MAX_ROWS_IN_BARCODE)return null;let l=new eu(t.getValue()[0],i.getValue()[0],o.getValue()[0],a.getValue()[0]);return this.removeIncorrectCodewords(e,l),l}removeIncorrectCodewords(e,t){for(let i=0;i<e.length;i++){let o=e[i];if(e[i]==null)continue;let a=o.getValue()%30,l=o.getRowNumber();if(l>t.getRowCount()){e[i]=null;continue}switch(this._isLeft||(l+=2),l%3){case 0:a*3+1!==t.getRowCountUpperPart()&&(e[i]=null);break;case 1:(Math.trunc(a/3)!==t.getErrorCorrectionLevel()||a%3!==t.getRowCountLowerPart())&&(e[i]=null);break;case 2:a+1!==t.getColumnCount()&&(e[i]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Tr{constructor(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=$.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let t=1;t<this.barcodeColumnCount+1;t++){let i=this.detectionResultColumns[t].getCodewords();for(let o=0;o<i.length;o++)i[o]!=null&&(i[o].hasValidRowNumber()||this.adjustRowNumbers(t,o,i))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<e.length;i++)if(e[i]!=null&&t[i]!=null&&e[i].getRowNumber()===t[i].getRowNumber())for(let o=1;o<=this.barcodeColumnCount;o++){let a=this.detectionResultColumns[o].getCodewords()[i];a!=null&&(a.setRowNumber(e[i].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[o].getCodewords()[i]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<t.length;i++){if(t[i]==null)continue;let o=t[i].getRowNumber(),a=0;for(let l=this.barcodeColumnCount+1;l>0&&a<this.ADJUST_ROW_NUMBER_SKIP;l--){let h=this.detectionResultColumns[l].getCodewords()[i];h!=null&&(a=Tr.adjustRowNumberIfValid(o,a,h),h.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,t=this.detectionResultColumns[0].getCodewords();for(let i=0;i<t.length;i++){if(t[i]==null)continue;let o=t[i].getRowNumber(),a=0;for(let l=1;l<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;l++){let h=this.detectionResultColumns[l].getCodewords()[i];h!=null&&(a=Tr.adjustRowNumberIfValid(o,a,h),h.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,t,i){return i==null||i.hasValidRowNumber()||(i.isValidRowNumber(e)?(i.setRowNumber(e),t=0):++t),t}adjustRowNumbers(e,t,i){if(!this.detectionResultColumns[e-1])return;let o=i[t],a=this.detectionResultColumns[e-1].getCodewords(),l=a;this.detectionResultColumns[e+1]!=null&&(l=this.detectionResultColumns[e+1].getCodewords());let h=new Array(14);h[2]=a[t],h[3]=l[t],t>0&&(h[0]=i[t-1],h[4]=a[t-1],h[5]=l[t-1]),t>1&&(h[8]=i[t-2],h[10]=a[t-2],h[11]=l[t-2]),t<i.length-1&&(h[1]=i[t+1],h[6]=a[t+1],h[7]=l[t+1]),t<i.length-2&&(h[9]=i[t+2],h[12]=a[t+2],h[13]=l[t+2]);for(let u of h)if(Tr.adjustRowNumber(o,u))return}static adjustRowNumber(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,t){this.detectionResultColumns[e]=t}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let t=new yr;for(let i=0;i<e.getCodewords().length;i++){t.format("CW %3d:",i);for(let o=0;o<this.barcodeColumnCount+2;o++){if(this.detectionResultColumns[o]==null){t.format("    |   ");continue}let a=this.detectionResultColumns[o].getCodewords()[i];if(a==null){t.format("    |   ");continue}t.format(" %3d|%3d",a.getRowNumber(),a.getValue())}t.format("%n")}return t.toString()}}class Sr{constructor(e,t,i,o){this.rowNumber=Sr.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(i),this.value=Math.trunc(o)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==Sr.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}Sr.BARCODE_ROW_UNKNOWN=-1;class Ct{static initialize(){for(let e=0;e<$.SYMBOL_TABLE.length;e++){let t=$.SYMBOL_TABLE[e],i=t&1;for(let o=0;o<$.BARS_IN_MODULE;o++){let a=0;for(;(t&1)===i;)a+=1,t>>=1;i=t&1,Ct.RATIOS_TABLE[e]||(Ct.RATIOS_TABLE[e]=new Array($.BARS_IN_MODULE)),Ct.RATIOS_TABLE[e][$.BARS_IN_MODULE-o-1]=Math.fround(a/$.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let t=Ct.getDecodedCodewordValue(Ct.sampleBitCounts(e));return t!==-1?t:Ct.getClosestDecodedValue(e)}static sampleBitCounts(e){let t=xe.sum(e),i=new Int32Array($.BARS_IN_MODULE),o=0,a=0;for(let l=0;l<$.MODULES_IN_CODEWORD;l++){let h=t/(2*$.MODULES_IN_CODEWORD)+l*t/$.MODULES_IN_CODEWORD;a+e[o]<=h&&(a+=e[o],o++),i[o]++}return i}static getDecodedCodewordValue(e){let t=Ct.getBitValue(e);return $.getCodeword(t)===-1?-1:t}static getBitValue(e){let t=0;for(let i=0;i<e.length;i++)for(let o=0;o<e[i];o++)t=t<<1|(i%2===0?1:0);return Math.trunc(t)}static getClosestDecodedValue(e){let t=xe.sum(e),i=new Array($.BARS_IN_MODULE);if(t>1)for(let l=0;l<i.length;l++)i[l]=Math.fround(e[l]/t);let o=mi.MAX_VALUE,a=-1;this.bSymbolTableReady||Ct.initialize();for(let l=0;l<Ct.RATIOS_TABLE.length;l++){let h=0,u=Ct.RATIOS_TABLE[l];for(let g=0;g<$.BARS_IN_MODULE;g++){let x=Math.fround(u[g]-i[g]);if(h+=Math.fround(x*x),h>=o)break}h<o&&(o=h,a=$.SYMBOL_TABLE[l])}return a}}Ct.bSymbolTableReady=!1,Ct.RATIOS_TABLE=new Array($.SYMBOL_TABLE.length).map(p=>new Array($.BARS_IN_MODULE));class Na{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class Ra{static parseLong(e,t=void 0){return parseInt(e,t)}}class Oa extends E{}Oa.kind="NullPointerException";class tu{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,t,i){if(e==null)throw new Oa;if(t<0||t>e.length||i<0||t+i>e.length||t+i<0)throw new Qe;if(i===0)return;for(let o=0;o<i;o++)this.write(e[t+o])}flush(){}close(){}}class nu extends E{}class ru extends tu{constructor(e=32){if(super(),this.count=0,e<0)throw new N("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let i=this.buf.length<<1;if(i-e<0&&(i=e),i<0){if(e<0)throw new nu;i=K.MAX_VALUE}this.buf=ge.copyOfUint8Array(this.buf,i)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,t,i){if(t<0||t>e.length||i<0||t+i-e.length>0)throw new Qe;this.ensureCapacity(this.count+i),te.arraycopy(e,t,this.buf,this.count,i),this.count+=i}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return ge.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var ye;(function(p){p[p.ALPHA=0]="ALPHA",p[p.LOWER=1]="LOWER",p[p.MIXED=2]="MIXED",p[p.PUNCT=3]="PUNCT",p[p.ALPHA_SHIFT=4]="ALPHA_SHIFT",p[p.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(ye||(ye={}));function Da(){if(typeof window<"u")return window.BigInt||null;if(typeof Rr<"u")return Rr.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let _i;function fn(p){if(typeof _i>"u"&&(_i=Da()),_i===null)throw new Error("BigInt is not supported!");return _i(p)}function iu(){let p=[];p[0]=fn(1);let e=fn(900);p[1]=e;for(let t=2;t<16;t++)p[t]=p[t-1]*e;return p}class O{static decode(e,t){let i=new Ie(""),o=L.ISO8859_1;i.enableDecoding(o);let a=1,l=e[a++],h=new Na;for(;a<e[0];){switch(l){case O.TEXT_COMPACTION_MODE_LATCH:a=O.textCompaction(e,a,i);break;case O.BYTE_COMPACTION_MODE_LATCH:case O.BYTE_COMPACTION_MODE_LATCH_6:a=O.byteCompaction(l,e,o,a,i);break;case O.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[a++]);break;case O.NUMERIC_COMPACTION_MODE_LATCH:a=O.numericCompaction(e,a,i);break;case O.ECI_CHARSET:L.getCharacterSetECIByValue(e[a++]);break;case O.ECI_GENERAL_PURPOSE:a+=2;break;case O.ECI_USER_DEFINED:a++;break;case O.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=O.decodeMacroBlock(e,a,h);break;case O.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case O.MACRO_PDF417_TERMINATOR:throw new k;default:a--,a=O.textCompaction(e,a,i);break}if(a<e.length)l=e[a++];else throw k.getFormatInstance()}if(i.length()===0)throw k.getFormatInstance();let u=new wr(null,i.toString(),null,t);return u.setOther(h),u}static decodeMacroBlock(e,t,i){if(t+O.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw k.getFormatInstance();let o=new Int32Array(O.NUMBER_OF_SEQUENCE_CODEWORDS);for(let h=0;h<O.NUMBER_OF_SEQUENCE_CODEWORDS;h++,t++)o[h]=e[t];i.setSegmentIndex(K.parseInt(O.decodeBase900toBase10(o,O.NUMBER_OF_SEQUENCE_CODEWORDS)));let a=new Ie;t=O.textCompaction(e,t,a),i.setFileId(a.toString());let l=-1;for(e[t]===O.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(l=t+1);t<e[0];)switch(e[t]){case O.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case O.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let h=new Ie;t=O.textCompaction(e,t+1,h),i.setFileName(h.toString());break;case O.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let u=new Ie;t=O.textCompaction(e,t+1,u),i.setSender(u.toString());break;case O.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let g=new Ie;t=O.textCompaction(e,t+1,g),i.setAddressee(g.toString());break;case O.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let x=new Ie;t=O.numericCompaction(e,t+1,x),i.setSegmentCount(K.parseInt(x.toString()));break;case O.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let m=new Ie;t=O.numericCompaction(e,t+1,m),i.setTimestamp(Ra.parseLong(m.toString()));break;case O.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let A=new Ie;t=O.numericCompaction(e,t+1,A),i.setChecksum(K.parseInt(A.toString()));break;case O.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let I=new Ie;t=O.numericCompaction(e,t+1,I),i.setFileSize(Ra.parseLong(I.toString()));break;default:throw k.getFormatInstance()}break;case O.MACRO_PDF417_TERMINATOR:t++,i.setLastSegment(!0);break;default:throw k.getFormatInstance()}if(l!==-1){let h=t-l;i.isLastSegment()&&h--,i.setOptionalData(ge.copyOfRange(e,l,l+h))}return t}static textCompaction(e,t,i){let o=new Int32Array((e[0]-t)*2),a=new Int32Array((e[0]-t)*2),l=0,h=!1;for(;t<e[0]&&!h;){let u=e[t++];if(u<O.TEXT_COMPACTION_MODE_LATCH)o[l]=u/30,o[l+1]=u%30,l+=2;else switch(u){case O.TEXT_COMPACTION_MODE_LATCH:o[l++]=O.TEXT_COMPACTION_MODE_LATCH;break;case O.BYTE_COMPACTION_MODE_LATCH:case O.BYTE_COMPACTION_MODE_LATCH_6:case O.NUMERIC_COMPACTION_MODE_LATCH:case O.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case O.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case O.MACRO_PDF417_TERMINATOR:t--,h=!0;break;case O.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o[l]=O.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,u=e[t++],a[l]=u,l++;break}}return O.decodeTextCompaction(o,a,l,i),t}static decodeTextCompaction(e,t,i,o){let a=ye.ALPHA,l=ye.ALPHA,h=0;for(;h<i;){let u=e[h],g="";switch(a){case ye.ALPHA:if(u<26)g=String.fromCharCode(65+u);else switch(u){case 26:g=" ";break;case O.LL:a=ye.LOWER;break;case O.ML:a=ye.MIXED;break;case O.PS:l=a,a=ye.PUNCT_SHIFT;break;case O.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(t[h]);break;case O.TEXT_COMPACTION_MODE_LATCH:a=ye.ALPHA;break}break;case ye.LOWER:if(u<26)g=String.fromCharCode(97+u);else switch(u){case 26:g=" ";break;case O.AS:l=a,a=ye.ALPHA_SHIFT;break;case O.ML:a=ye.MIXED;break;case O.PS:l=a,a=ye.PUNCT_SHIFT;break;case O.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(t[h]);break;case O.TEXT_COMPACTION_MODE_LATCH:a=ye.ALPHA;break}break;case ye.MIXED:if(u<O.PL)g=O.MIXED_CHARS[u];else switch(u){case O.PL:a=ye.PUNCT;break;case 26:g=" ";break;case O.LL:a=ye.LOWER;break;case O.AL:a=ye.ALPHA;break;case O.PS:l=a,a=ye.PUNCT_SHIFT;break;case O.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(t[h]);break;case O.TEXT_COMPACTION_MODE_LATCH:a=ye.ALPHA;break}break;case ye.PUNCT:if(u<O.PAL)g=O.PUNCT_CHARS[u];else switch(u){case O.PAL:a=ye.ALPHA;break;case O.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(t[h]);break;case O.TEXT_COMPACTION_MODE_LATCH:a=ye.ALPHA;break}break;case ye.ALPHA_SHIFT:if(a=l,u<26)g=String.fromCharCode(65+u);else switch(u){case 26:g=" ";break;case O.TEXT_COMPACTION_MODE_LATCH:a=ye.ALPHA;break}break;case ye.PUNCT_SHIFT:if(a=l,u<O.PAL)g=O.PUNCT_CHARS[u];else switch(u){case O.PAL:a=ye.ALPHA;break;case O.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(t[h]);break;case O.TEXT_COMPACTION_MODE_LATCH:a=ye.ALPHA;break}break}g!==""&&o.append(g),h++}}static byteCompaction(e,t,i,o,a){let l=new ru,h=0,u=0,g=!1;switch(e){case O.BYTE_COMPACTION_MODE_LATCH:let x=new Int32Array(6),m=t[o++];for(;o<t[0]&&!g;)switch(x[h++]=m,u=900*u+m,m=t[o++],m){case O.TEXT_COMPACTION_MODE_LATCH:case O.BYTE_COMPACTION_MODE_LATCH:case O.NUMERIC_COMPACTION_MODE_LATCH:case O.BYTE_COMPACTION_MODE_LATCH_6:case O.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case O.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case O.MACRO_PDF417_TERMINATOR:o--,g=!0;break;default:if(h%5===0&&h>0){for(let A=0;A<6;++A)l.write(Number(fn(u)>>fn(8*(5-A))));u=0,h=0}break}o===t[0]&&m<O.TEXT_COMPACTION_MODE_LATCH&&(x[h++]=m);for(let A=0;A<h;A++)l.write(x[A]);break;case O.BYTE_COMPACTION_MODE_LATCH_6:for(;o<t[0]&&!g;){let A=t[o++];if(A<O.TEXT_COMPACTION_MODE_LATCH)h++,u=900*u+A;else switch(A){case O.TEXT_COMPACTION_MODE_LATCH:case O.BYTE_COMPACTION_MODE_LATCH:case O.NUMERIC_COMPACTION_MODE_LATCH:case O.BYTE_COMPACTION_MODE_LATCH_6:case O.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case O.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case O.MACRO_PDF417_TERMINATOR:o--,g=!0;break}if(h%5===0&&h>0){for(let I=0;I<6;++I)l.write(Number(fn(u)>>fn(8*(5-I))));u=0,h=0}}break}return a.append(mt.decode(l.toByteArray(),i)),o}static numericCompaction(e,t,i){let o=0,a=!1,l=new Int32Array(O.MAX_NUMERIC_CODEWORDS);for(;t<e[0]&&!a;){let h=e[t++];if(t===e[0]&&(a=!0),h<O.TEXT_COMPACTION_MODE_LATCH)l[o]=h,o++;else switch(h){case O.TEXT_COMPACTION_MODE_LATCH:case O.BYTE_COMPACTION_MODE_LATCH:case O.BYTE_COMPACTION_MODE_LATCH_6:case O.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case O.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case O.MACRO_PDF417_TERMINATOR:t--,a=!0;break}(o%O.MAX_NUMERIC_CODEWORDS===0||h===O.NUMERIC_COMPACTION_MODE_LATCH||a)&&o>0&&(i.append(O.decodeBase900toBase10(l,o)),o=0)}return t}static decodeBase900toBase10(e,t){let i=fn(0);for(let a=0;a<t;a++)i+=O.EXP900[t-a-1]*fn(e[a]);let o=i.toString();if(o.charAt(0)!=="1")throw new k;return o.substring(1)}}O.TEXT_COMPACTION_MODE_LATCH=900,O.BYTE_COMPACTION_MODE_LATCH=901,O.NUMERIC_COMPACTION_MODE_LATCH=902,O.BYTE_COMPACTION_MODE_LATCH_6=924,O.ECI_USER_DEFINED=925,O.ECI_GENERAL_PURPOSE=926,O.ECI_CHARSET=927,O.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,O.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,O.MACRO_PDF417_TERMINATOR=922,O.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,O.MAX_NUMERIC_CODEWORDS=15,O.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,O.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,O.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,O.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,O.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,O.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,O.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,O.PL=25,O.LL=27,O.AS=27,O.ML=28,O.AL=28,O.PS=29,O.PAL=29,O.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,O.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",O.EXP900=Da()?iu():[],O.NUMBER_OF_SEQUENCE_CODEWORDS=2;class ce{constructor(){}static decode(e,t,i,o,a,l,h){let u=new Nn(e,t,i,o,a),g=null,x=null,m;for(let b=!0;;b=!1){if(t!=null&&(g=ce.getRowIndicatorColumn(e,u,t,!0,l,h)),o!=null&&(x=ce.getRowIndicatorColumn(e,u,o,!1,l,h)),m=ce.merge(g,x),m==null)throw M.getNotFoundInstance();let T=m.getBoundingBox();if(b&&T!=null&&(T.getMinY()<u.getMinY()||T.getMaxY()>u.getMaxY()))u=T;else break}m.setBoundingBox(u);let A=m.getBarcodeColumnCount()+1;m.setDetectionResultColumn(0,g),m.setDetectionResultColumn(A,x);let I=g!=null;for(let b=1;b<=A;b++){let T=I?b:A-b;if(m.getDetectionResultColumn(T)!==void 0)continue;let v;T===0||T===A?v=new va(u,T===0):v=new _r(u),m.setDetectionResultColumn(T,v);let D=-1,F=D;for(let U=u.getMinY();U<=u.getMaxY();U++){if(D=ce.getStartColumn(m,T,U,I),D<0||D>u.getMaxX()){if(F===-1)continue;D=F}let B=ce.detectCodeword(e,u.getMinX(),u.getMaxX(),I,D,U,l,h);B!=null&&(v.setCodeword(U,B),F=D,l=Math.min(l,B.getWidth()),h=Math.max(h,B.getWidth()))}}return ce.createDecoderResult(m)}static merge(e,t){if(e==null&&t==null)return null;let i=ce.getBarcodeMetadata(e,t);if(i==null)return null;let o=Nn.merge(ce.adjustBoundingBox(e),ce.adjustBoundingBox(t));return new Tr(i,o)}static adjustBoundingBox(e){if(e==null)return null;let t=e.getRowHeights();if(t==null)return null;let i=ce.getMax(t),o=0;for(let h of t)if(o+=i-h,h>0)break;let a=e.getCodewords();for(let h=0;o>0&&a[h]==null;h++)o--;let l=0;for(let h=t.length-1;h>=0&&(l+=i-t[h],!(t[h]>0));h--);for(let h=a.length-1;l>0&&a[h]==null;h--)l--;return e.getBoundingBox().addMissingRows(o,l,e.isLeft())}static getMax(e){let t=-1;for(let i of e)t=Math.max(t,i);return t}static getBarcodeMetadata(e,t){let i;if(e==null||(i=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();let o;return t==null||(o=t.getBarcodeMetadata())==null?i:i.getColumnCount()!==o.getColumnCount()&&i.getErrorCorrectionLevel()!==o.getErrorCorrectionLevel()&&i.getRowCount()!==o.getRowCount()?null:i}static getRowIndicatorColumn(e,t,i,o,a,l){let h=new va(t,o);for(let u=0;u<2;u++){let g=u===0?1:-1,x=Math.trunc(Math.trunc(i.getX()));for(let m=Math.trunc(Math.trunc(i.getY()));m<=t.getMaxY()&&m>=t.getMinY();m+=g){let A=ce.detectCodeword(e,0,e.getWidth(),o,x,m,a,l);A!=null&&(h.setCodeword(m,A),o?x=A.getStartX():x=A.getEndX())}}return h}static adjustCodewordCount(e,t){let i=t[0][1],o=i.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-ce.getNumberOfECCodeWords(e.getBarcodeECLevel());if(o.length===0){if(a<1||a>$.MAX_CODEWORDS_IN_BARCODE)throw M.getNotFoundInstance();i.setValue(a)}else o[0]!==a&&i.setValue(a)}static createDecoderResult(e){let t=ce.createBarcodeMatrix(e);ce.adjustCodewordCount(e,t);let i=new Array,o=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],l=new Array;for(let u=0;u<e.getBarcodeRowCount();u++)for(let g=0;g<e.getBarcodeColumnCount();g++){let x=t[u][g+1].getValue(),m=u*e.getBarcodeColumnCount()+g;x.length===0?i.push(m):x.length===1?o[m]=x[0]:(l.push(m),a.push(x))}let h=new Array(a.length);for(let u=0;u<h.length;u++)h[u]=a[u];return ce.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),o,$.toIntArray(i),$.toIntArray(l),h)}static createDecoderResultFromAmbiguousValues(e,t,i,o,a){let l=new Int32Array(o.length),h=100;for(;h-- >0;){for(let u=0;u<l.length;u++)t[o[u]]=a[u][l[u]];try{return ce.decodeCodewords(t,e,i)}catch(u){if(!(u instanceof W))throw u}if(l.length===0)throw W.getChecksumInstance();for(let u=0;u<l.length;u++)if(l[u]<a[u].length-1){l[u]++;break}else if(l[u]=0,u===l.length-1)throw W.getChecksumInstance()}throw W.getChecksumInstance()}static createBarcodeMatrix(e){let t=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let o=0;o<t.length;o++)for(let a=0;a<t[o].length;a++)t[o][a]=new br;let i=0;for(let o of e.getDetectionResultColumns()){if(o!=null){for(let a of o.getCodewords())if(a!=null){let l=a.getRowNumber();if(l>=0){if(l>=t.length)continue;t[l][i].setValue(a.getValue())}}}i++}return t}static isValidBarcodeColumn(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1}static getStartColumn(e,t,i,o){let a=o?1:-1,l=null;if(ce.isValidBarcodeColumn(e,t-a)&&(l=e.getDetectionResultColumn(t-a).getCodeword(i)),l!=null)return o?l.getEndX():l.getStartX();if(l=e.getDetectionResultColumn(t).getCodewordNearby(i),l!=null)return o?l.getStartX():l.getEndX();if(ce.isValidBarcodeColumn(e,t-a)&&(l=e.getDetectionResultColumn(t-a).getCodewordNearby(i)),l!=null)return o?l.getEndX():l.getStartX();let h=0;for(;ce.isValidBarcodeColumn(e,t-a);){t-=a;for(let u of e.getDetectionResultColumn(t).getCodewords())if(u!=null)return(o?u.getEndX():u.getStartX())+a*h*(u.getEndX()-u.getStartX());h++}return o?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,t,i,o,a,l,h,u){a=ce.adjustCodewordStartColumn(e,t,i,o,a,l);let g=ce.getModuleBitCount(e,t,i,o,a,l);if(g==null)return null;let x,m=xe.sum(g);if(o)x=a+m;else{for(let b=0;b<g.length/2;b++){let T=g[b];g[b]=g[g.length-1-b],g[g.length-1-b]=T}x=a,a=x-m}if(!ce.checkCodewordSkew(m,h,u))return null;let A=Ct.getDecodedValue(g),I=$.getCodeword(A);return I===-1?null:new Sr(a,x,ce.getCodewordBucketNumber(A),I)}static getModuleBitCount(e,t,i,o,a,l){let h=a,u=new Int32Array(8),g=0,x=o?1:-1,m=o;for(;(o?h<i:h>=t)&&g<u.length;)e.get(h,l)===m?(u[g]++,h+=x):(g++,m=!m);return g===u.length||h===(o?i:t)&&g===u.length-1?u:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,t,i,o,a,l){let h=a,u=o?-1:1;for(let g=0;g<2;g++){for(;(o?h>=t:h<i)&&o===e.get(h,l);){if(Math.abs(a-h)>ce.CODEWORD_SKEW_SIZE)return a;h+=u}u=-u,o=!o}return h}static checkCodewordSkew(e,t,i){return t-ce.CODEWORD_SKEW_SIZE<=e&&e<=i+ce.CODEWORD_SKEW_SIZE}static decodeCodewords(e,t,i){if(e.length===0)throw k.getFormatInstance();let o=1<<t+1,a=ce.correctErrors(e,i,o);ce.verifyCodewordCount(e,o);let l=O.decode(e,""+t);return l.setErrorsCorrected(a),l.setErasures(i.length),l}static correctErrors(e,t,i){if(t!=null&&t.length>i/2+ce.MAX_ERRORS||i<0||i>ce.MAX_EC_CODEWORDS)throw W.getChecksumInstance();return ce.errorCorrection.decode(e,i,t)}static verifyCodewordCount(e,t){if(e.length<4)throw k.getFormatInstance();let i=e[0];if(i>e.length)throw k.getFormatInstance();if(i===0)if(t<e.length)e[0]=e.length-t;else throw k.getFormatInstance()}static getBitCountForCodeword(e){let t=new Int32Array(8),i=0,o=t.length-1;for(;!((e&1)!==i&&(i=e&1,o--,o<0));)t[o]++,e>>=1;return t}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return ce.getCodewordBucketNumber(ce.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let t=new yr;for(let i=0;i<e.length;i++){t.format("Row %2d: ",i);for(let o=0;o<e[i].length;o++){let a=e[i][o];a.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}t.format("%n")}return t.toString()}}ce.CODEWORD_SKEW_SIZE=2,ce.MAX_ERRORS=3,ce.MAX_EC_CODEWORDS=512,ce.errorCorrection=new Sa;class et{decode(e,t=null){let i=et.decode(e,t,!1);if(i==null||i.length===0||i[0]==null)throw M.getNotFoundInstance();return i[0]}decodeMultiple(e,t=null){try{return et.decode(e,t,!0)}catch(i){throw i instanceof k||i instanceof W?M.getNotFoundInstance():i}}static decode(e,t,i){const o=new Array,a=le.detectMultiple(e,t,i);for(const l of a.getPoints()){const h=ce.decode(a.getBits(),l[4],l[5],l[6],l[7],et.getMinCodewordWidth(l),et.getMaxCodewordWidth(l)),u=new ft(h.getText(),h.getRawBytes(),void 0,l,q.PDF_417);u.putMetadata(Ye.ERROR_CORRECTION_LEVEL,h.getECLevel());const g=h.getOther();g!=null&&u.putMetadata(Ye.PDF417_EXTRA_METADATA,g),o.push(u)}return o.map(l=>l)}static getMaxWidth(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMinWidth(e,t){return e==null||t==null?K.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(et.getMaxWidth(e[0],e[4]),et.getMaxWidth(e[6],e[2])*$.MODULES_IN_CODEWORD/$.MODULES_IN_STOP_PATTERN),Math.max(et.getMaxWidth(e[1],e[5]),et.getMaxWidth(e[7],e[3])*$.MODULES_IN_CODEWORD/$.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(et.getMinWidth(e[0],e[4]),et.getMinWidth(e[6],e[2])*$.MODULES_IN_CODEWORD/$.MODULES_IN_STOP_PATTERN),Math.min(et.getMinWidth(e[1],e[5]),et.getMinWidth(e[7],e[3])*$.MODULES_IN_CODEWORD/$.MODULES_IN_STOP_PATTERN)))}reset(){}}class bi extends E{}bi.kind="ReaderException";class Ma{constructor(e,t){this.verbose=e===!0,t&&this.setHints(t)}decode(e,t){return t&&this.setHints(t),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const t=!c(e)&&e.get(ne.TRY_HARDER)===!0,i=c(e)?null:e.get(ne.POSSIBLE_FORMATS),o=new Array;if(!c(i)){const a=i.some(l=>l===q.UPC_A||l===q.UPC_E||l===q.EAN_13||l===q.EAN_8||l===q.CODABAR||l===q.CODE_39||l===q.CODE_93||l===q.CODE_128||l===q.ITF||l===q.RSS_14||l===q.RSS_EXPANDED);a&&!t&&o.push(new Kn(e,this.verbose)),i.includes(q.QR_CODE)&&o.push(new un),i.includes(q.DATA_MATRIX)&&o.push(new hn),i.includes(q.AZTEC)&&o.push(new Ei),i.includes(q.PDF_417)&&o.push(new et),a&&t&&o.push(new Kn(e,this.verbose))}o.length===0&&(t||o.push(new Kn(e,this.verbose)),o.push(new un),o.push(new hn),o.push(new Ei),o.push(new et),t&&o.push(new Kn(e,this.verbose))),this.readers=o}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new bi("No readers where selected, nothing can be read.");for(const t of this.readers)try{return t.decode(e,this.hints)}catch(i){if(i instanceof bi)continue}throw new M("No MultiFormat Readers were able to detect the code.")}}class su extends bn{constructor(e=null,t=500){const i=new Ma;i.setHints(e),super(i,t)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class ou extends bn{constructor(e=500){super(new et,e)}}class au extends bn{constructor(e=500){super(new un,e)}}var Ls;(function(p){p[p.ERROR_CORRECTION=0]="ERROR_CORRECTION",p[p.CHARACTER_SET=1]="CHARACTER_SET",p[p.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",p[p.MIN_SIZE=3]="MIN_SIZE",p[p.MAX_SIZE=4]="MAX_SIZE",p[p.MARGIN=5]="MARGIN",p[p.PDF417_COMPACT=6]="PDF417_COMPACT",p[p.PDF417_COMPACTION=7]="PDF417_COMPACTION",p[p.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",p[p.AZTEC_LAYERS=9]="AZTEC_LAYERS",p[p.QR_VERSION=10]="QR_VERSION"})(Ls||(Ls={}));var Xe=Ls;class Fs{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new wt(e,Int32Array.from([1])))}buildGenerator(e){const t=this.cachedGenerators;if(e>=t.length){let i=t[t.length-1];const o=this.field;for(let a=t.length;a<=e;a++){const l=i.multiply(new wt(o,Int32Array.from([1,o.exp(a-1+o.getGeneratorBase())])));t.push(l),i=l}}return t[e]}encode(e,t){if(t===0)throw new N("No error correction bytes");const i=e.length-t;if(i<=0)throw new N("No data bytes provided");const o=this.buildGenerator(t),a=new Int32Array(i);te.arraycopy(e,0,a,0,i);let l=new wt(this.field,a);l=l.multiplyByMonomial(t,1);const u=l.divide(o)[1].getCoefficients(),g=t-u.length;for(let x=0;x<g;x++)e[i+x]=0;te.arraycopy(u,0,e,i+g,u.length)}}class Le{constructor(){}static applyMaskPenaltyRule1(e){return Le.applyMaskPenaltyRule1Internal(e,!0)+Le.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let t=0;const i=e.getArray(),o=e.getWidth(),a=e.getHeight();for(let l=0;l<a-1;l++){const h=i[l];for(let u=0;u<o-1;u++){const g=h[u];g===h[u+1]&&g===i[l+1][u]&&g===i[l+1][u+1]&&t++}}return Le.N2*t}static applyMaskPenaltyRule3(e){let t=0;const i=e.getArray(),o=e.getWidth(),a=e.getHeight();for(let l=0;l<a;l++)for(let h=0;h<o;h++){const u=i[l];h+6<o&&u[h]===1&&u[h+1]===0&&u[h+2]===1&&u[h+3]===1&&u[h+4]===1&&u[h+5]===0&&u[h+6]===1&&(Le.isWhiteHorizontal(u,h-4,h)||Le.isWhiteHorizontal(u,h+7,h+11))&&t++,l+6<a&&i[l][h]===1&&i[l+1][h]===0&&i[l+2][h]===1&&i[l+3][h]===1&&i[l+4][h]===1&&i[l+5][h]===0&&i[l+6][h]===1&&(Le.isWhiteVertical(i,h,l-4,l)||Le.isWhiteVertical(i,h,l+7,l+11))&&t++}return t*Le.N3}static isWhiteHorizontal(e,t,i){t=Math.max(t,0),i=Math.min(i,e.length);for(let o=t;o<i;o++)if(e[o]===1)return!1;return!0}static isWhiteVertical(e,t,i,o){i=Math.max(i,0),o=Math.min(o,e.length);for(let a=i;a<o;a++)if(e[a][t]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let t=0;const i=e.getArray(),o=e.getWidth(),a=e.getHeight();for(let u=0;u<a;u++){const g=i[u];for(let x=0;x<o;x++)g[x]===1&&t++}const l=e.getHeight()*e.getWidth();return Math.floor(Math.abs(t*2-l)*10/l)*Le.N4}static getDataMaskBit(e,t,i){let o,a;switch(e){case 0:o=i+t&1;break;case 1:o=i&1;break;case 2:o=t%3;break;case 3:o=(i+t)%3;break;case 4:o=Math.floor(i/2)+Math.floor(t/3)&1;break;case 5:a=i*t,o=(a&1)+a%3;break;case 6:a=i*t,o=(a&1)+a%3&1;break;case 7:a=i*t,o=a%3+(i+t&1)&1;break;default:throw new N("Invalid mask pattern: "+e)}return o===0}static applyMaskPenaltyRule1Internal(e,t){let i=0;const o=t?e.getHeight():e.getWidth(),a=t?e.getWidth():e.getHeight(),l=e.getArray();for(let h=0;h<o;h++){let u=0,g=-1;for(let x=0;x<a;x++){const m=t?l[h][x]:l[x][h];m===g?u++:(u>=5&&(i+=Le.N1+(u-5)),u=1,g=m)}u>=5&&(i+=Le.N1+(u-5))}return i}}Le.N1=3,Le.N2=3,Le.N3=40,Le.N4=10;class Ti{constructor(e,t){this.width=e,this.height=t;const i=new Array(t);for(let o=0;o!==t;o++)i[o]=new Uint8Array(e);this.bytes=i}getHeight(){return this.height}getWidth(){return this.width}get(e,t){return this.bytes[t][e]}getArray(){return this.bytes}setNumber(e,t,i){this.bytes[t][e]=i}setBoolean(e,t,i){this.bytes[t][e]=i?1:0}clear(e){for(const t of this.bytes)ge.fill(t,e)}equals(e){if(!(e instanceof Ti))return!1;const t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(let i=0,o=this.height;i<o;++i){const a=this.bytes[i],l=t.bytes[i];for(let h=0,u=this.width;h<u;++h)if(a[h]!==l[h])return!1}return!0}toString(){const e=new Ie;for(let t=0,i=this.height;t<i;++t){const o=this.bytes[t];for(let a=0,l=this.width;a<l;++a)switch(o[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class Rn{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new Ie;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<Rn.NUM_MASK_PATTERNS}}Rn.NUM_MASK_PATTERNS=8;class be extends E{}be.kind="WriterException";class Q{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,t,i,o,a){Q.clearMatrix(a),Q.embedBasicPatterns(i,a),Q.embedTypeInfo(t,o,a),Q.maybeEmbedVersionInfo(i,a),Q.embedDataBits(e,o,a)}static embedBasicPatterns(e,t){Q.embedPositionDetectionPatternsAndSeparators(t),Q.embedDarkDotAtLeftBottomCorner(t),Q.maybeEmbedPositionAdjustmentPatterns(e,t),Q.embedTimingPatterns(t)}static embedTypeInfo(e,t,i){const o=new J;Q.makeTypeInfoBits(e,t,o);for(let a=0,l=o.getSize();a<l;++a){const h=o.get(o.getSize()-1-a),u=Q.TYPE_INFO_COORDINATES[a],g=u[0],x=u[1];if(i.setBoolean(g,x,h),a<8){const m=i.getWidth()-a-1,A=8;i.setBoolean(m,A,h)}else{const A=i.getHeight()-7+(a-8);i.setBoolean(8,A,h)}}}static maybeEmbedVersionInfo(e,t){if(e.getVersionNumber()<7)return;const i=new J;Q.makeVersionInfoBits(e,i);let o=6*3-1;for(let a=0;a<6;++a)for(let l=0;l<3;++l){const h=i.get(o);o--,t.setBoolean(a,t.getHeight()-11+l,h),t.setBoolean(t.getHeight()-11+l,a,h)}}static embedDataBits(e,t,i){let o=0,a=-1,l=i.getWidth()-1,h=i.getHeight()-1;for(;l>0;){for(l===6&&(l-=1);h>=0&&h<i.getHeight();){for(let u=0;u<2;++u){const g=l-u;if(!Q.isEmpty(i.get(g,h)))continue;let x;o<e.getSize()?(x=e.get(o),++o):x=!1,t!==255&&Le.getDataMaskBit(t,g,h)&&(x=!x),i.setBoolean(g,h,x)}h+=a}a=-a,h+=a,l-=2}if(o!==e.getSize())throw new be("Not all bits consumed: "+o+"/"+e.getSize())}static findMSBSet(e){return 32-K.numberOfLeadingZeros(e)}static calculateBCHCode(e,t){if(t===0)throw new N("0 polynomial");const i=Q.findMSBSet(t);for(e<<=i-1;Q.findMSBSet(e)>=i;)e^=t<<Q.findMSBSet(e)-i;return e}static makeTypeInfoBits(e,t,i){if(!Rn.isValidMaskPattern(t))throw new be("Invalid mask pattern");const o=e.getBits()<<3|t;i.appendBits(o,5);const a=Q.calculateBCHCode(o,Q.TYPE_INFO_POLY);i.appendBits(a,10);const l=new J;if(l.appendBits(Q.TYPE_INFO_MASK_PATTERN,15),i.xor(l),i.getSize()!==15)throw new be("should not happen but we got: "+i.getSize())}static makeVersionInfoBits(e,t){t.appendBits(e.getVersionNumber(),6);const i=Q.calculateBCHCode(e.getVersionNumber(),Q.VERSION_INFO_POLY);if(t.appendBits(i,12),t.getSize()!==18)throw new be("should not happen but we got: "+t.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let t=8;t<e.getWidth()-8;++t){const i=(t+1)%2;Q.isEmpty(e.get(t,6))&&e.setNumber(t,6,i),Q.isEmpty(e.get(6,t))&&e.setNumber(6,t,i)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new be;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,t,i){for(let o=0;o<8;++o){if(!Q.isEmpty(i.get(e+o,t)))throw new be;i.setNumber(e+o,t,0)}}static embedVerticalSeparationPattern(e,t,i){for(let o=0;o<7;++o){if(!Q.isEmpty(i.get(e,t+o)))throw new be;i.setNumber(e,t+o,0)}}static embedPositionAdjustmentPattern(e,t,i){for(let o=0;o<5;++o){const a=Q.POSITION_ADJUSTMENT_PATTERN[o];for(let l=0;l<5;++l)i.setNumber(e+l,t+o,a[l])}}static embedPositionDetectionPattern(e,t,i){for(let o=0;o<7;++o){const a=Q.POSITION_DETECTION_PATTERN[o];for(let l=0;l<7;++l)i.setNumber(e+l,t+o,a[l])}}static embedPositionDetectionPatternsAndSeparators(e){const t=Q.POSITION_DETECTION_PATTERN[0].length;Q.embedPositionDetectionPattern(0,0,e),Q.embedPositionDetectionPattern(e.getWidth()-t,0,e),Q.embedPositionDetectionPattern(0,e.getWidth()-t,e);const i=8;Q.embedHorizontalSeparationPattern(0,i-1,e),Q.embedHorizontalSeparationPattern(e.getWidth()-i,i-1,e),Q.embedHorizontalSeparationPattern(0,e.getWidth()-i,e);const o=7;Q.embedVerticalSeparationPattern(o,0,e),Q.embedVerticalSeparationPattern(e.getHeight()-o-1,0,e),Q.embedVerticalSeparationPattern(o,e.getHeight()-o,e)}static maybeEmbedPositionAdjustmentPatterns(e,t){if(e.getVersionNumber()<2)return;const i=e.getVersionNumber()-1,o=Q.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[i];for(let a=0,l=o.length;a!==l;a++){const h=o[a];if(h>=0)for(let u=0;u!==l;u++){const g=o[u];g>=0&&Q.isEmpty(t.get(g,h))&&Q.embedPositionAdjustmentPattern(g-2,h-2,t)}}}}Q.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Q.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Q.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Q.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Q.VERSION_INFO_POLY=7973,Q.TYPE_INFO_POLY=1335,Q.TYPE_INFO_MASK_PATTERN=21522;class lu{constructor(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Oe{constructor(){}static calculateMaskPenalty(e){return Le.applyMaskPenaltyRule1(e)+Le.applyMaskPenaltyRule2(e)+Le.applyMaskPenaltyRule3(e)+Le.applyMaskPenaltyRule4(e)}static encode(e,t,i=null){let o=Oe.DEFAULT_BYTE_MODE_ENCODING;const a=i!==null&&i.get(Xe.CHARACTER_SET)!==void 0;a&&(o=i.get(Xe.CHARACTER_SET).toString());const l=this.chooseMode(e,o),h=new J;if(l===Z.BYTE&&(a||Oe.DEFAULT_BYTE_MODE_ENCODING!==o)){const U=L.getCharacterSetECIByName(o);U!==void 0&&this.appendECI(U,h)}this.appendModeInfo(l,h);const u=new J;this.appendBytes(e,l,u,o);let g;if(i!==null&&i.get(Xe.QR_VERSION)!==void 0){const U=Number.parseInt(i.get(Xe.QR_VERSION).toString(),10);g=Y.getVersionForNumber(U);const B=this.calculateBitsNeeded(l,h,u,g);if(!this.willFit(B,g,t))throw new be("Data too big for requested version")}else g=this.recommendVersion(t,l,h,u);const x=new J;x.appendBitArray(h);const m=l===Z.BYTE?u.getSizeInBytes():e.length;this.appendLengthInfo(m,g,l,x),x.appendBitArray(u);const A=g.getECBlocksForLevel(t),I=g.getTotalCodewords()-A.getTotalECCodewords();this.terminateBits(I,x);const b=this.interleaveWithECBytes(x,g.getTotalCodewords(),I,A.getNumBlocks()),T=new Rn;T.setECLevel(t),T.setMode(l),T.setVersion(g);const v=g.getDimensionForVersion(),D=new Ti(v,v),F=this.chooseMaskPattern(b,t,g,D);return T.setMaskPattern(F),Q.buildMatrix(b,t,g,F,D),T.setMatrix(D),T}static recommendVersion(e,t,i,o){const a=this.calculateBitsNeeded(t,i,o,Y.getVersionForNumber(1)),l=this.chooseVersion(a,e),h=this.calculateBitsNeeded(t,i,o,l);return this.chooseVersion(h,e)}static calculateBitsNeeded(e,t,i,o){return t.getSize()+e.getCharacterCountBits(o)+i.getSize()}static getAlphanumericCode(e){return e<Oe.ALPHANUMERIC_TABLE.length?Oe.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,t=null){if(L.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return Z.KANJI;let i=!1,o=!1;for(let a=0,l=e.length;a<l;++a){const h=e.charAt(a);if(Oe.isDigit(h))i=!0;else if(this.getAlphanumericCode(h.charCodeAt(0))!==-1)o=!0;else return Z.BYTE}return o?Z.ALPHANUMERIC:i?Z.NUMERIC:Z.BYTE}static isOnlyDoubleByteKanji(e){let t;try{t=mt.encode(e,L.SJIS)}catch{return!1}const i=t.length;if(i%2!==0)return!1;for(let o=0;o<i;o+=2){const a=t[o]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0}static chooseMaskPattern(e,t,i,o){let a=Number.MAX_SAFE_INTEGER,l=-1;for(let h=0;h<Rn.NUM_MASK_PATTERNS;h++){Q.buildMatrix(e,t,i,h,o);let u=this.calculateMaskPenalty(o);u<a&&(a=u,l=h)}return l}static chooseVersion(e,t){for(let i=1;i<=40;i++){const o=Y.getVersionForNumber(i);if(Oe.willFit(e,o,t))return o}throw new be("Data too big")}static willFit(e,t,i){const o=t.getTotalCodewords(),l=t.getECBlocksForLevel(i).getTotalECCodewords(),h=o-l,u=(e+7)/8;return h>=u}static terminateBits(e,t){const i=e*8;if(t.getSize()>i)throw new be("data bits cannot fit in the QR Code"+t.getSize()+" > "+i);for(let l=0;l<4&&t.getSize()<i;++l)t.appendBit(!1);const o=t.getSize()&7;if(o>0)for(let l=o;l<8;l++)t.appendBit(!1);const a=e-t.getSizeInBytes();for(let l=0;l<a;++l)t.appendBits((l&1)===0?236:17,8);if(t.getSize()!==i)throw new be("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,t,i,o,a,l){if(o>=i)throw new be("Block ID too large");const h=e%i,u=i-h,g=Math.floor(e/i),x=g+1,m=Math.floor(t/i),A=m+1,I=g-m,b=x-A;if(I!==b)throw new be("EC bytes mismatch");if(i!==u+h)throw new be("RS blocks mismatch");if(e!==(m+I)*u+(A+b)*h)throw new be("Total bytes mismatch");o<u?(a[0]=m,l[0]=I):(a[0]=A,l[0]=b)}static interleaveWithECBytes(e,t,i,o){if(e.getSizeInBytes()!==i)throw new be("Number of bits and data bytes does not match");let a=0,l=0,h=0;const u=new Array;for(let x=0;x<o;++x){const m=new Int32Array(1),A=new Int32Array(1);Oe.getNumDataBytesAndNumECBytesForBlockID(t,i,o,x,m,A);const I=m[0],b=new Uint8Array(I);e.toBytes(8*a,b,0,I);const T=Oe.generateECBytes(b,A[0]);u.push(new lu(b,T)),l=Math.max(l,I),h=Math.max(h,T.length),a+=m[0]}if(i!==a)throw new be("Data bytes does not match offset");const g=new J;for(let x=0;x<l;++x)for(const m of u){const A=m.getDataBytes();x<A.length&&g.appendBits(A[x],8)}for(let x=0;x<h;++x)for(const m of u){const A=m.getErrorCorrectionBytes();x<A.length&&g.appendBits(A[x],8)}if(t!==g.getSizeInBytes())throw new be("Interleaving error: "+t+" and "+g.getSizeInBytes()+" differ.");return g}static generateECBytes(e,t){const i=e.length,o=new Int32Array(i+t);for(let l=0;l<i;l++)o[l]=e[l]&255;new Fs(me.QR_CODE_FIELD_256).encode(o,t);const a=new Uint8Array(t);for(let l=0;l<t;l++)a[l]=o[i+l];return a}static appendModeInfo(e,t){t.appendBits(e.getBits(),4)}static appendLengthInfo(e,t,i,o){const a=i.getCharacterCountBits(t);if(e>=1<<a)throw new be(e+" is bigger than "+((1<<a)-1));o.appendBits(e,a)}static appendBytes(e,t,i,o){switch(t){case Z.NUMERIC:Oe.appendNumericBytes(e,i);break;case Z.ALPHANUMERIC:Oe.appendAlphanumericBytes(e,i);break;case Z.BYTE:Oe.append8BitBytes(e,i,o);break;case Z.KANJI:Oe.appendKanjiBytes(e,i);break;default:throw new be("Invalid mode: "+t)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const t=Oe.getDigit(e);return t>=0&&t<=9}static appendNumericBytes(e,t){const i=e.length;let o=0;for(;o<i;){const a=Oe.getDigit(e.charAt(o));if(o+2<i){const l=Oe.getDigit(e.charAt(o+1)),h=Oe.getDigit(e.charAt(o+2));t.appendBits(a*100+l*10+h,10),o+=3}else if(o+1<i){const l=Oe.getDigit(e.charAt(o+1));t.appendBits(a*10+l,7),o+=2}else t.appendBits(a,4),o++}}static appendAlphanumericBytes(e,t){const i=e.length;let o=0;for(;o<i;){const a=Oe.getAlphanumericCode(e.charCodeAt(o));if(a===-1)throw new be;if(o+1<i){const l=Oe.getAlphanumericCode(e.charCodeAt(o+1));if(l===-1)throw new be;t.appendBits(a*45+l,11),o+=2}else t.appendBits(a,6),o++}}static append8BitBytes(e,t,i){let o;try{o=mt.encode(e,i)}catch(a){throw new be(a)}for(let a=0,l=o.length;a!==l;a++){const h=o[a];t.appendBits(h,8)}}static appendKanjiBytes(e,t){let i;try{i=mt.encode(e,L.SJIS)}catch(a){throw new be(a)}const o=i.length;for(let a=0;a<o;a+=2){const l=i[a]&255,h=i[a+1]&255,u=l<<8&4294967295|h;let g=-1;if(u>=33088&&u<=40956?g=u-33088:u>=57408&&u<=60351&&(g=u-49472),g===-1)throw new be("Invalid byte sequence");const x=(g>>8)*192+(g&255);t.appendBits(x,13)}}static appendECI(e,t){t.appendBits(Z.ECI.getBits(),4),t.appendBits(e.getValue(),8)}}Oe.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Oe.DEFAULT_BYTE_MODE_ENCODING=L.UTF8.getName();class On{write(e,t,i,o=null){if(e.length===0)throw new N("Found empty contents");if(t<0||i<0)throw new N("Requested dimensions are too small: "+t+"x"+i);let a=Ne.L,l=On.QUIET_ZONE_SIZE;o!==null&&(o.get(Xe.ERROR_CORRECTION)!==void 0&&(a=Ne.fromString(o.get(Xe.ERROR_CORRECTION).toString())),o.get(Xe.MARGIN)!==void 0&&(l=Number.parseInt(o.get(Xe.MARGIN).toString(),10)));const h=Oe.encode(e,a,o);return this.renderResult(h,t,i,l)}writeToDom(e,t,i,o,a=null){typeof e=="string"&&(e=document.querySelector(e));const l=this.write(t,i,o,a);e&&e.appendChild(l)}renderResult(e,t,i,o){const a=e.getMatrix();if(a===null)throw new Ut;const l=a.getWidth(),h=a.getHeight(),u=l+o*2,g=h+o*2,x=Math.max(t,u),m=Math.max(i,g),A=Math.min(Math.floor(x/u),Math.floor(m/g)),I=Math.floor((x-l*A)/2),b=Math.floor((m-h*A)/2),T=this.createSVGElement(x,m);for(let v=0,D=b;v<h;v++,D+=A)for(let F=0,U=I;F<l;F++,U+=A)if(a.get(F,v)===1){const B=this.createSvgRectElement(U,D,A,A);T.appendChild(B)}return T}createSVGElement(e,t){const i=document.createElementNS(On.SVG_NS,"svg");return i.setAttributeNS(null,"height",e.toString()),i.setAttributeNS(null,"width",t.toString()),i}createSvgRectElement(e,t,i,o){const a=document.createElementNS(On.SVG_NS,"rect");return a.setAttributeNS(null,"x",e.toString()),a.setAttributeNS(null,"y",t.toString()),a.setAttributeNS(null,"height",i.toString()),a.setAttributeNS(null,"width",o.toString()),a.setAttributeNS(null,"fill","#000000"),a}}On.QUIET_ZONE_SIZE=4,On.SVG_NS="http://www.w3.org/2000/svg";class qn{encode(e,t,i,o,a){if(e.length===0)throw new N("Found empty contents");if(t!==q.QR_CODE)throw new N("Can only encode QR_CODE, but got "+t);if(i<0||o<0)throw new N(`Requested dimensions are too small: ${i}x${o}`);let l=Ne.L,h=qn.QUIET_ZONE_SIZE;a!==null&&(a.get(Xe.ERROR_CORRECTION)!==void 0&&(l=Ne.fromString(a.get(Xe.ERROR_CORRECTION).toString())),a.get(Xe.MARGIN)!==void 0&&(h=Number.parseInt(a.get(Xe.MARGIN).toString(),10)));const u=Oe.encode(e,l,a);return qn.renderResult(u,i,o,h)}static renderResult(e,t,i,o){const a=e.getMatrix();if(a===null)throw new Ut;const l=a.getWidth(),h=a.getHeight(),u=l+o*2,g=h+o*2,x=Math.max(t,u),m=Math.max(i,g),A=Math.min(Math.floor(x/u),Math.floor(m/g)),I=Math.floor((x-l*A)/2),b=Math.floor((m-h*A)/2),T=new je(x,m);for(let v=0,D=b;v<h;v++,D+=A)for(let F=0,U=I;F<l;F++,U+=A)a.get(F,v)===1&&T.setRegion(U,D,A,A);return T}}qn.QUIET_ZONE_SIZE=4;class cu{encode(e,t,i,o,a){let l;switch(t){case q.QR_CODE:l=new qn;break;default:throw new N("No encoder available for format "+t)}return l.encode(e,t,i,o,a)}}class Wt extends mr{constructor(e,t,i,o,a,l,h,u){if(super(l,h),this.yuvData=e,this.dataWidth=t,this.dataHeight=i,this.left=o,this.top=a,o+l>t||a+h>i)throw new N("Crop rectangle does not fit within image data.");u&&this.reverseHorizontal(l,h)}getRow(e,t){if(e<0||e>=this.getHeight())throw new N("Requested row is outside the image: "+e);const i=this.getWidth();(t==null||t.length<i)&&(t=new Uint8ClampedArray(i));const o=(e+this.top)*this.dataWidth+this.left;return te.arraycopy(this.yuvData,o,t,0,i),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;const i=e*t,o=new Uint8ClampedArray(i);let a=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return te.arraycopy(this.yuvData,a,o,0,i),o;for(let l=0;l<t;l++){const h=l*e;te.arraycopy(this.yuvData,a,o,h,e),a+=this.dataWidth}return o}isCropSupported(){return!0}crop(e,t,i,o){return new Wt(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+t,i,o,!1)}renderThumbnail(){const e=this.getWidth()/Wt.THUMBNAIL_SCALE_FACTOR,t=this.getHeight()/Wt.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(e*t),o=this.yuvData;let a=this.top*this.dataWidth+this.left;for(let l=0;l<t;l++){const h=l*e;for(let u=0;u<e;u++){const g=o[a+u*Wt.THUMBNAIL_SCALE_FACTOR]&255;i[h+u]=4278190080|g*65793}a+=this.dataWidth*Wt.THUMBNAIL_SCALE_FACTOR}return i}getThumbnailWidth(){return this.getWidth()/Wt.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Wt.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,t){const i=this.yuvData;for(let o=0,a=this.top*this.dataWidth+this.left;o<t;o++,a+=this.dataWidth){const l=a+e/2;for(let h=a,u=a+e-1;h<l;h++,u--){const g=i[h];i[h]=i[u],i[u]=g}}}invert(){return new sn(this)}}Wt.THUMBNAIL_SCALE_FACTOR=2;class Us extends mr{constructor(e,t,i,o,a,l,h){if(super(t,i),this.dataWidth=o,this.dataHeight=a,this.left=l,this.top=h,e.BYTES_PER_ELEMENT===4){const u=t*i,g=new Uint8ClampedArray(u);for(let x=0;x<u;x++){const m=e[x],A=m>>16&255,I=m>>7&510,b=m&255;g[x]=(A+I+b)/4&255}this.luminances=g}else this.luminances=e;if(o===void 0&&(this.dataWidth=t),a===void 0&&(this.dataHeight=i),l===void 0&&(this.left=0),h===void 0&&(this.top=0),this.left+t>this.dataWidth||this.top+i>this.dataHeight)throw new N("Crop rectangle does not fit within image data.")}getRow(e,t){if(e<0||e>=this.getHeight())throw new N("Requested row is outside the image: "+e);const i=this.getWidth();(t==null||t.length<i)&&(t=new Uint8ClampedArray(i));const o=(e+this.top)*this.dataWidth+this.left;return te.arraycopy(this.luminances,o,t,0,i),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;const i=e*t,o=new Uint8ClampedArray(i);let a=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return te.arraycopy(this.luminances,a,o,0,i),o;for(let l=0;l<t;l++){const h=l*e;te.arraycopy(this.luminances,a,o,h,e),a+=this.dataWidth}return o}isCropSupported(){return!0}crop(e,t,i,o){return new Us(this.luminances,i,o,this.dataWidth,this.dataHeight,this.left+e,this.top+t)}invert(){return new sn(this)}}class Pa extends L{static forName(e){return this.getCharacterSetECIByName(e)}}class Vs{}Vs.ISO_8859_1=L.ISO8859_1;class ka{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Ba{static singletonList(e){return[e]}static min(e,t){return e.sort(t)[0]}}class hu{constructor(e){this.previous=e}getPrevious(){return this.previous}}class Qn extends hu{constructor(e,t,i){super(e),this.value=t,this.bitCount=i}appendTo(e,t){e.appendBits(this.value,this.bitCount)}add(e,t){return new Qn(this,e,t)}addBinaryShift(e,t){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Qn(this,e,t)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+K.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class Hs extends Qn{constructor(e,t,i){super(e,0,0),this.binaryShiftStart=t,this.binaryShiftByteCount=i}appendTo(e,t){for(let i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):i===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+i],8)}addBinaryShift(e,t){return new Hs(this,e,t)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function uu(p,e,t){return new Hs(p,e,t)}function vr(p,e,t){return new Qn(p,e,t)}const fu=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],dn=0,Si=1,Mt=2,La=3,Xt=4,du=new Qn(null,0,0),Gs=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,(10<<16)+(29<<5)+30]),Int32Array.from([(9<<16)+(30<<4)+14,0,(5<<16)+30,(5<<16)+29,(10<<16)+(29<<5)+30]),Int32Array.from([(4<<16)+14,(9<<16)+(14<<5)+28,0,(9<<16)+(14<<5)+29,(14<<16)+(14<<10)+(29<<5)+30]),Int32Array.from([(5<<16)+29,(5<<16)+28,(10<<16)+(29<<5)+30,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,(10<<16)+(31<<5)+28,(10<<16)+(31<<5)+30,(10<<16)+(31<<5)+29,0])];function gu(p){for(let e of p)ge.fill(e,-1);return p[dn][Xt]=0,p[Si][Xt]=0,p[Si][dn]=28,p[La][Xt]=0,p[Mt][Xt]=0,p[Mt][dn]=15,p}const Fa=gu(ge.createInt32Array(6,6));class jt{constructor(e,t,i,o){this.token=e,this.mode=t,this.binaryShiftByteCount=i,this.bitCount=o}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,t){let i=this.bitCount,o=this.token;if(e!==this.mode){let l=Gs[this.mode][e];o=vr(o,l&65535,l>>16),i+=l>>16}let a=e===Mt?4:5;return o=vr(o,t,a),new jt(o,e,0,i+a)}shiftAndAppend(e,t){let i=this.token,o=this.mode===Mt?4:5;return i=vr(i,Fa[this.mode][e],o),i=vr(i,t,5),new jt(i,this.mode,0,this.bitCount+o+5)}addBinaryShiftChar(e){let t=this.token,i=this.mode,o=this.bitCount;if(this.mode===Xt||this.mode===Mt){let h=Gs[i][dn];t=vr(t,h&65535,h>>16),o+=h>>16,i=dn}let a=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,l=new jt(t,i,this.binaryShiftByteCount+1,o+a);return l.binaryShiftByteCount===2047+31&&(l=l.endBinaryShift(e+1)),l}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let t=this.token;return t=uu(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new jt(t,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let t=this.bitCount+(Gs[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=jt.calculateBinaryShiftCost(e)-jt.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount}toBitArray(e){let t=[];for(let o=this.endBinaryShift(e.length).token;o!==null;o=o.getPrevious())t.unshift(o);let i=new J;for(const o of t)o.appendTo(i,e);return i}toString(){return ie.format("%s bits=%d bytes=%d",fu[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}jt.INITIAL_STATE=new jt(du,dn,0,0);function xu(p){const e=ie.getCharCode(" "),t=ie.getCharCode("."),i=ie.getCharCode(",");p[dn][e]=1;const o=ie.getCharCode("Z"),a=ie.getCharCode("A");for(let A=a;A<=o;A++)p[dn][A]=A-a+2;p[Si][e]=1;const l=ie.getCharCode("z"),h=ie.getCharCode("a");for(let A=h;A<=l;A++)p[Si][A]=A-h+2;p[Mt][e]=1;const u=ie.getCharCode("9"),g=ie.getCharCode("0");for(let A=g;A<=u;A++)p[Mt][A]=A-g+2;p[Mt][i]=12,p[Mt][t]=13;const x=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","\x7F"];for(let A=0;A<x.length;A++)p[La][ie.getCharCode(x[A])]=A;const m=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let A=0;A<m.length;A++)ie.getCharCode(m[A])>0&&(p[Xt][ie.getCharCode(m[A])]=A);return p}const Ws=xu(ge.createInt32Array(5,256));class Nr{constructor(e){this.text=e}encode(){const e=ie.getCharCode(" "),t=ie.getCharCode(`
`);let i=Ba.singletonList(jt.INITIAL_STATE);for(let a=0;a<this.text.length;a++){let l,h=a+1<this.text.length?this.text[a+1]:0;switch(this.text[a]){case ie.getCharCode("\r"):l=h===t?2:0;break;case ie.getCharCode("."):l=h===e?3:0;break;case ie.getCharCode(","):l=h===e?4:0;break;case ie.getCharCode(":"):l=h===e?5:0;break;default:l=0}l>0?(i=Nr.updateStateListForPair(i,a,l),a++):i=this.updateStateListForChar(i,a)}return Ba.min(i,(a,l)=>a.getBitCount()-l.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,t){const i=[];for(let o of e)this.updateStateForChar(o,t,i);return Nr.simplifyStates(i)}updateStateForChar(e,t,i){let o=this.text[t]&255,a=Ws[e.getMode()][o]>0,l=null;for(let h=0;h<=Xt;h++){let u=Ws[h][o];if(u>0){if(l==null&&(l=e.endBinaryShift(t)),!a||h===e.getMode()||h===Mt){const g=l.latchAndAppend(h,u);i.push(g)}if(!a&&Fa[e.getMode()][h]>=0){const g=l.shiftAndAppend(h,u);i.push(g)}}}if(e.getBinaryShiftByteCount()>0||Ws[e.getMode()][o]===0){let h=e.addBinaryShiftChar(t);i.push(h)}}static updateStateListForPair(e,t,i){const o=[];for(let a of e)this.updateStateForPair(a,t,i,o);return this.simplifyStates(o)}static updateStateForPair(e,t,i,o){let a=e.endBinaryShift(t);if(o.push(a.latchAndAppend(Xt,i)),e.getMode()!==Xt&&o.push(a.shiftAndAppend(Xt,i)),i===3||i===4){let l=a.latchAndAppend(Mt,16-i).latchAndAppend(Mt,1);o.push(l)}if(e.getBinaryShiftByteCount()>0){let l=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);o.push(l)}}static simplifyStates(e){let t=[];for(const i of e){let o=!0;for(const a of t){if(a.isBetterThanOrEqualTo(i)){o=!1;break}i.isBetterThanOrEqualTo(a)&&(t=t.filter(l=>l!==a))}o&&t.push(i)}return t}}class pe{constructor(){}static encodeBytes(e){return pe.encode(e,pe.DEFAULT_EC_PERCENT,pe.DEFAULT_AZTEC_LAYERS)}static encode(e,t,i){let o=new Nr(e).encode(),a=K.truncDivision(o.getSize()*t,100)+11,l=o.getSize()+a,h,u,g,x,m;if(i!==pe.DEFAULT_AZTEC_LAYERS){if(h=i<0,u=Math.abs(i),u>(h?pe.MAX_NB_BITS_COMPACT:pe.MAX_NB_BITS))throw new N(ie.format("Illegal value %s for layers",i));g=pe.totalBitsInLayer(u,h),x=pe.WORD_SIZE[u];let B=g-g%x;if(m=pe.stuffBits(o,x),m.getSize()+a>B)throw new N("Data to large for user specified layer");if(h&&m.getSize()>x*64)throw new N("Data to large for user specified layer")}else{x=0,m=null;for(let B=0;;B++){if(B>pe.MAX_NB_BITS)throw new N("Data too large for an Aztec code");if(h=B<=3,u=h?B+1:B,g=pe.totalBitsInLayer(u,h),l>g)continue;(m==null||x!==pe.WORD_SIZE[u])&&(x=pe.WORD_SIZE[u],m=pe.stuffBits(o,x));let he=g-g%x;if(!(h&&m.getSize()>x*64)&&m.getSize()+a<=he)break}}let A=pe.generateCheckWords(m,g,x),I=m.getSize()/x,b=pe.generateModeMessage(h,u,I),T=(h?11:14)+u*4,v=new Int32Array(T),D;if(h){D=T;for(let B=0;B<v.length;B++)v[B]=B}else{D=T+1+2*K.truncDivision(K.truncDivision(T,2)-1,15);let B=K.truncDivision(T,2),he=K.truncDivision(D,2);for(let oe=0;oe<B;oe++){let It=oe+K.truncDivision(oe,15);v[B-oe-1]=he-It-1,v[B+oe]=he+It+1}}let F=new je(D);for(let B=0,he=0;B<u;B++){let oe=(u-B)*4+(h?9:12);for(let It=0;It<oe;It++){let Lt=It*2;for(let yt=0;yt<2;yt++)A.get(he+Lt+yt)&&F.set(v[B*2+yt],v[B*2+It]),A.get(he+oe*2+Lt+yt)&&F.set(v[B*2+It],v[T-1-B*2-yt]),A.get(he+oe*4+Lt+yt)&&F.set(v[T-1-B*2-yt],v[T-1-B*2-It]),A.get(he+oe*6+Lt+yt)&&F.set(v[T-1-B*2-It],v[B*2+yt])}he+=oe*8}if(pe.drawModeMessage(F,h,D,b),h)pe.drawBullsEye(F,K.truncDivision(D,2),5);else{pe.drawBullsEye(F,K.truncDivision(D,2),7);for(let B=0,he=0;B<K.truncDivision(T,2)-1;B+=15,he+=16)for(let oe=K.truncDivision(D,2)&1;oe<D;oe+=2)F.set(K.truncDivision(D,2)-he,oe),F.set(K.truncDivision(D,2)+he,oe),F.set(oe,K.truncDivision(D,2)-he),F.set(oe,K.truncDivision(D,2)+he)}let U=new ka;return U.setCompact(h),U.setSize(D),U.setLayers(u),U.setCodeWords(I),U.setMatrix(F),U}static drawBullsEye(e,t,i){for(let o=0;o<i;o+=2)for(let a=t-o;a<=t+o;a++)e.set(a,t-o),e.set(a,t+o),e.set(t-o,a),e.set(t+o,a);e.set(t-i,t-i),e.set(t-i+1,t-i),e.set(t-i,t-i+1),e.set(t+i,t-i),e.set(t+i,t-i+1),e.set(t+i,t+i-1)}static generateModeMessage(e,t,i){let o=new J;return e?(o.appendBits(t-1,2),o.appendBits(i-1,6),o=pe.generateCheckWords(o,28,4)):(o.appendBits(t-1,5),o.appendBits(i-1,11),o=pe.generateCheckWords(o,40,4)),o}static drawModeMessage(e,t,i,o){let a=K.truncDivision(i,2);if(t)for(let l=0;l<7;l++){let h=a-3+l;o.get(l)&&e.set(h,a-5),o.get(l+7)&&e.set(a+5,h),o.get(20-l)&&e.set(h,a+5),o.get(27-l)&&e.set(a-5,h)}else for(let l=0;l<10;l++){let h=a-5+l+K.truncDivision(l,5);o.get(l)&&e.set(h,a-7),o.get(l+10)&&e.set(a+7,h),o.get(29-l)&&e.set(h,a+7),o.get(39-l)&&e.set(a-7,h)}}static generateCheckWords(e,t,i){let o=e.getSize()/i,a=new Fs(pe.getGF(i)),l=K.truncDivision(t,i),h=pe.bitsToWords(e,i,l);a.encode(h,l-o);let u=t%i,g=new J;g.appendBits(0,u);for(const x of Array.from(h))g.appendBits(x,i);return g}static bitsToWords(e,t,i){let o=new Int32Array(i),a,l;for(a=0,l=e.getSize()/t;a<l;a++){let h=0;for(let u=0;u<t;u++)h|=e.get(a*t+u)?1<<t-u-1:0;o[a]=h}return o}static getGF(e){switch(e){case 4:return me.AZTEC_PARAM;case 6:return me.AZTEC_DATA_6;case 8:return me.AZTEC_DATA_8;case 10:return me.AZTEC_DATA_10;case 12:return me.AZTEC_DATA_12;default:throw new N("Unsupported word size "+e)}}static stuffBits(e,t){let i=new J,o=e.getSize(),a=(1<<t)-2;for(let l=0;l<o;l+=t){let h=0;for(let u=0;u<t;u++)(l+u>=o||e.get(l+u))&&(h|=1<<t-1-u);(h&a)===a?(i.appendBits(h&a,t),l--):(h&a)===0?(i.appendBits(h|1,t),l--):i.appendBits(h,t)}return i}static totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}pe.DEFAULT_EC_PERCENT=33,pe.DEFAULT_AZTEC_LAYERS=0,pe.MAX_NB_BITS=32,pe.MAX_NB_BITS_COMPACT=4,pe.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class vi{encode(e,t,i,o){return this.encodeWithHints(e,t,i,o,null)}encodeWithHints(e,t,i,o,a){let l=Vs.ISO_8859_1,h=pe.DEFAULT_EC_PERCENT,u=pe.DEFAULT_AZTEC_LAYERS;return a!=null&&(a.has(Xe.CHARACTER_SET)&&(l=Pa.forName(a.get(Xe.CHARACTER_SET).toString())),a.has(Xe.ERROR_CORRECTION)&&(h=K.parseInt(a.get(Xe.ERROR_CORRECTION).toString())),a.has(Xe.AZTEC_LAYERS)&&(u=K.parseInt(a.get(Xe.AZTEC_LAYERS).toString()))),vi.encodeLayers(e,t,i,o,l,h,u)}static encodeLayers(e,t,i,o,a,l,h){if(t!==q.AZTEC)throw new N("Can only encode AZTEC, but got "+t);let u=pe.encode(ie.getBytes(e,a),l,h);return vi.renderResult(u,i,o)}static renderResult(e,t,i){let o=e.getMatrix();if(o==null)throw new Ut;let a=o.getWidth(),l=o.getHeight(),h=Math.max(t,a),u=Math.max(i,l),g=Math.min(h/a,u/l),x=(h-a*g)/2,m=(u-l*g)/2,A=new je(h,u);for(let I=0,b=m;I<l;I++,b+=g)for(let T=0,v=x;T<a;T++,v+=g)o.get(T,I)&&A.setRegion(v,b,g,g);return A}}s.AbstractExpandedDecoder=vs,s.ArgumentException=S,s.ArithmeticException=pi,s.AztecCode=ka,s.AztecCodeReader=Ei,s.AztecCodeWriter=vi,s.AztecDecoder=ve,s.AztecDetector=Ca,s.AztecDetectorResult=Ea,s.AztecEncoder=pe,s.AztecHighLevelEncoder=Nr,s.AztecPoint=dt,s.BarcodeFormat=q,s.Binarizer=fe,s.BinaryBitmap=z,s.BitArray=J,s.BitMatrix=je,s.BitSource=Ds,s.BrowserAztecCodeReader=Hh,s.BrowserBarcodeReader=zh,s.BrowserCodeReader=bn,s.BrowserDatamatrixCodeReader=Kh,s.BrowserMultiFormatReader=su,s.BrowserPDF417Reader=ou,s.BrowserQRCodeReader=au,s.BrowserQRCodeSvgWriter=On,s.CharacterSetECI=L,s.ChecksumException=W,s.Code128Reader=V,s.Code39Reader=Ge,s.DataMatrixDecodedBitStreamParser=cn,s.DataMatrixReader=hn,s.DecodeHintType=ne,s.DecoderResult=wr,s.DefaultGridSampler=Aa,s.DetectorResult=wi,s.EAN13Reader=Tn,s.EncodeHintType=Xe,s.Exception=E,s.FormatException=k,s.GenericGF=me,s.GenericGFPoly=wt,s.GlobalHistogramBinarizer=ze,s.GridSampler=_s,s.GridSamplerInstance=an,s.HTMLCanvasElementLuminanceSource=on,s.HybridBinarizer=ae,s.ITFReader=_e,s.IllegalArgumentException=N,s.IllegalStateException=Ut,s.InvertedLuminanceSource=sn,s.LuminanceSource=mr,s.MathUtils=xe,s.MultiFormatOneDReader=Kn,s.MultiFormatReader=Ma,s.MultiFormatWriter=cu,s.NotFoundException=M,s.OneDReader=He,s.PDF417DecodedBitStreamParser=O,s.PDF417DecoderErrorCorrection=Sa,s.PDF417Reader=et,s.PDF417ResultMetadata=Na,s.PerspectiveTransform=kt,s.PlanarYUVLuminanceSource=Wt,s.QRCodeByteMatrix=Ti,s.QRCodeDataMask=Ot,s.QRCodeDecodedBitStreamParser=Pe,s.QRCodeDecoderErrorCorrectionLevel=Ne,s.QRCodeDecoderFormatInformation=ot,s.QRCodeEncoder=Oe,s.QRCodeEncoderQRCode=Rn,s.QRCodeMaskUtil=Le,s.QRCodeMatrixUtil=Q,s.QRCodeMode=Z,s.QRCodeReader=un,s.QRCodeVersion=Y,s.QRCodeWriter=qn,s.RGBLuminanceSource=Us,s.RSS14Reader=Be,s.RSSExpandedReader=P,s.ReaderException=bi,s.ReedSolomonDecoder=Ar,s.ReedSolomonEncoder=Fs,s.ReedSolomonException=Xn,s.Result=ft,s.ResultMetadataType=Ye,s.ResultPoint=X,s.StringUtils=ie,s.UnsupportedOperationException=rn,s.VideoInputDevice=wa,s.WhiteRectangleDetector=Zt,s.WriterException=be,s.ZXingArrays=ge,s.ZXingCharset=Pa,s.ZXingInteger=K,s.ZXingStandardCharsets=Vs,s.ZXingStringBuilder=Ie,s.ZXingStringEncoding=mt,s.ZXingSystem=te,s.createAbstractExpandedDecoder=ba,Object.defineProperty(s,"__esModule",{value:!0})})})(Se,Se.exports);const Vu=Uu(Se.exports),Hu=wu({__proto__:null,default:Vu},[Se.exports]);var Xa=function(){function r(n,s,c){if(this.formatMap=new Map([[G.QR_CODE,Se.exports.BarcodeFormat.QR_CODE],[G.AZTEC,Se.exports.BarcodeFormat.AZTEC],[G.CODABAR,Se.exports.BarcodeFormat.CODABAR],[G.CODE_39,Se.exports.BarcodeFormat.CODE_39],[G.CODE_93,Se.exports.BarcodeFormat.CODE_93],[G.CODE_128,Se.exports.BarcodeFormat.CODE_128],[G.DATA_MATRIX,Se.exports.BarcodeFormat.DATA_MATRIX],[G.MAXICODE,Se.exports.BarcodeFormat.MAXICODE],[G.ITF,Se.exports.BarcodeFormat.ITF],[G.EAN_13,Se.exports.BarcodeFormat.EAN_13],[G.EAN_8,Se.exports.BarcodeFormat.EAN_8],[G.PDF_417,Se.exports.BarcodeFormat.PDF_417],[G.RSS_14,Se.exports.BarcodeFormat.RSS_14],[G.RSS_EXPANDED,Se.exports.BarcodeFormat.RSS_EXPANDED],[G.UPC_A,Se.exports.BarcodeFormat.UPC_A],[G.UPC_E,Se.exports.BarcodeFormat.UPC_E],[G.UPC_EAN_EXTENSION,Se.exports.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Hu)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=s,this.logger=c;var f=this.createZXingFormats(n),d=new Map;d.set(Se.exports.DecodeHintType.POSSIBLE_FORMATS,f),d.set(Se.exports.DecodeHintType.TRY_HARDER,!1),this.hints=d}return r.prototype.decodeAsync=function(n){var s=this;return new Promise(function(c,f){try{c(s.decode(n))}catch(d){f(d)}})},r.prototype.decode=function(n){var s=new Se.exports.MultiFormatReader(this.verbose,this.hints),c=new Se.exports.HTMLCanvasElementLuminanceSource(n),f=new Se.exports.BinaryBitmap(new Se.exports.HybridBinarizer(c)),d=s.decode(f);return{text:d.text,format:Zl.create(this.toHtml5QrcodeSupportedFormats(d.format)),debugData:this.createDebugData()}},r.prototype.createReverseFormatMap=function(){var n=new Map;return this.formatMap.forEach(function(s,c,f){n.set(s,c)}),n},r.prototype.toHtml5QrcodeSupportedFormats=function(n){if(!this.reverseFormatMap.has(n))throw"reverseFormatMap doesn't have "+n;return this.reverseFormatMap.get(n)},r.prototype.createZXingFormats=function(n){for(var s=[],c=0,f=n;c<f.length;c++){var d=f[c];this.formatMap.has(d)?s.push(this.formatMap.get(d)):this.logger.logError(d+" is not supported byZXingHtml5QrcodeShim")}return s},r.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},r}(),Gu=globalThis&&globalThis.__awaiter||function(r,n,s,c){function f(d){return d instanceof s?d:new s(function(w){w(d)})}return new(s||(s=Promise))(function(d,w){function y(S){try{E(c.next(S))}catch(N){w(N)}}function _(S){try{E(c.throw(S))}catch(N){w(N)}}function E(S){S.done?d(S.value):f(S.value).then(y,_)}E((c=c.apply(r,n||[])).next())})},Wu=globalThis&&globalThis.__generator||function(r,n){var s={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},c,f,d,w;return w={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function y(E){return function(S){return _([E,S])}}function _(E){if(c)throw new TypeError("Generator is already executing.");for(;s;)try{if(c=1,f&&(d=E[0]&2?f.return:E[0]?f.throw||((d=f.return)&&d.call(f),0):f.next)&&!(d=d.call(f,E[1])).done)return d;switch(f=0,d&&(E=[E[0]&2,d.value]),E[0]){case 0:case 1:d=E;break;case 4:return s.label++,{value:E[1],done:!1};case 5:s.label++,f=E[1],E=[0];continue;case 7:E=s.ops.pop(),s.trys.pop();continue;default:if(d=s.trys,!(d=d.length>0&&d[d.length-1])&&(E[0]===6||E[0]===2)){s=0;continue}if(E[0]===3&&(!d||E[1]>d[0]&&E[1]<d[3])){s.label=E[1];break}if(E[0]===6&&s.label<d[1]){s.label=d[1],d=E;break}if(d&&s.label<d[2]){s.label=d[2],s.ops.push(E);break}d[2]&&s.ops.pop(),s.trys.pop();continue}E=n.call(r,s)}catch(S){E=[6,S],f=0}finally{c=d=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},ja=function(){function r(n,s,c){if(this.formatMap=new Map([[G.QR_CODE,"qr_code"],[G.AZTEC,"aztec"],[G.CODABAR,"codabar"],[G.CODE_39,"code_39"],[G.CODE_93,"code_93"],[G.CODE_128,"code_128"],[G.DATA_MATRIX,"data_matrix"],[G.ITF,"itf"],[G.EAN_13,"ean_13"],[G.EAN_8,"ean_8"],[G.PDF_417,"pdf417"],[G.UPC_A,"upc_a"],[G.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!r.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=s,this.logger=c;var f=this.createBarcodeDetectorFormats(n);if(this.detector=new BarcodeDetector(f),!this.detector)throw"BarcodeDetector detector not supported"}return r.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var n=new BarcodeDetector({formats:["qr_code"]});return typeof n<"u"},r.prototype.decodeAsync=function(n){return Gu(this,void 0,void 0,function(){var s,c;return Wu(this,function(f){switch(f.label){case 0:return[4,this.detector.detect(n)];case 1:if(s=f.sent(),!s||s.length===0)throw"No barcode or QR code detected.";return c=this.selectLargestBarcode(s),[2,{text:c.rawValue,format:Zl.create(this.toHtml5QrcodeSupportedFormats(c.format)),debugData:this.createDebugData()}]}})})},r.prototype.selectLargestBarcode=function(n){for(var s=null,c=0,f=0,d=n;f<d.length;f++){var w=d[f],y=w.boundingBox.width*w.boundingBox.height;y>c&&(c=y,s=w)}if(!s)throw"No largest barcode found";return s},r.prototype.createBarcodeDetectorFormats=function(n){for(var s=[],c=0,f=n;c<f.length;c++){var d=f[c];this.formatMap.has(d)?s.push(this.formatMap.get(d)):this.logger.warn(d+" is not supported byBarcodeDetectorDelegate")}return{formats:s}},r.prototype.toHtml5QrcodeSupportedFormats=function(n){if(!this.reverseFormatMap.has(n))throw"reverseFormatMap doesn't have "+n;return this.reverseFormatMap.get(n)},r.prototype.createReverseFormatMap=function(){var n=new Map;return this.formatMap.forEach(function(s,c,f){n.set(s,c)}),n},r.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},r}(),za=globalThis&&globalThis.__awaiter||function(r,n,s,c){function f(d){return d instanceof s?d:new s(function(w){w(d)})}return new(s||(s=Promise))(function(d,w){function y(S){try{E(c.next(S))}catch(N){w(N)}}function _(S){try{E(c.throw(S))}catch(N){w(N)}}function E(S){S.done?d(S.value):f(S.value).then(y,_)}E((c=c.apply(r,n||[])).next())})},Ya=globalThis&&globalThis.__generator||function(r,n){var s={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},c,f,d,w;return w={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function y(E){return function(S){return _([E,S])}}function _(E){if(c)throw new TypeError("Generator is already executing.");for(;s;)try{if(c=1,f&&(d=E[0]&2?f.return:E[0]?f.throw||((d=f.return)&&d.call(f),0):f.next)&&!(d=d.call(f,E[1])).done)return d;switch(f=0,d&&(E=[E[0]&2,d.value]),E[0]){case 0:case 1:d=E;break;case 4:return s.label++,{value:E[1],done:!1};case 5:s.label++,f=E[1],E=[0];continue;case 7:E=s.ops.pop(),s.trys.pop();continue;default:if(d=s.trys,!(d=d.length>0&&d[d.length-1])&&(E[0]===6||E[0]===2)){s=0;continue}if(E[0]===3&&(!d||E[1]>d[0]&&E[1]<d[3])){s.label=E[1];break}if(E[0]===6&&s.label<d[1]){s.label=d[1],d=E;break}if(d&&s.label<d[2]){s.label=d[2],s.ops.push(E);break}d[2]&&s.ops.pop(),s.trys.pop();continue}E=n.call(r,s)}catch(S){E=[6,S],f=0}finally{c=d=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},Xu=function(){function r(n,s,c,f){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=c,s&&ja.isSupported()?(this.primaryDecoder=new ja(n,c,f),this.secondaryDecoder=new Xa(n,c,f)):this.primaryDecoder=new Xa(n,c,f)}return r.prototype.decodeAsync=function(n){return za(this,void 0,void 0,function(){var s;return Ya(this,function(c){switch(c.label){case 0:s=performance.now(),c.label=1;case 1:return c.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(n)];case 2:return[2,c.sent()];case 3:return this.possiblyLogPerformance(s),[7];case 4:return[2]}})})},r.prototype.decodeRobustlyAsync=function(n){return za(this,void 0,void 0,function(){var s,c;return Ya(this,function(f){switch(f.label){case 0:s=performance.now(),f.label=1;case 1:return f.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(n)];case 2:return[2,f.sent()];case 3:if(c=f.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(n)];throw c;case 4:return this.possiblyLogPerformance(s),[7];case 5:return[2]}})})},r.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},r.prototype.possiblyLogPerformance=function(n){if(!!this.verbose){var s=performance.now()-n;this.executionResults.push(s),this.executions++,this.possiblyFlushPerformanceReport()}},r.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var n=0,s=0,c=this.executionResults;s<c.length;s++){var f=c[s];n+=f}var d=n/this.executionResults.length;console.log(d+" ms for "+this.executionResults.length+" last runs."),this.executions=0,this.executionResults=[]}},r}(),Oo=globalThis&&globalThis.__extends||function(){var r=function(n,s){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(c[d]=f[d])},r(n,s)};return function(n,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");r(n,s);function c(){this.constructor=n}n.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}}(),Ui=globalThis&&globalThis.__awaiter||function(r,n,s,c){function f(d){return d instanceof s?d:new s(function(w){w(d)})}return new(s||(s=Promise))(function(d,w){function y(S){try{E(c.next(S))}catch(N){w(N)}}function _(S){try{E(c.throw(S))}catch(N){w(N)}}function E(S){S.done?d(S.value):f(S.value).then(y,_)}E((c=c.apply(r,n||[])).next())})},Vi=globalThis&&globalThis.__generator||function(r,n){var s={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},c,f,d,w;return w={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function y(E){return function(S){return _([E,S])}}function _(E){if(c)throw new TypeError("Generator is already executing.");for(;s;)try{if(c=1,f&&(d=E[0]&2?f.return:E[0]?f.throw||((d=f.return)&&d.call(f),0):f.next)&&!(d=d.call(f,E[1])).done)return d;switch(f=0,d&&(E=[E[0]&2,d.value]),E[0]){case 0:case 1:d=E;break;case 4:return s.label++,{value:E[1],done:!1};case 5:s.label++,f=E[1],E=[0];continue;case 7:E=s.ops.pop(),s.trys.pop();continue;default:if(d=s.trys,!(d=d.length>0&&d[d.length-1])&&(E[0]===6||E[0]===2)){s=0;continue}if(E[0]===3&&(!d||E[1]>d[0]&&E[1]<d[3])){s.label=E[1];break}if(E[0]===6&&s.label<d[1]){s.label=d[1],d=E;break}if(d&&s.label<d[2]){s.label=d[2],s.ops.push(E);break}d[2]&&s.ops.pop(),s.trys.pop();continue}E=n.call(r,s)}catch(S){E=[6,S],f=0}finally{c=d=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},Ql=function(){function r(n,s){this.name=n,this.track=s}return r.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},r.prototype.apply=function(n){var s={};s[this.name]=n;var c={advanced:[s]};return this.track.applyConstraints(c)},r.prototype.value=function(){var n=this.track.getSettings();if(this.name in n){var s=n[this.name];return s}return null},r}(),ju=function(r){Oo(n,r);function n(s,c){return r.call(this,s,c)||this}return n.prototype.min=function(){return this.getCapabilities().min},n.prototype.max=function(){return this.getCapabilities().max},n.prototype.step=function(){return this.getCapabilities().step},n.prototype.apply=function(s){var c={};c[this.name]=s;var f={advanced:[c]};return this.track.applyConstraints(f)},n.prototype.getCapabilities=function(){this.failIfNotSupported();var s=this.track.getCapabilities(),c=s[this.name];return{min:c.min,max:c.max,step:c.step}},n.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error(this.name+" capability not supported")},n}(Ql),zu=function(r){Oo(n,r);function n(s){return r.call(this,"zoom",s)||this}return n}(ju),Yu=function(r){Oo(n,r);function n(s){return r.call(this,"torch",s)||this}return n}(Ql),Ku=function(){function r(n){this.track=n}return r.prototype.zoomFeature=function(){return new zu(this.track)},r.prototype.torchFeature=function(){return new Yu(this.track)},r}(),Zu=function(){function r(n,s,c){this.isClosed=!1,this.parentElement=n,this.mediaStream=s,this.callbacks=c,this.surface=this.createVideoElement(this.parentElement.clientWidth),n.append(this.surface)}return r.prototype.createVideoElement=function(n){var s=document.createElement("video");return s.style.width=n+"px",s.style.display="block",s.muted=!0,s.setAttribute("muted","true"),s.playsInline=!0,s},r.prototype.setupSurface=function(){var n=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var s=function(){var c=n.surface.clientWidth,f=n.surface.clientHeight;n.callbacks.onRenderSurfaceReady(c,f),n.surface.removeEventListener("playing",s)};this.surface.addEventListener("playing",s),this.surface.srcObject=this.mediaStream,this.surface.play()},r.create=function(n,s,c,f){return Ui(this,void 0,void 0,function(){var d,w;return Vi(this,function(y){switch(y.label){case 0:return d=new r(n,s,f),c.aspectRatio?(w={aspectRatio:c.aspectRatio},[4,d.getFirstTrackOrFail().applyConstraints(w)]):[3,2];case 1:y.sent(),y.label=2;case 2:return d.setupSurface(),[2,d]}})})},r.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},r.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},r.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},r.prototype.resume=function(n){this.failIfClosed();var s=this,c=function(){setTimeout(n,200),s.surface.removeEventListener("playing",c)};this.surface.addEventListener("playing",c),this.surface.play()},r.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},r.prototype.getSurface=function(){return this.failIfClosed(),this.surface},r.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},r.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},r.prototype.applyVideoConstraints=function(n){return Ui(this,void 0,void 0,function(){return Vi(this,function(s){if("aspectRatio"in n)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(n)]})})},r.prototype.close=function(){if(this.isClosed)return Promise.resolve();var n=this;return new Promise(function(s,c){var f=n.mediaStream.getVideoTracks(),d=f.length,w=0;n.mediaStream.getVideoTracks().forEach(function(y){n.mediaStream.removeTrack(y),y.stop(),++w,w>=d&&(n.isClosed=!0,n.parentElement.removeChild(n.surface),s())})})},r.prototype.getCapabilities=function(){return new Ku(this.getFirstTrackOrFail())},r}(),qu=function(){function r(n){this.mediaStream=n}return r.prototype.render=function(n,s,c){return Ui(this,void 0,void 0,function(){return Vi(this,function(f){return[2,Zu.create(n,this.mediaStream,s,c)]})})},r.create=function(n){return Ui(this,void 0,void 0,function(){var s,c;return Vi(this,function(f){switch(f.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return s={audio:!1,video:n},[4,navigator.mediaDevices.getUserMedia(s)];case 1:return c=f.sent(),[2,new r(c)]}})})},r}(),Ka=globalThis&&globalThis.__awaiter||function(r,n,s,c){function f(d){return d instanceof s?d:new s(function(w){w(d)})}return new(s||(s=Promise))(function(d,w){function y(S){try{E(c.next(S))}catch(N){w(N)}}function _(S){try{E(c.throw(S))}catch(N){w(N)}}function E(S){S.done?d(S.value):f(S.value).then(y,_)}E((c=c.apply(r,n||[])).next())})},Za=globalThis&&globalThis.__generator||function(r,n){var s={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},c,f,d,w;return w={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function y(E){return function(S){return _([E,S])}}function _(E){if(c)throw new TypeError("Generator is already executing.");for(;s;)try{if(c=1,f&&(d=E[0]&2?f.return:E[0]?f.throw||((d=f.return)&&d.call(f),0):f.next)&&!(d=d.call(f,E[1])).done)return d;switch(f=0,d&&(E=[E[0]&2,d.value]),E[0]){case 0:case 1:d=E;break;case 4:return s.label++,{value:E[1],done:!1};case 5:s.label++,f=E[1],E=[0];continue;case 7:E=s.ops.pop(),s.trys.pop();continue;default:if(d=s.trys,!(d=d.length>0&&d[d.length-1])&&(E[0]===6||E[0]===2)){s=0;continue}if(E[0]===3&&(!d||E[1]>d[0]&&E[1]<d[3])){s.label=E[1];break}if(E[0]===6&&s.label<d[1]){s.label=d[1],d=E;break}if(d&&s.label<d[2]){s.label=d[2],s.ops.push(E);break}d[2]&&s.ops.pop(),s.trys.pop();continue}E=n.call(r,s)}catch(S){E=[6,S],f=0}finally{c=d=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},Qu=function(){function r(){}return r.failIfNotSupported=function(){return Ka(this,void 0,void 0,function(){return Za(this,function(n){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new r]})})},r.prototype.create=function(n){return Ka(this,void 0,void 0,function(){return Za(this,function(s){return[2,qu.create(n)]})})},r}(),Ju=globalThis&&globalThis.__awaiter||function(r,n,s,c){function f(d){return d instanceof s?d:new s(function(w){w(d)})}return new(s||(s=Promise))(function(d,w){function y(S){try{E(c.next(S))}catch(N){w(N)}}function _(S){try{E(c.throw(S))}catch(N){w(N)}}function E(S){S.done?d(S.value):f(S.value).then(y,_)}E((c=c.apply(r,n||[])).next())})},$u=globalThis&&globalThis.__generator||function(r,n){var s={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},c,f,d,w;return w={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function y(E){return function(S){return _([E,S])}}function _(E){if(c)throw new TypeError("Generator is already executing.");for(;s;)try{if(c=1,f&&(d=E[0]&2?f.return:E[0]?f.throw||((d=f.return)&&d.call(f),0):f.next)&&!(d=d.call(f,E[1])).done)return d;switch(f=0,d&&(E=[E[0]&2,d.value]),E[0]){case 0:case 1:d=E;break;case 4:return s.label++,{value:E[1],done:!1};case 5:s.label++,f=E[1],E=[0];continue;case 7:E=s.ops.pop(),s.trys.pop();continue;default:if(d=s.trys,!(d=d.length>0&&d[d.length-1])&&(E[0]===6||E[0]===2)){s=0;continue}if(E[0]===3&&(!d||E[1]>d[0]&&E[1]<d[3])){s.label=E[1];break}if(E[0]===6&&s.label<d[1]){s.label=d[1],d=E;break}if(d&&s.label<d[2]){s.label=d[2],s.ops.push(E);break}d[2]&&s.ops.pop(),s.trys.pop();continue}E=n.call(r,s)}catch(S){E=[6,S],f=0}finally{c=d=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},e1=function(){function r(){}return r.retrieve=function(){if(navigator.mediaDevices)return r.getCamerasFromMediaDevices();var n=MediaStreamTrack;return MediaStreamTrack&&n.getSources?r.getCamerasFromMediaStreamTrack():r.rejectWithError()},r.rejectWithError=function(){var n=Vr.unableToQuerySupportedDevices();return r.isHttpsOrLocalhost()||(n=Vr.insecureContextCameraQueryError()),Promise.reject(n)},r.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var n=location.host.split(":")[0];return n==="127.0.0.1"||n==="localhost"},r.getCamerasFromMediaDevices=function(){return Ju(this,void 0,void 0,function(){var n,s,c,f,d,w,y;return $u(this,function(_){switch(_.label){case 0:return n=function(E){for(var S=E.getVideoTracks(),N=0,z=S;N<z.length;N++){var W=z[N];W.enabled=!1,W.stop(),E.removeTrack(W)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return s=_.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(c=_.sent(),f=[],d=0,w=c;d<w.length;d++)y=w[d],y.kind==="videoinput"&&f.push({id:y.deviceId,label:y.label});return n(s),[2,f]}})})},r.getCamerasFromMediaStreamTrack=function(){return new Promise(function(n,s){var c=function(d){for(var w=[],y=0,_=d;y<_.length;y++){var E=_[y];E.kind==="video"&&w.push({id:E.id,label:E.label})}n(w)},f=MediaStreamTrack;f.getSources(c)})},r}(),Fe;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.NOT_STARTED=1]="NOT_STARTED",r[r.SCANNING=2]="SCANNING",r[r.PAUSED=3]="PAUSED"})(Fe||(Fe={}));var t1=function(){function r(){this.state=Fe.NOT_STARTED,this.onGoingTransactionNewState=Fe.UNKNOWN}return r.prototype.directTransition=function(n){this.failIfTransitionOngoing(),this.validateTransition(n),this.state=n},r.prototype.startTransition=function(n){return this.failIfTransitionOngoing(),this.validateTransition(n),this.onGoingTransactionNewState=n,this},r.prototype.execute=function(){if(this.onGoingTransactionNewState===Fe.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var n=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Fe.UNKNOWN,this.directTransition(n)},r.prototype.cancel=function(){if(this.onGoingTransactionNewState===Fe.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Fe.UNKNOWN},r.prototype.getState=function(){return this.state},r.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Fe.UNKNOWN)throw"Cannot transition to a new state, already under transition"},r.prototype.validateTransition=function(n){switch(this.state){case Fe.UNKNOWN:throw"Transition from unknown is not allowed";case Fe.NOT_STARTED:this.failIfNewStateIs(n,[Fe.PAUSED]);break;case Fe.SCANNING:break;case Fe.PAUSED:break}},r.prototype.failIfNewStateIs=function(n,s){for(var c=0,f=s;c<f.length;c++){var d=f[c];if(n===d)throw"Cannot transition from "+this.state+" to "+n}},r}(),n1=function(){function r(n){this.stateManager=n}return r.prototype.startTransition=function(n){return this.stateManager.startTransition(n)},r.prototype.directTransition=function(n){this.stateManager.directTransition(n)},r.prototype.getState=function(){return this.stateManager.getState()},r.prototype.canScanFile=function(){return this.stateManager.getState()===Fe.NOT_STARTED},r.prototype.isScanning=function(){return this.stateManager.getState()!==Fe.NOT_STARTED},r.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Fe.SCANNING},r.prototype.isPaused=function(){return this.stateManager.getState()===Fe.PAUSED},r}(),r1=function(){function r(){}return r.create=function(){return new n1(new t1)},r}(),i1=globalThis&&globalThis.__extends||function(){var r=function(n,s){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(c[d]=f[d])},r(n,s)};return function(n,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");r(n,s);function c(){this.constructor=n}n.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}}(),bt=function(r){i1(n,r);function n(){return r!==null&&r.apply(this,arguments)||this}return n.DEFAULT_WIDTH=300,n.DEFAULT_WIDTH_OFFSET=2,n.FILE_SCAN_MIN_HEIGHT=300,n.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,n.MIN_QR_BOX_SIZE=50,n.SHADED_LEFT=1,n.SHADED_RIGHT=2,n.SHADED_TOP=3,n.SHADED_BOTTOM=4,n.SHADED_REGION_ELEMENT_ID="qr-shaded-region",n.VERBOSE=!1,n.BORDER_SHADER_DEFAULT_COLOR="#ffffff",n.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",n}(Bu),s1=function(){function r(n,s){this.logger=s,this.fps=bt.SCAN_DEFAULT_FPS,n?(n.fps&&(this.fps=n.fps),this.disableFlip=n.disableFlip===!0,this.qrbox=n.qrbox,this.aspectRatio=n.aspectRatio,this.videoConstraints=n.videoConstraints):this.disableFlip=bt.DEFAULT_DISABLE_FLIP}return r.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?ql.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},r.prototype.isShadedBoxEnabled=function(){return!qt(this.qrbox)},r.create=function(n,s){return new r(n,s)},r}(),o1=function(){function r(n,s){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(n))throw"HTML Element with id="+n+" not found";this.elementId=n,this.verbose=!1;var c;typeof s=="boolean"?this.verbose=s===!0:s&&(c=s,this.verbose=c.verbose===!0,c.experimentalFeatures),this.logger=new Fu(this.verbose),this.qrcode=new Xu(this.getSupportedFormats(s),this.getUseBarCodeDetectorIfSupported(c),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=r1.create()}return r.prototype.start=function(n,s,c,f){var d=this;if(!n)throw"cameraIdOrConfig is required";if(!c||typeof c!="function")throw"qrCodeSuccessCallback is required and should be a function.";var w;f?w=f:w=this.verbose?this.logger.log:function(){};var y=s1.create(s,this.logger);this.clearElement();var _=!1;y.videoConstraints&&(y.isMediaStreamConstraintsValid()?_=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var E=_,S=document.getElementById(this.elementId);S.clientWidth?S.clientWidth:bt.DEFAULT_WIDTH,S.style.position="relative",this.shouldScan=!0,this.element=S;var N=this,z=this.stateManagerProxy.startTransition(Fe.SCANNING);return new Promise(function(W,fe){var te=E?y.videoConstraints:N.createVideoConstraints(n);if(!te){z.cancel(),fe("videoConstraints should be defined");return}var Qe={};(!E||y.aspectRatio)&&(Qe.aspectRatio=y.aspectRatio);var it={onRenderSurfaceReady:function(ge,K){N.setupUi(ge,K,y),N.isScanning=!0,N.foreverScan(y,c,w)}};Qu.failIfNotSupported().then(function(ge){ge.create(te).then(function(K){return K.render(d.element,Qe,it).then(function(J){N.renderedCamera=J,z.execute(),W(null)}).catch(function(J){z.cancel(),fe(J)})}).catch(function(K){z.cancel(),fe(Vr.errorGettingUserMedia(K))})}).catch(function(ge){z.cancel(),fe(Vr.cameraStreamingNotSupported())})})},r.prototype.pause=function(n){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Fe.PAUSED),this.showPausedState(),(qt(n)||n!==!0)&&(n=!1),n&&this.renderedCamera&&this.renderedCamera.pause()},r.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var n=this,s=function(){n.stateManagerProxy.directTransition(Fe.SCANNING),n.hidePausedState()};if(!this.renderedCamera.isPaused()){s();return}this.renderedCamera.resume(function(){s()})},r.prototype.getState=function(){return this.stateManagerProxy.getState()},r.prototype.stop=function(){var n=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var s=this.stateManagerProxy.startTransition(Fe.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var c=function(){if(!!n.element){var d=document.getElementById(bt.SHADED_REGION_ELEMENT_ID);d&&n.element.removeChild(d)}},f=this;return this.renderedCamera.close().then(function(){return f.renderedCamera=null,f.element&&(f.element.removeChild(f.canvasElement),f.canvasElement=null),c(),f.qrRegion&&(f.qrRegion=null),f.context&&(f.context=null),s.execute(),f.hidePausedState(),f.isScanning=!1,Promise.resolve()})},r.prototype.scanFile=function(n,s){return this.scanFileV2(n,s).then(function(c){return c.decodedText})},r.prototype.scanFileV2=function(n,s){var c=this;if(!n||!(n instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(qt(s)&&(s=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(f,d){c.possiblyCloseLastScanImageFile(),c.clearElement(),c.lastScanImageFile=URL.createObjectURL(n);var w=new Image;w.onload=function(){var y=w.width,_=w.height,E=document.getElementById(c.elementId),S=E.clientWidth?E.clientWidth:bt.DEFAULT_WIDTH,N=Math.max(E.clientHeight?E.clientHeight:_,bt.FILE_SCAN_MIN_HEIGHT),z=c.computeCanvasDrawConfig(y,_,S,N);if(s){var W=c.createCanvasElement(S,N,"qr-canvas-visible");W.style.display="inline-block",E.appendChild(W);var fe=W.getContext("2d");if(!fe)throw"Unable to get 2d context from canvas";fe.canvas.width=S,fe.canvas.height=N,fe.drawImage(w,0,0,y,_,z.x,z.y,z.width,z.height)}var te=bt.FILE_SCAN_HIDDEN_CANVAS_PADDING,Qe=Math.max(w.width,z.width),it=Math.max(w.height,z.height),ge=Qe+2*te,K=it+2*te,J=c.createCanvasElement(ge,K);E.appendChild(J);var Re=J.getContext("2d");if(!Re)throw"Unable to get 2d context from canvas";Re.canvas.width=ge,Re.canvas.height=K,Re.drawImage(w,0,0,y,_,te,te,Qe,it);try{c.qrcode.decodeRobustlyAsync(J).then(function(ne){f(Wa.createFromQrcodeResult(ne))}).catch(d)}catch(ne){d("QR code parse error, error = "+ne)}},w.onerror=d,w.onabort=d,w.onstalled=d,w.onsuspend=d,w.src=URL.createObjectURL(n)})},r.prototype.clear=function(){this.clearElement()},r.getCameras=function(){return e1.retrieve()},r.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},r.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},r.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},r.prototype.applyVideoConstraints=function(n){if(n){if(!ql.isMediaStreamConstraintsValid(n,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(n)},r.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},r.prototype.getSupportedFormats=function(n){var s=[G.QR_CODE,G.AZTEC,G.CODABAR,G.CODE_39,G.CODE_93,G.CODE_128,G.DATA_MATRIX,G.MAXICODE,G.ITF,G.EAN_13,G.EAN_8,G.PDF_417,G.RSS_14,G.RSS_EXPANDED,G.UPC_A,G.UPC_E,G.UPC_EAN_EXTENSION];if(!n||typeof n=="boolean"||!n.formatsToSupport)return s;if(!Array.isArray(n.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(n.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var c=[],f=0,d=n.formatsToSupport;f<d.length;f++){var w=d[f];ku(w)?c.push(w):this.logger.warn("Invalid format: "+w+" passed in config, ignoring.")}if(c.length===0)throw"None of formatsToSupport match supported values.";return c},r.prototype.getUseBarCodeDetectorIfSupported=function(n){if(qt(n))return!0;if(!qt(n.useBarCodeDetectorIfSupported))return n.useBarCodeDetectorIfSupported!==!1;if(qt(n.experimentalFeatures))return!0;var s=n.experimentalFeatures;return qt(s.useBarCodeDetectorIfSupported)?!0:s.useBarCodeDetectorIfSupported!==!1},r.prototype.validateQrboxSize=function(n,s,c){var f=this,d=c.qrbox;this.validateQrboxConfig(d);var w=this.toQrdimensions(n,s,d),y=function(E){if(E<bt.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+(" "+bt.MIN_QR_BOX_SIZE+"px.")},_=function(E){return E>n&&(f.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),E=n),E};y(w.width),y(w.height),w.width=_(w.width)},r.prototype.validateQrboxConfig=function(n){if(typeof n!="number"&&typeof n!="function"&&(n.width===void 0||n.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},r.prototype.toQrdimensions=function(n,s,c){if(typeof c=="number")return{width:c,height:c};if(typeof c=="function")try{return c(n,s)}catch(f){throw new Error("qrbox config was passed as a function but it failed with unknown error"+f)}return c},r.prototype.setupUi=function(n,s,c){c.isShadedBoxEnabled()&&this.validateQrboxSize(n,s,c);var f=qt(c.qrbox)?{width:n,height:s}:c.qrbox;this.validateQrboxConfig(f);var d=this.toQrdimensions(n,s,f);d.height>s&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var w=c.isShadedBoxEnabled()&&d.height<=s,y={x:0,y:0,width:n,height:s},_=w?this.getShadedRegionBounds(n,s,d):y,E=this.createCanvasElement(_.width,_.height),S={willReadFrequently:!0},N=E.getContext("2d",S);N.canvas.width=_.width,N.canvas.height=_.height,this.element.append(E),w&&this.possiblyInsertShadingElement(this.element,n,s,d),this.createScannerPausedUiElement(this.element),this.qrRegion=_,this.context=N,this.canvasElement=E},r.prototype.createScannerPausedUiElement=function(n){var s=document.createElement("div");s.innerText="Scanner paused",s.style.display="none",s.style.position="absolute",s.style.top="0px",s.style.zIndex="1",s.style.background="yellow",s.style.textAlign="center",s.style.width="100%",n.appendChild(s),this.scannerPausedUiElement=s},r.prototype.scanContext=function(n,s){var c=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(f){return n(f.text,Wa.createFromQrcodeResult(f)),c.possiblyUpdateShaders(!0),!0}).catch(function(f){c.possiblyUpdateShaders(!1);var d=Vr.codeParseError(f);return s(d,Lu.createFrom(d)),!1})},r.prototype.foreverScan=function(n,s,c){var f=this;if(!!this.shouldScan&&!!this.renderedCamera){var d=this.renderedCamera.getSurface(),w=d.videoWidth/d.clientWidth,y=d.videoHeight/d.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var _=this.qrRegion.width*w,E=this.qrRegion.height*y,S=this.qrRegion.x*w,N=this.qrRegion.y*y;this.context.drawImage(d,S,N,_,E,0,0,this.qrRegion.width,this.qrRegion.height);var z=function(){f.foreverScanTimeout=setTimeout(function(){f.foreverScan(n,s,c)},f.getTimeoutFps(n.fps))};this.scanContext(s,c).then(function(W){!W&&n.disableFlip!==!0?(f.context.translate(f.context.canvas.width,0),f.context.scale(-1,1),f.scanContext(s,c).finally(function(){z()})):z()}).catch(function(W){f.logger.logError("Error happend while scanning context",W),z()})}},r.prototype.createVideoConstraints=function(n){if(typeof n=="string")return{deviceId:{exact:n}};if(typeof n=="object"){var s="facingMode",c="deviceId",f={user:!0,environment:!0},d="exact",w=function(fe){if(fe in f)return!0;throw"config has invalid 'facingMode' value = "+("'"+fe+"'")},y=Object.keys(n);if(y.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+(" if passed as an object, found "+y.length+" keys");var _=Object.keys(n)[0];if(_!==s&&_!==c)throw"Only '"+s+"' and '"+c+"'  are supported for 'cameraIdOrConfig'";if(_===s){var E=n.facingMode;if(typeof E=="string"){if(w(E))return{facingMode:E}}else if(typeof E=="object")if(d in E){if(w(E[""+d]))return{facingMode:{exact:E[""+d]}}}else throw"'facingMode' should be string or object with"+(" "+d+" as key.");else{var S=typeof E;throw"Invalid type of 'facingMode' = "+S}}else{var N=n.deviceId;if(typeof N=="string")return{deviceId:N};if(typeof N=="object"){if(d in N)return{deviceId:{exact:N[""+d]}};throw"'deviceId' should be string or object with"+(" "+d+" as key.")}else{var z=typeof N;throw"Invalid type of 'deviceId' = "+z}}}var W=typeof n;throw"Invalid type of 'cameraIdOrConfig' = "+W},r.prototype.computeCanvasDrawConfig=function(n,s,c,f){if(n<=c&&s<=f){var d=(c-n)/2,w=(f-s)/2;return{x:d,y:w,width:n,height:s}}else{var y=n,_=s;return n>c&&(s=c/n*s,n=c),s>f&&(n=f/s*n,s=f),this.logger.log("Image downsampled from "+(y+"X"+_)+(" to "+n+"X"+s+".")),this.computeCanvasDrawConfig(n,s,c,f)}},r.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var n=document.getElementById(this.elementId);n&&(n.innerHTML="")},r.prototype.possiblyUpdateShaders=function(n){this.qrMatch!==n&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(s){s.style.backgroundColor=n?bt.BORDER_SHADER_MATCH_COLOR:bt.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=n)},r.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},r.prototype.createCanvasElement=function(n,s,c){var f=n,d=s,w=document.createElement("canvas");return w.style.width=f+"px",w.style.height=d+"px",w.style.display="none",w.id=qt(c)?"qr-canvas":c,w},r.prototype.getShadedRegionBounds=function(n,s,c){if(c.width>n||c.height>s)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(n-c.width)/2,y:(s-c.height)/2,width:c.width,height:c.height}},r.prototype.possiblyInsertShadingElement=function(n,s,c,f){if(!(s-f.width<1||c-f.height<1)){var d=document.createElement("div");d.style.position="absolute";var w=(s-f.width)/2,y=(c-f.height)/2;if(d.style.borderLeft=w+"px solid rgba(0, 0, 0, 0.48)",d.style.borderRight=w+"px solid rgba(0, 0, 0, 0.48)",d.style.borderTop=y+"px solid rgba(0, 0, 0, 0.48)",d.style.borderBottom=y+"px solid rgba(0, 0, 0, 0.48)",d.style.boxSizing="border-box",d.style.top="0px",d.style.bottom="0px",d.style.left="0px",d.style.right="0px",d.id=""+bt.SHADED_REGION_ELEMENT_ID,s-f.width<11||c-f.height<11)this.hasBorderShaders=!1;else{var _=5,E=40;this.insertShaderBorders(d,E,_,-_,null,0,!0),this.insertShaderBorders(d,E,_,-_,null,0,!1),this.insertShaderBorders(d,E,_,null,-_,0,!0),this.insertShaderBorders(d,E,_,null,-_,0,!1),this.insertShaderBorders(d,_,E+_,-_,null,-_,!0),this.insertShaderBorders(d,_,E+_,null,-_,-_,!0),this.insertShaderBorders(d,_,E+_,-_,null,-_,!1),this.insertShaderBorders(d,_,E+_,null,-_,-_,!1),this.hasBorderShaders=!0}n.append(d)}},r.prototype.insertShaderBorders=function(n,s,c,f,d,w,y){var _=document.createElement("div");_.style.position="absolute",_.style.backgroundColor=bt.BORDER_SHADER_DEFAULT_COLOR,_.style.width=s+"px",_.style.height=c+"px",f!==null&&(_.style.top=f+"px"),d!==null&&(_.style.bottom=d+"px"),y?_.style.left=w+"px":_.style.right=w+"px",this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(_),n.appendChild(_)},r.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},r.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},r.prototype.getTimeoutFps=function(n){return 1e3/n},r}();globalThis&&globalThis.__awaiter;globalThis&&globalThis.__generator;globalThis&&globalThis.__awaiter;globalThis&&globalThis.__generator;var qa;(function(r){r[r.STATUS_DEFAULT=0]="STATUS_DEFAULT",r[r.STATUS_SUCCESS=1]="STATUS_SUCCESS",r[r.STATUS_WARNING=2]="STATUS_WARNING",r[r.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(qa||(qa={}));function a1(r){let n;return{c(){n=Tt("div"),Lr(n,"id","reader")},m(s,c){fr(s,n,c)},p:Bn,i:Bn,o:Bn,d(s){s&&Gn(n)}}}function l1(r,n,s){let c,{result:f}=n,{close:d}=n;_u(w);function w(){c=new o1("reader"),y()}function y(){c.start({facingMode:"environment"},{fps:10,qrbox:{width:800,height:800}},E,null)}async function _(){await c.stop()}function E(S,N){s(0,f=S)}return r.$$set=S=>{"result"in S&&s(0,f=S.result),"close"in S&&s(1,d=S.close)},r.$$.update=()=>{r.$$.dirty&3&&f&&_()&&d()},[f,d]}class c1 extends Kl{constructor(n){super(),Yl(this,n,l1,a1,Wl,{result:0,close:1})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=function(r){const n=[];let s=0;for(let c=0;c<r.length;c++){let f=r.charCodeAt(c);f<128?n[s++]=f:f<2048?(n[s++]=f>>6|192,n[s++]=f&63|128):(f&64512)===55296&&c+1<r.length&&(r.charCodeAt(c+1)&64512)===56320?(f=65536+((f&1023)<<10)+(r.charCodeAt(++c)&1023),n[s++]=f>>18|240,n[s++]=f>>12&63|128,n[s++]=f>>6&63|128,n[s++]=f&63|128):(n[s++]=f>>12|224,n[s++]=f>>6&63|128,n[s++]=f&63|128)}return n},h1=function(r){const n=[];let s=0,c=0;for(;s<r.length;){const f=r[s++];if(f<128)n[c++]=String.fromCharCode(f);else if(f>191&&f<224){const d=r[s++];n[c++]=String.fromCharCode((f&31)<<6|d&63)}else if(f>239&&f<365){const d=r[s++],w=r[s++],y=r[s++],_=((f&7)<<18|(d&63)<<12|(w&63)<<6|y&63)-65536;n[c++]=String.fromCharCode(55296+(_>>10)),n[c++]=String.fromCharCode(56320+(_&1023))}else{const d=r[s++],w=r[s++];n[c++]=String.fromCharCode((f&15)<<12|(d&63)<<6|w&63)}}return n.join("")},$l={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,n){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=n?this.byteToCharMapWebSafe_:this.byteToCharMap_,c=[];for(let f=0;f<r.length;f+=3){const d=r[f],w=f+1<r.length,y=w?r[f+1]:0,_=f+2<r.length,E=_?r[f+2]:0,S=d>>2,N=(d&3)<<4|y>>4;let z=(y&15)<<2|E>>6,W=E&63;_||(W=64,w||(z=64)),c.push(s[S],s[N],s[z],s[W])}return c.join("")},encodeString(r,n){return this.HAS_NATIVE_SUPPORT&&!n?btoa(r):this.encodeByteArray(Jl(r),n)},decodeString(r,n){return this.HAS_NATIVE_SUPPORT&&!n?atob(r):h1(this.decodeStringToByteArray(r,n))},decodeStringToByteArray(r,n){this.init_();const s=n?this.charToByteMapWebSafe_:this.charToByteMap_,c=[];for(let f=0;f<r.length;){const d=s[r.charAt(f++)],y=f<r.length?s[r.charAt(f)]:0;++f;const E=f<r.length?s[r.charAt(f)]:64;++f;const N=f<r.length?s[r.charAt(f)]:64;if(++f,d==null||y==null||E==null||N==null)throw new u1;const z=d<<2|y>>4;if(c.push(z),E!==64){const W=y<<4&240|E>>2;if(c.push(W),N!==64){const fe=E<<6&192|N;c.push(fe)}}}return c},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class u1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const f1=function(r){const n=Jl(r);return $l.encodeByteArray(n,!0)},Hi=function(r){return f1(r).replace(/\./g,"")},ec=function(r){try{return $l.decodeString(r,!0)}catch(n){console.error("base64Decode failed: ",n)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1=()=>d1().__FIREBASE_DEFAULTS__,x1=()=>{if(typeof process>"u"||typeof process.env>"u")return;const r={}.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},p1=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const n=r&&ec(r[1]);return n&&JSON.parse(n)},Do=()=>{try{return g1()||x1()||p1()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},tc=r=>{var n,s;return(s=(n=Do())===null||n===void 0?void 0:n.emulatorHosts)===null||s===void 0?void 0:s[r]},m1=r=>{const n=tc(r);if(!n)return;const s=n.lastIndexOf(":");if(s<=0||s+1===n.length)throw new Error(`Invalid host ${n} with no separate hostname and port!`);const c=parseInt(n.substring(s+1),10);return n[0]==="["?[n.substring(1,s-1),c]:[n.substring(0,s),c]},w1=()=>{var r;return(r=Do())===null||r===void 0?void 0:r.config},nc=r=>{var n;return(n=Do())===null||n===void 0?void 0:n[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((n,s)=>{this.resolve=n,this.reject=s})}wrapCallback(n){return(s,c)=>{s?this.reject(s):this.resolve(c),typeof n=="function"&&(this.promise.catch(()=>{}),n.length===1?n(s):n(s,c))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(r,n){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},c=n||"demo-project",f=r.iat||0,d=r.sub||r.user_id;if(!d)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const w=Object.assign({iss:`https://securetoken.google.com/${c}`,aud:c,iat:f,exp:f+3600,auth_time:f,sub:d,user_id:d,firebase:{sign_in_provider:"custom",identities:{}}},r),y="";return[Hi(JSON.stringify(s)),Hi(JSON.stringify(w)),y].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function C1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ht())}function I1(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function y1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _1(){const r=ht();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function b1(){try{return typeof indexedDB=="object"}catch{return!1}}function T1(){return new Promise((r,n)=>{try{let s=!0;const c="validate-browser-context-for-indexeddb-analytics-module",f=self.indexedDB.open(c);f.onsuccess=()=>{f.result.close(),s||self.indexedDB.deleteDatabase(c),r(!0)},f.onupgradeneeded=()=>{s=!1},f.onerror=()=>{var d;n(((d=f.error)===null||d===void 0?void 0:d.message)||"")}}catch(s){n(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1="FirebaseError";class nn extends Error{constructor(n,s,c){super(s),this.code=n,this.customData=c,this.name=S1,Object.setPrototypeOf(this,nn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ei.prototype.create)}}class ei{constructor(n,s,c){this.service=n,this.serviceName=s,this.errors=c}create(n,...s){const c=s[0]||{},f=`${this.service}/${n}`,d=this.errors[n],w=d?v1(d,c):"Error",y=`${this.serviceName}: ${w} (${f}).`;return new nn(f,y,c)}}function v1(r,n){return r.replace(N1,(s,c)=>{const f=n[c];return f!=null?String(f):`<${c}?>`})}const N1=/\{\$([^}]+)}/g;function R1(r){for(const n in r)if(Object.prototype.hasOwnProperty.call(r,n))return!1;return!0}function Gi(r,n){if(r===n)return!0;const s=Object.keys(r),c=Object.keys(n);for(const f of s){if(!c.includes(f))return!1;const d=r[f],w=n[f];if(Qa(d)&&Qa(w)){if(!Gi(d,w))return!1}else if(d!==w)return!1}for(const f of c)if(!s.includes(f))return!1;return!0}function Qa(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(r){const n=[];for(const[s,c]of Object.entries(r))Array.isArray(c)?c.forEach(f=>{n.push(encodeURIComponent(s)+"="+encodeURIComponent(f))}):n.push(encodeURIComponent(s)+"="+encodeURIComponent(c));return n.length?"&"+n.join("&"):""}function Mr(r){const n={};return r.replace(/^\?/,"").split("&").forEach(c=>{if(c){const[f,d]=c.split("=");n[decodeURIComponent(f)]=decodeURIComponent(d)}}),n}function Pr(r){const n=r.indexOf("?");if(!n)return"";const s=r.indexOf("#",n);return r.substring(n,s>0?s:void 0)}function O1(r,n){const s=new D1(r,n);return s.subscribe.bind(s)}class D1{constructor(n,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{n(this)}).catch(c=>{this.error(c)})}next(n){this.forEachObserver(s=>{s.next(n)})}error(n){this.forEachObserver(s=>{s.error(n)}),this.close(n)}complete(){this.forEachObserver(n=>{n.complete()}),this.close()}subscribe(n,s,c){let f;if(n===void 0&&s===void 0&&c===void 0)throw new Error("Missing Observer.");M1(n,["next","error","complete"])?f=n:f={next:n,error:s,complete:c},f.next===void 0&&(f.next=js),f.error===void 0&&(f.error=js),f.complete===void 0&&(f.complete=js);const d=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?f.error(this.finalError):f.complete()}catch{}}),this.observers.push(f),d}unsubscribeOne(n){this.observers===void 0||this.observers[n]===void 0||(delete this.observers[n],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(n){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,n)}sendOne(n,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[n]!==void 0)try{s(this.observers[n])}catch(c){typeof console<"u"&&console.error&&console.error(c)}})}close(n){this.finalized||(this.finalized=!0,n!==void 0&&(this.finalError=n),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function M1(r,n){if(typeof r!="object"||r===null)return!1;for(const s of n)if(s in r&&typeof r[s]=="function")return!0;return!1}function js(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(r){return r&&r._delegate?r._delegate:r}class Un{constructor(n,s,c){this.name=n,this.instanceFactory=s,this.type=c,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(n){return this.instantiationMode=n,this}setMultipleInstances(n){return this.multipleInstances=n,this}setServiceProps(n){return this.serviceProps=n,this}setInstanceCreatedCallback(n){return this.onInstanceCreated=n,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(n,s){this.name=n,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(n){const s=this.normalizeInstanceIdentifier(n);if(!this.instancesDeferred.has(s)){const c=new E1;if(this.instancesDeferred.set(s,c),this.isInitialized(s)||this.shouldAutoInitialize())try{const f=this.getOrInitializeService({instanceIdentifier:s});f&&c.resolve(f)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(n){var s;const c=this.normalizeInstanceIdentifier(n==null?void 0:n.identifier),f=(s=n==null?void 0:n.optional)!==null&&s!==void 0?s:!1;if(this.isInitialized(c)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:c})}catch(d){if(f)return null;throw d}else{if(f)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(n){if(n.name!==this.name)throw Error(`Mismatching Component ${n.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=n,!!this.shouldAutoInitialize()){if(B1(n))try{this.getOrInitializeService({instanceIdentifier:Dn})}catch{}for(const[s,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(s);try{const d=this.getOrInitializeService({instanceIdentifier:f});c.resolve(d)}catch{}}}}clearInstance(n=Dn){this.instancesDeferred.delete(n),this.instancesOptions.delete(n),this.instances.delete(n)}async delete(){const n=Array.from(this.instances.values());await Promise.all([...n.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...n.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(n=Dn){return this.instances.has(n)}getOptions(n=Dn){return this.instancesOptions.get(n)||{}}initialize(n={}){const{options:s={}}=n,c=this.normalizeInstanceIdentifier(n.instanceIdentifier);if(this.isInitialized(c))throw Error(`${this.name}(${c}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const f=this.getOrInitializeService({instanceIdentifier:c,options:s});for(const[d,w]of this.instancesDeferred.entries()){const y=this.normalizeInstanceIdentifier(d);c===y&&w.resolve(f)}return f}onInit(n,s){var c;const f=this.normalizeInstanceIdentifier(s),d=(c=this.onInitCallbacks.get(f))!==null&&c!==void 0?c:new Set;d.add(n),this.onInitCallbacks.set(f,d);const w=this.instances.get(f);return w&&n(w,f),()=>{d.delete(n)}}invokeOnInitCallbacks(n,s){const c=this.onInitCallbacks.get(s);if(!!c)for(const f of c)try{f(n,s)}catch{}}getOrInitializeService({instanceIdentifier:n,options:s={}}){let c=this.instances.get(n);if(!c&&this.component&&(c=this.component.instanceFactory(this.container,{instanceIdentifier:k1(n),options:s}),this.instances.set(n,c),this.instancesOptions.set(n,s),this.invokeOnInitCallbacks(c,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,c)}catch{}return c||null}normalizeInstanceIdentifier(n=Dn){return this.component?this.component.multipleInstances?n:Dn:n}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function k1(r){return r===Dn?void 0:r}function B1(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(n){this.name=n,this.providers=new Map}addComponent(n){const s=this.getProvider(n.name);if(s.isComponentSet())throw new Error(`Component ${n.name} has already been registered with ${this.name}`);s.setComponent(n)}addOrOverwriteComponent(n){this.getProvider(n.name).isComponentSet()&&this.providers.delete(n.name),this.addComponent(n)}getProvider(n){if(this.providers.has(n))return this.providers.get(n);const s=new P1(n,this);return this.providers.set(n,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ce||(Ce={}));const F1={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},U1=Ce.INFO,V1={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},H1=(r,n,...s)=>{if(n<r.logLevel)return;const c=new Date().toISOString(),f=V1[n];if(f)console[f](`[${c}]  ${r.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${n})`)};class Mo{constructor(n){this.name=n,this._logLevel=U1,this._logHandler=H1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(n){if(!(n in Ce))throw new TypeError(`Invalid value "${n}" assigned to \`logLevel\``);this._logLevel=n}setLogLevel(n){this._logLevel=typeof n=="string"?F1[n]:n}get logHandler(){return this._logHandler}set logHandler(n){if(typeof n!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=n}get userLogHandler(){return this._userLogHandler}set userLogHandler(n){this._userLogHandler=n}debug(...n){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...n),this._logHandler(this,Ce.DEBUG,...n)}log(...n){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...n),this._logHandler(this,Ce.VERBOSE,...n)}info(...n){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...n),this._logHandler(this,Ce.INFO,...n)}warn(...n){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...n),this._logHandler(this,Ce.WARN,...n)}error(...n){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...n),this._logHandler(this,Ce.ERROR,...n)}}const G1=(r,n)=>n.some(s=>r instanceof s);let Ja,$a;function W1(){return Ja||(Ja=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function X1(){return $a||($a=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rc=new WeakMap,fo=new WeakMap,ic=new WeakMap,zs=new WeakMap,Po=new WeakMap;function j1(r){const n=new Promise((s,c)=>{const f=()=>{r.removeEventListener("success",d),r.removeEventListener("error",w)},d=()=>{s(An(r.result)),f()},w=()=>{c(r.error),f()};r.addEventListener("success",d),r.addEventListener("error",w)});return n.then(s=>{s instanceof IDBCursor&&rc.set(s,r)}).catch(()=>{}),Po.set(n,r),n}function z1(r){if(fo.has(r))return;const n=new Promise((s,c)=>{const f=()=>{r.removeEventListener("complete",d),r.removeEventListener("error",w),r.removeEventListener("abort",w)},d=()=>{s(),f()},w=()=>{c(r.error||new DOMException("AbortError","AbortError")),f()};r.addEventListener("complete",d),r.addEventListener("error",w),r.addEventListener("abort",w)});fo.set(r,n)}let go={get(r,n,s){if(r instanceof IDBTransaction){if(n==="done")return fo.get(r);if(n==="objectStoreNames")return r.objectStoreNames||ic.get(r);if(n==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return An(r[n])},set(r,n,s){return r[n]=s,!0},has(r,n){return r instanceof IDBTransaction&&(n==="done"||n==="store")?!0:n in r}};function Y1(r){go=r(go)}function K1(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(n,...s){const c=r.call(Ys(this),n,...s);return ic.set(c,n.sort?n.sort():[n]),An(c)}:X1().includes(r)?function(...n){return r.apply(Ys(this),n),An(rc.get(this))}:function(...n){return An(r.apply(Ys(this),n))}}function Z1(r){return typeof r=="function"?K1(r):(r instanceof IDBTransaction&&z1(r),G1(r,W1())?new Proxy(r,go):r)}function An(r){if(r instanceof IDBRequest)return j1(r);if(zs.has(r))return zs.get(r);const n=Z1(r);return n!==r&&(zs.set(r,n),Po.set(n,r)),n}const Ys=r=>Po.get(r);function q1(r,n,{blocked:s,upgrade:c,blocking:f,terminated:d}={}){const w=indexedDB.open(r,n),y=An(w);return c&&w.addEventListener("upgradeneeded",_=>{c(An(w.result),_.oldVersion,_.newVersion,An(w.transaction))}),s&&w.addEventListener("blocked",()=>s()),y.then(_=>{d&&_.addEventListener("close",()=>d()),f&&_.addEventListener("versionchange",()=>f())}).catch(()=>{}),y}const Q1=["get","getKey","getAll","getAllKeys","count"],J1=["put","add","delete","clear"],Ks=new Map;function el(r,n){if(!(r instanceof IDBDatabase&&!(n in r)&&typeof n=="string"))return;if(Ks.get(n))return Ks.get(n);const s=n.replace(/FromIndex$/,""),c=n!==s,f=J1.includes(s);if(!(s in(c?IDBIndex:IDBObjectStore).prototype)||!(f||Q1.includes(s)))return;const d=async function(w,...y){const _=this.transaction(w,f?"readwrite":"readonly");let E=_.store;return c&&(E=E.index(y.shift())),(await Promise.all([E[s](...y),f&&_.done]))[0]};return Ks.set(n,d),d}Y1(r=>({...r,get:(n,s,c)=>el(n,s)||r.get(n,s,c),has:(n,s)=>!!el(n,s)||r.has(n,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(n){this.container=n}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(e0(s)){const c=s.getImmediate();return`${c.library}/${c.version}`}else return null}).filter(s=>s).join(" ")}}function e0(r){const n=r.getComponent();return(n==null?void 0:n.type)==="VERSION"}const xo="@firebase/app",tl="0.9.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vn=new Mo("@firebase/app"),t0="@firebase/app-compat",n0="@firebase/analytics-compat",r0="@firebase/analytics",i0="@firebase/app-check-compat",s0="@firebase/app-check",o0="@firebase/auth",a0="@firebase/auth-compat",l0="@firebase/database",c0="@firebase/database-compat",h0="@firebase/functions",u0="@firebase/functions-compat",f0="@firebase/installations",d0="@firebase/installations-compat",g0="@firebase/messaging",x0="@firebase/messaging-compat",p0="@firebase/performance",m0="@firebase/performance-compat",w0="@firebase/remote-config",E0="@firebase/remote-config-compat",A0="@firebase/storage",C0="@firebase/storage-compat",I0="@firebase/firestore",y0="@firebase/firestore-compat",_0="firebase",b0="9.18.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po="[DEFAULT]",T0={[xo]:"fire-core",[t0]:"fire-core-compat",[r0]:"fire-analytics",[n0]:"fire-analytics-compat",[s0]:"fire-app-check",[i0]:"fire-app-check-compat",[o0]:"fire-auth",[a0]:"fire-auth-compat",[l0]:"fire-rtdb",[c0]:"fire-rtdb-compat",[h0]:"fire-fn",[u0]:"fire-fn-compat",[f0]:"fire-iid",[d0]:"fire-iid-compat",[g0]:"fire-fcm",[x0]:"fire-fcm-compat",[p0]:"fire-perf",[m0]:"fire-perf-compat",[w0]:"fire-rc",[E0]:"fire-rc-compat",[A0]:"fire-gcs",[C0]:"fire-gcs-compat",[I0]:"fire-fst",[y0]:"fire-fst-compat","fire-js":"fire-js",[_0]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi=new Map,mo=new Map;function S0(r,n){try{r.container.addComponent(n)}catch(s){Vn.debug(`Component ${n.name} failed to register with FirebaseApp ${r.name}`,s)}}function lr(r){const n=r.name;if(mo.has(n))return Vn.debug(`There were multiple attempts to register component ${n}.`),!1;mo.set(n,r);for(const s of Wi.values())S0(s,r);return!0}function ko(r,n){const s=r.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),r.container.getProvider(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Cn=new ei("app","Firebase",v0);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(n,s,c){this._isDeleted=!1,this._options=Object.assign({},n),this._config=Object.assign({},s),this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=c,this.container.addComponent(new Un("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(n){this.checkDestroyed(),this._automaticDataCollectionEnabled=n}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(n){this._isDeleted=n}checkDestroyed(){if(this.isDeleted)throw Cn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni=b0;function sc(r,n={}){let s=r;typeof n!="object"&&(n={name:n});const c=Object.assign({name:po,automaticDataCollectionEnabled:!1},n),f=c.name;if(typeof f!="string"||!f)throw Cn.create("bad-app-name",{appName:String(f)});if(s||(s=w1()),!s)throw Cn.create("no-options");const d=Wi.get(f);if(d){if(Gi(s,d.options)&&Gi(c,d.config))return d;throw Cn.create("duplicate-app",{appName:f})}const w=new L1(f);for(const _ of mo.values())w.addComponent(_);const y=new N0(s,c,w);return Wi.set(f,y),y}function oc(r=po){const n=Wi.get(r);if(!n&&r===po)return sc();if(!n)throw Cn.create("no-app",{appName:r});return n}function In(r,n,s){var c;let f=(c=T0[r])!==null&&c!==void 0?c:r;s&&(f+=`-${s}`);const d=f.match(/\s|\//),w=n.match(/\s|\//);if(d||w){const y=[`Unable to register library "${f}" with version "${n}":`];d&&y.push(`library name "${f}" contains illegal characters (whitespace or "/")`),d&&w&&y.push("and"),w&&y.push(`version name "${n}" contains illegal characters (whitespace or "/")`),Vn.warn(y.join(" "));return}lr(new Un(`${f}-version`,()=>({library:f,version:n}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0="firebase-heartbeat-database",O0=1,Xr="firebase-heartbeat-store";let Zs=null;function ac(){return Zs||(Zs=q1(R0,O0,{upgrade:(r,n)=>{switch(n){case 0:r.createObjectStore(Xr)}}}).catch(r=>{throw Cn.create("idb-open",{originalErrorMessage:r.message})})),Zs}async function D0(r){try{return(await ac()).transaction(Xr).objectStore(Xr).get(lc(r))}catch(n){if(n instanceof nn)Vn.warn(n.message);else{const s=Cn.create("idb-get",{originalErrorMessage:n==null?void 0:n.message});Vn.warn(s.message)}}}async function nl(r,n){try{const c=(await ac()).transaction(Xr,"readwrite");return await c.objectStore(Xr).put(n,lc(r)),c.done}catch(s){if(s instanceof nn)Vn.warn(s.message);else{const c=Cn.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});Vn.warn(c.message)}}}function lc(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0=1024,P0=30*24*60*60*1e3;class k0{constructor(n){this.container=n,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new L0(s),this._heartbeatsCachePromise=this._storage.read().then(c=>(this._heartbeatsCache=c,c))}async triggerHeartbeat(){const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=rl();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(f=>f.date===c)))return this._heartbeatsCache.heartbeats.push({date:c,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(f=>{const d=new Date(f.date).valueOf();return Date.now()-d<=P0}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const n=rl(),{heartbeatsToSend:s,unsentEntries:c}=B0(this._heartbeatsCache.heartbeats),f=Hi(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,c.length>0?(this._heartbeatsCache.heartbeats=c,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),f}}function rl(){return new Date().toISOString().substring(0,10)}function B0(r,n=M0){const s=[];let c=r.slice();for(const f of r){const d=s.find(w=>w.agent===f.agent);if(d){if(d.dates.push(f.date),il(s)>n){d.dates.pop();break}}else if(s.push({agent:f.agent,dates:[f.date]}),il(s)>n){s.pop();break}c=c.slice(1)}return{heartbeatsToSend:s,unsentEntries:c}}class L0{constructor(n){this.app=n,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return b1()?T1().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await D0(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(n){var s;if(await this._canUseIndexedDBPromise){const f=await this.read();return nl(this.app,{lastSentHeartbeatDate:(s=n.lastSentHeartbeatDate)!==null&&s!==void 0?s:f.lastSentHeartbeatDate,heartbeats:n.heartbeats})}else return}async add(n){var s;if(await this._canUseIndexedDBPromise){const f=await this.read();return nl(this.app,{lastSentHeartbeatDate:(s=n.lastSentHeartbeatDate)!==null&&s!==void 0?s:f.lastSentHeartbeatDate,heartbeats:[...f.heartbeats,...n.heartbeats]})}else return}}function il(r){return Hi(JSON.stringify({version:2,heartbeats:r})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(r){lr(new Un("platform-logger",n=>new $1(n),"PRIVATE")),lr(new Un("heartbeat",n=>new k0(n),"PRIVATE")),In(xo,tl,r),In(xo,tl,"esm2017"),In("fire-js","")}F0("");var U0="firebase",V0="9.18.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */In(U0,V0,"app");var H0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},j,Bo=Bo||{},se=H0||self;function Xi(){}function ns(r){var n=typeof r;return n=n!="object"?n:r?Array.isArray(r)?"array":n:"null",n=="array"||n=="object"&&typeof r.length=="number"}function ri(r){var n=typeof r;return n=="object"&&r!=null||n=="function"}function G0(r){return Object.prototype.hasOwnProperty.call(r,qs)&&r[qs]||(r[qs]=++W0)}var qs="closure_uid_"+(1e9*Math.random()>>>0),W0=0;function X0(r,n,s){return r.call.apply(r.bind,arguments)}function j0(r,n,s){if(!r)throw Error();if(2<arguments.length){var c=Array.prototype.slice.call(arguments,2);return function(){var f=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(f,c),r.apply(n,f)}}return function(){return r.apply(n,arguments)}}function lt(r,n,s){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?lt=X0:lt=j0,lt.apply(null,arguments)}function Ni(r,n){var s=Array.prototype.slice.call(arguments,1);return function(){var c=s.slice();return c.push.apply(c,arguments),r.apply(this,c)}}function rt(r,n){function s(){}s.prototype=n.prototype,r.X=n.prototype,r.prototype=new s,r.prototype.constructor=r,r.Wb=function(c,f,d){for(var w=Array(arguments.length-2),y=2;y<arguments.length;y++)w[y-2]=arguments[y];return n.prototype[f].apply(c,w)}}function yn(){this.s=this.s,this.o=this.o}var z0=0;yn.prototype.s=!1;yn.prototype.na=function(){!this.s&&(this.s=!0,this.M(),z0!=0)&&G0(this)};yn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const cc=Array.prototype.indexOf?function(r,n){return Array.prototype.indexOf.call(r,n,void 0)}:function(r,n){if(typeof r=="string")return typeof n!="string"||n.length!=1?-1:r.indexOf(n,0);for(let s=0;s<r.length;s++)if(s in r&&r[s]===n)return s;return-1};function Lo(r){const n=r.length;if(0<n){const s=Array(n);for(let c=0;c<n;c++)s[c]=r[c];return s}return[]}function sl(r,n){for(let s=1;s<arguments.length;s++){const c=arguments[s];if(ns(c)){const f=r.length||0,d=c.length||0;r.length=f+d;for(let w=0;w<d;w++)r[f+w]=c[w]}else r.push(c)}}function ct(r,n){this.type=r,this.g=this.target=n,this.defaultPrevented=!1}ct.prototype.h=function(){this.defaultPrevented=!0};var Y0=function(){if(!se.addEventListener||!Object.defineProperty)return!1;var r=!1,n=Object.defineProperty({},"passive",{get:function(){r=!0}});try{se.addEventListener("test",Xi,n),se.removeEventListener("test",Xi,n)}catch{}return r}();function ji(r){return/^[\s\xa0]*$/.test(r)}var ol=String.prototype.trim?function(r){return r.trim()}:function(r){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(r)[1]};function Qs(r,n){return r<n?-1:r>n?1:0}function rs(){var r=se.navigator;return r&&(r=r.userAgent)?r:""}function zt(r){return rs().indexOf(r)!=-1}function Fo(r){return Fo[" "](r),r}Fo[" "]=Xi;function K0(r){var n=Q0;return Object.prototype.hasOwnProperty.call(n,9)?n[9]:n[9]=r(9)}var Z0=zt("Opera"),jr=zt("Trident")||zt("MSIE"),hc=zt("Edge"),wo=hc||jr,uc=zt("Gecko")&&!(rs().toLowerCase().indexOf("webkit")!=-1&&!zt("Edge"))&&!(zt("Trident")||zt("MSIE"))&&!zt("Edge"),q0=rs().toLowerCase().indexOf("webkit")!=-1&&!zt("Edge");function fc(){var r=se.document;return r?r.documentMode:void 0}var Eo;e:{var Js="",$s=function(){var r=rs();if(uc)return/rv:([^\);]+)(\)|;)/.exec(r);if(hc)return/Edge\/([\d\.]+)/.exec(r);if(jr)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(r);if(q0)return/WebKit\/(\S+)/.exec(r);if(Z0)return/(?:Version)[ \/]?(\S+)/.exec(r)}();if($s&&(Js=$s?$s[1]:""),jr){var eo=fc();if(eo!=null&&eo>parseFloat(Js)){Eo=String(eo);break e}}Eo=Js}var Q0={};function J0(){return K0(function(){let r=0;const n=ol(String(Eo)).split("."),s=ol("9").split("."),c=Math.max(n.length,s.length);for(let w=0;r==0&&w<c;w++){var f=n[w]||"",d=s[w]||"";do{if(f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""],d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],f[0].length==0&&d[0].length==0)break;r=Qs(f[1].length==0?0:parseInt(f[1],10),d[1].length==0?0:parseInt(d[1],10))||Qs(f[2].length==0,d[2].length==0)||Qs(f[2],d[2]),f=f[3],d=d[3]}while(r==0)}return 0<=r})}se.document&&jr&&fc();function zr(r,n){if(ct.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var s=this.type=r.type,c=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=n,n=r.relatedTarget){if(uc){e:{try{Fo(n.nodeName);var f=!0;break e}catch{}f=!1}f||(n=null)}}else s=="mouseover"?n=r.fromElement:s=="mouseout"&&(n=r.toElement);this.relatedTarget=n,c?(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0):(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType=typeof r.pointerType=="string"?r.pointerType:$0[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&zr.X.h.call(this)}}rt(zr,ct);var $0={2:"touch",3:"pen",4:"mouse"};zr.prototype.h=function(){zr.X.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var ii="closure_listenable_"+(1e6*Math.random()|0),ef=0;function tf(r,n,s,c,f){this.listener=r,this.proxy=null,this.src=n,this.type=s,this.capture=!!c,this.ha=f,this.key=++ef,this.ba=this.ea=!1}function is(r){r.ba=!0,r.listener=null,r.proxy=null,r.src=null,r.ha=null}function Uo(r,n,s){for(const c in r)n.call(s,r[c],c,r)}function dc(r){const n={};for(const s in r)n[s]=r[s];return n}const al="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gc(r,n){let s,c;for(let f=1;f<arguments.length;f++){c=arguments[f];for(s in c)r[s]=c[s];for(let d=0;d<al.length;d++)s=al[d],Object.prototype.hasOwnProperty.call(c,s)&&(r[s]=c[s])}}function ss(r){this.src=r,this.g={},this.h=0}ss.prototype.add=function(r,n,s,c,f){var d=r.toString();r=this.g[d],r||(r=this.g[d]=[],this.h++);var w=Co(r,n,c,f);return-1<w?(n=r[w],s||(n.ea=!1)):(n=new tf(n,this.src,d,!!c,f),n.ea=s,r.push(n)),n};function Ao(r,n){var s=n.type;if(s in r.g){var c=r.g[s],f=cc(c,n),d;(d=0<=f)&&Array.prototype.splice.call(c,f,1),d&&(is(n),r.g[s].length==0&&(delete r.g[s],r.h--))}}function Co(r,n,s,c){for(var f=0;f<r.length;++f){var d=r[f];if(!d.ba&&d.listener==n&&d.capture==!!s&&d.ha==c)return f}return-1}var Vo="closure_lm_"+(1e6*Math.random()|0),to={};function xc(r,n,s,c,f){if(c&&c.once)return mc(r,n,s,c,f);if(Array.isArray(n)){for(var d=0;d<n.length;d++)xc(r,n[d],s,c,f);return null}return s=Wo(s),r&&r[ii]?r.N(n,s,ri(c)?!!c.capture:!!c,f):pc(r,n,s,!1,c,f)}function pc(r,n,s,c,f,d){if(!n)throw Error("Invalid event type");var w=ri(f)?!!f.capture:!!f,y=Go(r);if(y||(r[Vo]=y=new ss(r)),s=y.add(n,s,c,w,d),s.proxy)return s;if(c=nf(),s.proxy=c,c.src=r,c.listener=s,r.addEventListener)Y0||(f=w),f===void 0&&(f=!1),r.addEventListener(n.toString(),c,f);else if(r.attachEvent)r.attachEvent(Ec(n.toString()),c);else if(r.addListener&&r.removeListener)r.addListener(c);else throw Error("addEventListener and attachEvent are unavailable.");return s}function nf(){function r(s){return n.call(r.src,r.listener,s)}const n=rf;return r}function mc(r,n,s,c,f){if(Array.isArray(n)){for(var d=0;d<n.length;d++)mc(r,n[d],s,c,f);return null}return s=Wo(s),r&&r[ii]?r.O(n,s,ri(c)?!!c.capture:!!c,f):pc(r,n,s,!0,c,f)}function wc(r,n,s,c,f){if(Array.isArray(n))for(var d=0;d<n.length;d++)wc(r,n[d],s,c,f);else c=ri(c)?!!c.capture:!!c,s=Wo(s),r&&r[ii]?(r=r.i,n=String(n).toString(),n in r.g&&(d=r.g[n],s=Co(d,s,c,f),-1<s&&(is(d[s]),Array.prototype.splice.call(d,s,1),d.length==0&&(delete r.g[n],r.h--)))):r&&(r=Go(r))&&(n=r.g[n.toString()],r=-1,n&&(r=Co(n,s,c,f)),(s=-1<r?n[r]:null)&&Ho(s))}function Ho(r){if(typeof r!="number"&&r&&!r.ba){var n=r.src;if(n&&n[ii])Ao(n.i,r);else{var s=r.type,c=r.proxy;n.removeEventListener?n.removeEventListener(s,c,r.capture):n.detachEvent?n.detachEvent(Ec(s),c):n.addListener&&n.removeListener&&n.removeListener(c),(s=Go(n))?(Ao(s,r),s.h==0&&(s.src=null,n[Vo]=null)):is(r)}}}function Ec(r){return r in to?to[r]:to[r]="on"+r}function rf(r,n){if(r.ba)r=!0;else{n=new zr(n,this);var s=r.listener,c=r.ha||r.src;r.ea&&Ho(r),r=s.call(c,n)}return r}function Go(r){return r=r[Vo],r instanceof ss?r:null}var no="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wo(r){return typeof r=="function"?r:(r[no]||(r[no]=function(n){return r.handleEvent(n)}),r[no])}function qe(){yn.call(this),this.i=new ss(this),this.P=this,this.I=null}rt(qe,yn);qe.prototype[ii]=!0;qe.prototype.removeEventListener=function(r,n,s,c){wc(this,r,n,s,c)};function nt(r,n){var s,c=r.I;if(c)for(s=[];c;c=c.I)s.push(c);if(r=r.P,c=n.type||n,typeof n=="string")n=new ct(n,r);else if(n instanceof ct)n.target=n.target||r;else{var f=n;n=new ct(c,r),gc(n,f)}if(f=!0,s)for(var d=s.length-1;0<=d;d--){var w=n.g=s[d];f=Ri(w,c,!0,n)&&f}if(w=n.g=r,f=Ri(w,c,!0,n)&&f,f=Ri(w,c,!1,n)&&f,s)for(d=0;d<s.length;d++)w=n.g=s[d],f=Ri(w,c,!1,n)&&f}qe.prototype.M=function(){if(qe.X.M.call(this),this.i){var r=this.i,n;for(n in r.g){for(var s=r.g[n],c=0;c<s.length;c++)is(s[c]);delete r.g[n],r.h--}}this.I=null};qe.prototype.N=function(r,n,s,c){return this.i.add(String(r),n,!1,s,c)};qe.prototype.O=function(r,n,s,c){return this.i.add(String(r),n,!0,s,c)};function Ri(r,n,s,c){if(n=r.i.g[String(n)],!n)return!0;n=n.concat();for(var f=!0,d=0;d<n.length;++d){var w=n[d];if(w&&!w.ba&&w.capture==s){var y=w.listener,_=w.ha||w.src;w.ea&&Ao(r.i,w),f=y.call(_,c)!==!1&&f}}return f&&!c.defaultPrevented}var Xo=se.JSON.stringify;function sf(){var r=Ic;let n=null;return r.g&&(n=r.g,r.g=r.g.next,r.g||(r.h=null),n.next=null),n}class of{constructor(){this.h=this.g=null}add(n,s){const c=Ac.get();c.set(n,s),this.h?this.h.next=c:this.g=c,this.h=c}}var Ac=new class{constructor(r,n){this.i=r,this.j=n,this.h=0,this.g=null}get(){let r;return 0<this.h?(this.h--,r=this.g,this.g=r.next,r.next=null):r=this.i(),r}}(()=>new af,r=>r.reset());class af{constructor(){this.next=this.g=this.h=null}set(n,s){this.h=n,this.g=s,this.next=null}reset(){this.next=this.g=this.h=null}}function lf(r){se.setTimeout(()=>{throw r},0)}function Cc(r,n){Io||cf(),yo||(Io(),yo=!0),Ic.add(r,n)}var Io;function cf(){var r=se.Promise.resolve(void 0);Io=function(){r.then(hf)}}var yo=!1,Ic=new of;function hf(){for(var r;r=sf();){try{r.h.call(r.g)}catch(s){lf(s)}var n=Ac;n.j(r),100>n.h&&(n.h++,r.next=n.g,n.g=r)}yo=!1}function os(r,n){qe.call(this),this.h=r||1,this.g=n||se,this.j=lt(this.lb,this),this.l=Date.now()}rt(os,qe);j=os.prototype;j.ca=!1;j.R=null;j.lb=function(){if(this.ca){var r=Date.now()-this.l;0<r&&r<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-r):(this.R&&(this.g.clearTimeout(this.R),this.R=null),nt(this,"tick"),this.ca&&(jo(this),this.start()))}};j.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function jo(r){r.ca=!1,r.R&&(r.g.clearTimeout(r.R),r.R=null)}j.M=function(){os.X.M.call(this),jo(this),delete this.g};function zo(r,n,s){if(typeof r=="function")s&&(r=lt(r,s));else if(r&&typeof r.handleEvent=="function")r=lt(r.handleEvent,r);else throw Error("Invalid listener argument");return 2147483647<Number(n)?-1:se.setTimeout(r,n||0)}function yc(r){r.g=zo(()=>{r.g=null,r.i&&(r.i=!1,yc(r))},r.j);const n=r.h;r.h=null,r.m.apply(null,n)}class uf extends yn{constructor(n,s){super(),this.m=n,this.j=s,this.h=null,this.i=!1,this.g=null}l(n){this.h=arguments,this.g?this.i=!0:yc(this)}M(){super.M(),this.g&&(se.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yr(r){yn.call(this),this.h=r,this.g={}}rt(Yr,yn);var ll=[];function _c(r,n,s,c){Array.isArray(s)||(s&&(ll[0]=s.toString()),s=ll);for(var f=0;f<s.length;f++){var d=xc(n,s[f],c||r.handleEvent,!1,r.h||r);if(!d)break;r.g[d.key]=d}}function bc(r){Uo(r.g,function(n,s){this.g.hasOwnProperty(s)&&Ho(n)},r),r.g={}}Yr.prototype.M=function(){Yr.X.M.call(this),bc(this)};Yr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function as(){this.g=!0}as.prototype.Aa=function(){this.g=!1};function ff(r,n,s,c,f,d){r.info(function(){if(r.g)if(d)for(var w="",y=d.split("&"),_=0;_<y.length;_++){var E=y[_].split("=");if(1<E.length){var S=E[0];E=E[1];var N=S.split("_");w=2<=N.length&&N[1]=="type"?w+(S+"="+E+"&"):w+(S+"=redacted&")}}else w=null;else w=d;return"XMLHTTP REQ ("+c+") [attempt "+f+"]: "+n+`
`+s+`
`+w})}function df(r,n,s,c,f,d,w){r.info(function(){return"XMLHTTP RESP ("+c+") [ attempt "+f+"]: "+n+`
`+s+`
`+d+" "+w})}function nr(r,n,s,c){r.info(function(){return"XMLHTTP TEXT ("+n+"): "+xf(r,s)+(c?" "+c:"")})}function gf(r,n){r.info(function(){return"TIMEOUT: "+n})}as.prototype.info=function(){};function xf(r,n){if(!r.g)return n;if(!n)return null;try{var s=JSON.parse(n);if(s){for(r=0;r<s.length;r++)if(Array.isArray(s[r])){var c=s[r];if(!(2>c.length)){var f=c[1];if(Array.isArray(f)&&!(1>f.length)){var d=f[0];if(d!="noop"&&d!="stop"&&d!="close")for(var w=1;w<f.length;w++)f[w]=""}}}}return Xo(s)}catch{return n}}var dr={},cl=null;function Yo(){return cl=cl||new qe}dr.Pa="serverreachability";function Tc(r){ct.call(this,dr.Pa,r)}rt(Tc,ct);function Kr(r){const n=Yo();nt(n,new Tc(n))}dr.STAT_EVENT="statevent";function Sc(r,n){ct.call(this,dr.STAT_EVENT,r),this.stat=n}rt(Sc,ct);function pt(r){const n=Yo();nt(n,new Sc(n,r))}dr.Qa="timingevent";function vc(r,n){ct.call(this,dr.Qa,r),this.size=n}rt(vc,ct);function si(r,n){if(typeof r!="function")throw Error("Fn must not be null and must be a function");return se.setTimeout(function(){r()},n)}var Ko={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},pf={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Zo(){}Zo.prototype.h=null;function hl(r){return r.h||(r.h=r.i())}function mf(){}var oi={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function qo(){ct.call(this,"d")}rt(qo,ct);function Qo(){ct.call(this,"c")}rt(Qo,ct);var _o;function ls(){}rt(ls,Zo);ls.prototype.g=function(){return new XMLHttpRequest};ls.prototype.i=function(){return{}};_o=new ls;function ai(r,n,s,c){this.l=r,this.j=n,this.m=s,this.U=c||1,this.S=new Yr(this),this.O=wf,r=wo?125:void 0,this.T=new os(r),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Nc}function Nc(){this.i=null,this.g="",this.h=!1}var wf=45e3,bo={},zi={};j=ai.prototype;j.setTimeout=function(r){this.O=r};function To(r,n,s){r.K=1,r.v=hs(en(n)),r.s=s,r.P=!0,Rc(r,null)}function Rc(r,n){r.F=Date.now(),li(r),r.A=en(r.v);var s=r.A,c=r.U;Array.isArray(c)||(c=[String(c)]),Fc(s.i,"t",c),r.C=0,s=r.l.H,r.h=new Nc,r.g=sh(r.l,s?n:null,!r.s),0<r.N&&(r.L=new uf(lt(r.La,r,r.g),r.N)),_c(r.S,r.g,"readystatechange",r.ib),n=r.H?dc(r.H):{},r.s?(r.u||(r.u="POST"),n["Content-Type"]="application/x-www-form-urlencoded",r.g.da(r.A,r.u,r.s,n)):(r.u="GET",r.g.da(r.A,r.u,null,n)),Kr(),ff(r.j,r.u,r.A,r.m,r.U,r.s)}j.ib=function(r){r=r.target;const n=this.L;n&&Qt(r)==3?n.l():this.La(r)};j.La=function(r){try{if(r==this.g)e:{const S=Qt(this.g);var n=this.g.Ea();const N=this.g.aa();if(!(3>S)&&(S!=3||wo||this.g&&(this.h.h||this.g.fa()||gl(this.g)))){this.I||S!=4||n==7||(n==8||0>=N?Kr(3):Kr(2)),cs(this);var s=this.g.aa();this.Y=s;t:if(Oc(this)){var c=gl(this.g);r="";var f=c.length,d=Qt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Pn(this),Hr(this);var w="";break t}this.h.i=new se.TextDecoder}for(n=0;n<f;n++)this.h.h=!0,r+=this.h.i.decode(c[n],{stream:d&&n==f-1});c.splice(0,f),this.h.g+=r,this.C=0,w=this.h.g}else w=this.g.fa();if(this.i=s==200,df(this.j,this.u,this.A,this.m,this.U,S,s),this.i){if(this.Z&&!this.J){t:{if(this.g){var y,_=this.g;if((y=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ji(y)){var E=y;break t}}E=null}if(s=E)nr(this.j,this.m,s,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,So(this,s);else{this.i=!1,this.o=3,pt(12),Pn(this),Hr(this);break e}}this.P?(Dc(this,S,w),wo&&this.i&&S==3&&(_c(this.S,this.T,"tick",this.hb),this.T.start())):(nr(this.j,this.m,w,null),So(this,w)),S==4&&Pn(this),this.i&&!this.I&&(S==4?th(this.l,this):(this.i=!1,li(this)))}else s==400&&0<w.indexOf("Unknown SID")?(this.o=3,pt(12)):(this.o=0,pt(13)),Pn(this),Hr(this)}}}catch{}finally{}};function Oc(r){return r.g?r.u=="GET"&&r.K!=2&&r.l.Da:!1}function Dc(r,n,s){let c=!0,f;for(;!r.I&&r.C<s.length;)if(f=Ef(r,s),f==zi){n==4&&(r.o=4,pt(14),c=!1),nr(r.j,r.m,null,"[Incomplete Response]");break}else if(f==bo){r.o=4,pt(15),nr(r.j,r.m,s,"[Invalid Chunk]"),c=!1;break}else nr(r.j,r.m,f,null),So(r,f);Oc(r)&&f!=zi&&f!=bo&&(r.h.g="",r.C=0),n!=4||s.length!=0||r.h.h||(r.o=1,pt(16),c=!1),r.i=r.i&&c,c?0<s.length&&!r.$&&(r.$=!0,n=r.l,n.g==r&&n.$&&!n.K&&(n.j.info("Great, no buffering proxy detected. Bytes received: "+s.length),ia(n),n.K=!0,pt(11))):(nr(r.j,r.m,s,"[Invalid Chunked Response]"),Pn(r),Hr(r))}j.hb=function(){if(this.g){var r=Qt(this.g),n=this.g.fa();this.C<n.length&&(cs(this),Dc(this,r,n),this.i&&r!=4&&li(this))}};function Ef(r,n){var s=r.C,c=n.indexOf(`
`,s);return c==-1?zi:(s=Number(n.substring(s,c)),isNaN(s)?bo:(c+=1,c+s>n.length?zi:(n=n.substr(c,s),r.C=c+s,n)))}j.cancel=function(){this.I=!0,Pn(this)};function li(r){r.V=Date.now()+r.O,Mc(r,r.O)}function Mc(r,n){if(r.B!=null)throw Error("WatchDog timer not null");r.B=si(lt(r.gb,r),n)}function cs(r){r.B&&(se.clearTimeout(r.B),r.B=null)}j.gb=function(){this.B=null;const r=Date.now();0<=r-this.V?(gf(this.j,this.A),this.K!=2&&(Kr(),pt(17)),Pn(this),this.o=2,Hr(this)):Mc(this,this.V-r)};function Hr(r){r.l.G==0||r.I||th(r.l,r)}function Pn(r){cs(r);var n=r.L;n&&typeof n.na=="function"&&n.na(),r.L=null,jo(r.T),bc(r.S),r.g&&(n=r.g,r.g=null,n.abort(),n.na())}function So(r,n){try{var s=r.l;if(s.G!=0&&(s.g==r||vo(s.h,r))){if(!r.J&&vo(s.h,r)&&s.G==3){try{var c=s.Fa.g.parse(n)}catch{c=null}if(Array.isArray(c)&&c.length==3){var f=c;if(f[0]==0){e:if(!s.u){if(s.g)if(s.g.F+3e3<r.F)Zi(s),gs(s);else break e;ra(s),pt(18)}}else s.Ba=f[1],0<s.Ba-s.T&&37500>f[2]&&s.L&&s.A==0&&!s.v&&(s.v=si(lt(s.cb,s),6e3));if(1>=Hc(s.h)&&s.ja){try{s.ja()}catch{}s.ja=void 0}}else kn(s,11)}else if((r.J||s.g==r)&&Zi(s),!ji(n))for(f=s.Fa.g.parse(n),n=0;n<f.length;n++){let E=f[n];if(s.T=E[0],E=E[1],s.G==2)if(E[0]=="c"){s.I=E[1],s.ka=E[2];const S=E[3];S!=null&&(s.ma=S,s.j.info("VER="+s.ma));const N=E[4];N!=null&&(s.Ca=N,s.j.info("SVER="+s.Ca));const z=E[5];z!=null&&typeof z=="number"&&0<z&&(c=1.5*z,s.J=c,s.j.info("backChannelRequestTimeoutMs_="+c)),c=s;const W=r.g;if(W){const fe=W.g?W.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fe){var d=c.h;d.g||fe.indexOf("spdy")==-1&&fe.indexOf("quic")==-1&&fe.indexOf("h2")==-1||(d.j=d.l,d.g=new Set,d.h&&(Jo(d,d.h),d.h=null))}if(c.D){const te=W.g?W.g.getResponseHeader("X-HTTP-Session-Id"):null;te&&(c.za=te,Me(c.F,c.D,te))}}s.G=3,s.l&&s.l.xa(),s.$&&(s.P=Date.now()-r.F,s.j.info("Handshake RTT: "+s.P+"ms")),c=s;var w=r;if(c.sa=ih(c,c.H?c.ka:null,c.V),w.J){Gc(c.h,w);var y=w,_=c.J;_&&y.setTimeout(_),y.B&&(cs(y),li(y)),c.g=w}else $c(c);0<s.i.length&&xs(s)}else E[0]!="stop"&&E[0]!="close"||kn(s,7);else s.G==3&&(E[0]=="stop"||E[0]=="close"?E[0]=="stop"?kn(s,7):na(s):E[0]!="noop"&&s.l&&s.l.wa(E),s.A=0)}}Kr(4)}catch{}}function Af(r){if(r.W&&typeof r.W=="function")return r.W();if(typeof Map<"u"&&r instanceof Map||typeof Set<"u"&&r instanceof Set)return Array.from(r.values());if(typeof r=="string")return r.split("");if(ns(r)){for(var n=[],s=r.length,c=0;c<s;c++)n.push(r[c]);return n}n=[],s=0;for(c in r)n[s++]=r[c];return n}function Cf(r){if(r.oa&&typeof r.oa=="function")return r.oa();if(!r.W||typeof r.W!="function"){if(typeof Map<"u"&&r instanceof Map)return Array.from(r.keys());if(!(typeof Set<"u"&&r instanceof Set)){if(ns(r)||typeof r=="string"){var n=[];r=r.length;for(var s=0;s<r;s++)n.push(s);return n}n=[],s=0;for(const c in r)n[s++]=c;return n}}}function Pc(r,n){if(r.forEach&&typeof r.forEach=="function")r.forEach(n,void 0);else if(ns(r)||typeof r=="string")Array.prototype.forEach.call(r,n,void 0);else for(var s=Cf(r),c=Af(r),f=c.length,d=0;d<f;d++)n.call(void 0,c[d],s&&s[d],r)}var kc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function If(r,n){if(r){r=r.split("&");for(var s=0;s<r.length;s++){var c=r[s].indexOf("="),f=null;if(0<=c){var d=r[s].substring(0,c);f=r[s].substring(c+1)}else d=r[s];n(d,f?decodeURIComponent(f.replace(/\+/g," ")):"")}}}function Ln(r,n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,r instanceof Ln){this.h=n!==void 0?n:r.h,Yi(this,r.j),this.s=r.s,this.g=r.g,Ki(this,r.m),this.l=r.l,n=r.i;var s=new Zr;s.i=n.i,n.g&&(s.g=new Map(n.g),s.h=n.h),ul(this,s),this.o=r.o}else r&&(s=String(r).match(kc))?(this.h=!!n,Yi(this,s[1]||"",!0),this.s=kr(s[2]||""),this.g=kr(s[3]||"",!0),Ki(this,s[4]),this.l=kr(s[5]||"",!0),ul(this,s[6]||"",!0),this.o=kr(s[7]||"")):(this.h=!!n,this.i=new Zr(null,this.h))}Ln.prototype.toString=function(){var r=[],n=this.j;n&&r.push(Br(n,fl,!0),":");var s=this.g;return(s||n=="file")&&(r.push("//"),(n=this.s)&&r.push(Br(n,fl,!0),"@"),r.push(encodeURIComponent(String(s)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s=this.m,s!=null&&r.push(":",String(s))),(s=this.l)&&(this.g&&s.charAt(0)!="/"&&r.push("/"),r.push(Br(s,s.charAt(0)=="/"?bf:_f,!0))),(s=this.i.toString())&&r.push("?",s),(s=this.o)&&r.push("#",Br(s,Sf)),r.join("")};function en(r){return new Ln(r)}function Yi(r,n,s){r.j=s?kr(n,!0):n,r.j&&(r.j=r.j.replace(/:$/,""))}function Ki(r,n){if(n){if(n=Number(n),isNaN(n)||0>n)throw Error("Bad port number "+n);r.m=n}else r.m=null}function ul(r,n,s){n instanceof Zr?(r.i=n,vf(r.i,r.h)):(s||(n=Br(n,Tf)),r.i=new Zr(n,r.h))}function Me(r,n,s){r.i.set(n,s)}function hs(r){return Me(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function kr(r,n){return r?n?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function Br(r,n,s){return typeof r=="string"?(r=encodeURI(r).replace(n,yf),s&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function yf(r){return r=r.charCodeAt(0),"%"+(r>>4&15).toString(16)+(r&15).toString(16)}var fl=/[#\/\?@]/g,_f=/[#\?:]/g,bf=/[#\?]/g,Tf=/[#\?@]/g,Sf=/#/g;function Zr(r,n){this.h=this.g=null,this.i=r||null,this.j=!!n}function _n(r){r.g||(r.g=new Map,r.h=0,r.i&&If(r.i,function(n,s){r.add(decodeURIComponent(n.replace(/\+/g," ")),s)}))}j=Zr.prototype;j.add=function(r,n){_n(this),this.i=null,r=gr(this,r);var s=this.g.get(r);return s||this.g.set(r,s=[]),s.push(n),this.h+=1,this};function Bc(r,n){_n(r),n=gr(r,n),r.g.has(n)&&(r.i=null,r.h-=r.g.get(n).length,r.g.delete(n))}function Lc(r,n){return _n(r),n=gr(r,n),r.g.has(n)}j.forEach=function(r,n){_n(this),this.g.forEach(function(s,c){s.forEach(function(f){r.call(n,f,c,this)},this)},this)};j.oa=function(){_n(this);const r=Array.from(this.g.values()),n=Array.from(this.g.keys()),s=[];for(let c=0;c<n.length;c++){const f=r[c];for(let d=0;d<f.length;d++)s.push(n[c])}return s};j.W=function(r){_n(this);let n=[];if(typeof r=="string")Lc(this,r)&&(n=n.concat(this.g.get(gr(this,r))));else{r=Array.from(this.g.values());for(let s=0;s<r.length;s++)n=n.concat(r[s])}return n};j.set=function(r,n){return _n(this),this.i=null,r=gr(this,r),Lc(this,r)&&(this.h-=this.g.get(r).length),this.g.set(r,[n]),this.h+=1,this};j.get=function(r,n){return r?(r=this.W(r),0<r.length?String(r[0]):n):n};function Fc(r,n,s){Bc(r,n),0<s.length&&(r.i=null,r.g.set(gr(r,n),Lo(s)),r.h+=s.length)}j.toString=function(){if(this.i)return this.i;if(!this.g)return"";const r=[],n=Array.from(this.g.keys());for(var s=0;s<n.length;s++){var c=n[s];const d=encodeURIComponent(String(c)),w=this.W(c);for(c=0;c<w.length;c++){var f=d;w[c]!==""&&(f+="="+encodeURIComponent(String(w[c]))),r.push(f)}}return this.i=r.join("&")};function gr(r,n){return n=String(n),r.j&&(n=n.toLowerCase()),n}function vf(r,n){n&&!r.j&&(_n(r),r.i=null,r.g.forEach(function(s,c){var f=c.toLowerCase();c!=f&&(Bc(this,c),Fc(this,f,s))},r)),r.j=n}var Nf=class{constructor(r,n){this.h=r,this.g=n}};function Uc(r){this.l=r||Rf,se.PerformanceNavigationTiming?(r=se.performance.getEntriesByType("navigation"),r=0<r.length&&(r[0].nextHopProtocol=="hq"||r[0].nextHopProtocol=="h2")):r=!!(se.g&&se.g.Ga&&se.g.Ga()&&se.g.Ga().$b),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Rf=10;function Vc(r){return r.h?!0:r.g?r.g.size>=r.j:!1}function Hc(r){return r.h?1:r.g?r.g.size:0}function vo(r,n){return r.h?r.h==n:r.g?r.g.has(n):!1}function Jo(r,n){r.g?r.g.add(n):r.h=n}function Gc(r,n){r.h&&r.h==n?r.h=null:r.g&&r.g.has(n)&&r.g.delete(n)}Uc.prototype.cancel=function(){if(this.i=Wc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const r of this.g.values())r.cancel();this.g.clear()}};function Wc(r){if(r.h!=null)return r.i.concat(r.h.D);if(r.g!=null&&r.g.size!==0){let n=r.i;for(const s of r.g.values())n=n.concat(s.D);return n}return Lo(r.i)}function $o(){}$o.prototype.stringify=function(r){return se.JSON.stringify(r,void 0)};$o.prototype.parse=function(r){return se.JSON.parse(r,void 0)};function Of(){this.g=new $o}function Df(r,n,s){const c=s||"";try{Pc(r,function(f,d){let w=f;ri(f)&&(w=Xo(f)),n.push(c+d+"="+encodeURIComponent(w))})}catch(f){throw n.push(c+"type="+encodeURIComponent("_badmap")),f}}function Mf(r,n){const s=new as;if(se.Image){const c=new Image;c.onload=Ni(Oi,s,c,"TestLoadImage: loaded",!0,n),c.onerror=Ni(Oi,s,c,"TestLoadImage: error",!1,n),c.onabort=Ni(Oi,s,c,"TestLoadImage: abort",!1,n),c.ontimeout=Ni(Oi,s,c,"TestLoadImage: timeout",!1,n),se.setTimeout(function(){c.ontimeout&&c.ontimeout()},1e4),c.src=r}else n(!1)}function Oi(r,n,s,c,f){try{n.onload=null,n.onerror=null,n.onabort=null,n.ontimeout=null,f(c)}catch{}}function us(r){this.l=r.ac||null,this.j=r.jb||!1}rt(us,Zo);us.prototype.g=function(){return new fs(this.l,this.j)};us.prototype.i=function(r){return function(){return r}}({});function fs(r,n){qe.call(this),this.D=r,this.u=n,this.m=void 0,this.readyState=ea,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}rt(fs,qe);var ea=0;j=fs.prototype;j.open=function(r,n){if(this.readyState!=ea)throw this.abort(),Error("Error reopening a connection");this.C=r,this.B=n,this.readyState=1,qr(this)};j.send=function(r){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const n={headers:this.v,method:this.C,credentials:this.m,cache:void 0};r&&(n.body=r),(this.D||se).fetch(new Request(this.B,n)).then(this.Wa.bind(this),this.ga.bind(this))};j.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ci(this)),this.readyState=ea};j.Wa=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,qr(this)),this.g&&(this.readyState=3,qr(this),this.g)))if(this.responseType==="arraybuffer")r.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof se.ReadableStream<"u"&&"body"in r){if(this.j=r.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Xc(this)}else r.text().then(this.Va.bind(this),this.ga.bind(this))};function Xc(r){r.j.read().then(r.Ta.bind(r)).catch(r.ga.bind(r))}j.Ta=function(r){if(this.g){if(this.u&&r.value)this.response.push(r.value);else if(!this.u){var n=r.value?r.value:new Uint8Array(0);(n=this.A.decode(n,{stream:!r.done}))&&(this.response=this.responseText+=n)}r.done?ci(this):qr(this),this.readyState==3&&Xc(this)}};j.Va=function(r){this.g&&(this.response=this.responseText=r,ci(this))};j.Ua=function(r){this.g&&(this.response=r,ci(this))};j.ga=function(){this.g&&ci(this)};function ci(r){r.readyState=4,r.l=null,r.j=null,r.A=null,qr(r)}j.setRequestHeader=function(r,n){this.v.append(r,n)};j.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""};j.getAllResponseHeaders=function(){if(!this.h)return"";const r=[],n=this.h.entries();for(var s=n.next();!s.done;)s=s.value,r.push(s[0]+": "+s[1]),s=n.next();return r.join(`\r
`)};function qr(r){r.onreadystatechange&&r.onreadystatechange.call(r)}Object.defineProperty(fs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(r){this.m=r?"include":"same-origin"}});var Pf=se.JSON.parse;function Ve(r){qe.call(this),this.headers=new Map,this.u=r||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=jc,this.K=this.L=!1}rt(Ve,qe);var jc="",kf=/^https?$/i,Bf=["POST","PUT"];j=Ve.prototype;j.Ka=function(r){this.L=r};j.da=function(r,n,s,c){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+r);n=n?n.toUpperCase():"GET",this.H=r,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():_o.g(),this.C=this.u?hl(this.u):hl(_o),this.g.onreadystatechange=lt(this.Ha,this);try{this.F=!0,this.g.open(n,String(r),!0),this.F=!1}catch(d){dl(this,d);return}if(r=s||"",s=new Map(this.headers),c)if(Object.getPrototypeOf(c)===Object.prototype)for(var f in c)s.set(f,c[f]);else if(typeof c.keys=="function"&&typeof c.get=="function")for(const d of c.keys())s.set(d,c.get(d));else throw Error("Unknown input type for opt_headers: "+String(c));c=Array.from(s.keys()).find(d=>d.toLowerCase()=="content-type"),f=se.FormData&&r instanceof se.FormData,!(0<=cc(Bf,n))||c||f||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[d,w]of s)this.g.setRequestHeader(d,w);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Kc(this),0<this.B&&((this.K=Lf(this.g))?(this.g.timeout=this.B,this.g.ontimeout=lt(this.qa,this)):this.A=zo(this.qa,this.B,this)),this.v=!0,this.g.send(r),this.v=!1}catch(d){dl(this,d)}};function Lf(r){return jr&&J0()&&typeof r.timeout=="number"&&r.ontimeout!==void 0}j.qa=function(){typeof Bo<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,nt(this,"timeout"),this.abort(8))};function dl(r,n){r.h=!1,r.g&&(r.l=!0,r.g.abort(),r.l=!1),r.j=n,r.m=5,zc(r),ds(r)}function zc(r){r.D||(r.D=!0,nt(r,"complete"),nt(r,"error"))}j.abort=function(r){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=r||7,nt(this,"complete"),nt(this,"abort"),ds(this))};j.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ds(this,!0)),Ve.X.M.call(this)};j.Ha=function(){this.s||(this.F||this.v||this.l?Yc(this):this.fb())};j.fb=function(){Yc(this)};function Yc(r){if(r.h&&typeof Bo<"u"&&(!r.C[1]||Qt(r)!=4||r.aa()!=2)){if(r.v&&Qt(r)==4)zo(r.Ha,0,r);else if(nt(r,"readystatechange"),Qt(r)==4){r.h=!1;try{const y=r.aa();e:switch(y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var s;if(!(s=n)){var c;if(c=y===0){var f=String(r.H).match(kc)[1]||null;if(!f&&se.self&&se.self.location){var d=se.self.location.protocol;f=d.substr(0,d.length-1)}c=!kf.test(f?f.toLowerCase():"")}s=c}if(s)nt(r,"complete"),nt(r,"success");else{r.m=6;try{var w=2<Qt(r)?r.g.statusText:""}catch{w=""}r.j=w+" ["+r.aa()+"]",zc(r)}}finally{ds(r)}}}}function ds(r,n){if(r.g){Kc(r);const s=r.g,c=r.C[0]?Xi:null;r.g=null,r.C=null,n||nt(r,"ready");try{s.onreadystatechange=c}catch{}}}function Kc(r){r.g&&r.K&&(r.g.ontimeout=null),r.A&&(se.clearTimeout(r.A),r.A=null)}function Qt(r){return r.g?r.g.readyState:0}j.aa=function(){try{return 2<Qt(this)?this.g.status:-1}catch{return-1}};j.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};j.Sa=function(r){if(this.g){var n=this.g.responseText;return r&&n.indexOf(r)==0&&(n=n.substring(r.length)),Pf(n)}};function gl(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.J){case jc:case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch{return null}}j.Ea=function(){return this.m};j.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Zc(r){let n="";return Uo(r,function(s,c){n+=c,n+=":",n+=s,n+=`\r
`}),n}function ta(r,n,s){e:{for(c in s){var c=!1;break e}c=!0}c||(s=Zc(s),typeof r=="string"?s!=null&&encodeURIComponent(String(s)):Me(r,n,s))}function Or(r,n,s){return s&&s.internalChannelParams&&s.internalChannelParams[r]||n}function qc(r){this.Ca=0,this.i=[],this.j=new as,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Or("failFast",!1,r),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Or("baseRetryDelayMs",5e3,r),this.bb=Or("retryDelaySeedMs",1e4,r),this.$a=Or("forwardChannelMaxRetries",2,r),this.ta=Or("forwardChannelRequestTimeoutMs",2e4,r),this.ra=r&&r.xmlHttpFactory||void 0,this.Da=r&&r.Zb||!1,this.J=void 0,this.H=r&&r.supportsCrossDomainXhr||!1,this.I="",this.h=new Uc(r&&r.concurrentRequestLimit),this.Fa=new Of,this.O=r&&r.fastHandshake||!1,this.N=r&&r.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=r&&r.Xb||!1,r&&r.Aa&&this.j.Aa(),r&&r.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&r&&r.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}j=qc.prototype;j.ma=8;j.G=1;function na(r){if(Qc(r),r.G==3){var n=r.U++,s=en(r.F);Me(s,"SID",r.I),Me(s,"RID",n),Me(s,"TYPE","terminate"),hi(r,s),n=new ai(r,r.j,n,void 0),n.K=2,n.v=hs(en(s)),s=!1,se.navigator&&se.navigator.sendBeacon&&(s=se.navigator.sendBeacon(n.v.toString(),"")),!s&&se.Image&&(new Image().src=n.v,s=!0),s||(n.g=sh(n.l,null),n.g.da(n.v)),n.F=Date.now(),li(n)}rh(r)}function gs(r){r.g&&(ia(r),r.g.cancel(),r.g=null)}function Qc(r){gs(r),r.u&&(se.clearTimeout(r.u),r.u=null),Zi(r),r.h.cancel(),r.m&&(typeof r.m=="number"&&se.clearTimeout(r.m),r.m=null)}function xs(r){Vc(r.h)||r.m||(r.m=!0,Cc(r.Ja,r),r.C=0)}function Ff(r,n){return Hc(r.h)>=r.h.j-(r.m?1:0)?!1:r.m?(r.i=n.D.concat(r.i),!0):r.G==1||r.G==2||r.C>=(r.Za?0:r.$a)?!1:(r.m=si(lt(r.Ja,r,n),nh(r,r.C)),r.C++,!0)}j.Ja=function(r){if(this.m)if(this.m=null,this.G==1){if(!r){this.U=Math.floor(1e5*Math.random()),r=this.U++;const f=new ai(this,this.j,r,void 0);let d=this.s;if(this.S&&(d?(d=dc(d),gc(d,this.S)):d=this.S),this.o!==null||this.N||(f.H=d,d=null),this.O)e:{for(var n=0,s=0;s<this.i.length;s++){t:{var c=this.i[s];if("__data__"in c.g&&(c=c.g.__data__,typeof c=="string")){c=c.length;break t}c=void 0}if(c===void 0)break;if(n+=c,4096<n){n=s;break e}if(n===4096||s===this.i.length-1){n=s+1;break e}}n=1e3}else n=1e3;n=Jc(this,f,n),s=en(this.F),Me(s,"RID",r),Me(s,"CVER",22),this.D&&Me(s,"X-HTTP-Session-Id",this.D),hi(this,s),d&&(this.N?n="headers="+encodeURIComponent(String(Zc(d)))+"&"+n:this.o&&ta(s,this.o,d)),Jo(this.h,f),this.Ya&&Me(s,"TYPE","init"),this.O?(Me(s,"$req",n),Me(s,"SID","null"),f.Z=!0,To(f,s,null)):To(f,s,n),this.G=2}}else this.G==3&&(r?xl(this,r):this.i.length==0||Vc(this.h)||xl(this))};function xl(r,n){var s;n?s=n.m:s=r.U++;const c=en(r.F);Me(c,"SID",r.I),Me(c,"RID",s),Me(c,"AID",r.T),hi(r,c),r.o&&r.s&&ta(c,r.o,r.s),s=new ai(r,r.j,s,r.C+1),r.o===null&&(s.H=r.s),n&&(r.i=n.D.concat(r.i)),n=Jc(r,s,1e3),s.setTimeout(Math.round(.5*r.ta)+Math.round(.5*r.ta*Math.random())),Jo(r.h,s),To(s,c,n)}function hi(r,n){r.ia&&Uo(r.ia,function(s,c){Me(n,c,s)}),r.l&&Pc({},function(s,c){Me(n,c,s)})}function Jc(r,n,s){s=Math.min(r.i.length,s);var c=r.l?lt(r.l.Ra,r.l,r):null;e:{var f=r.i;let d=-1;for(;;){const w=["count="+s];d==-1?0<s?(d=f[0].h,w.push("ofs="+d)):d=0:w.push("ofs="+d);let y=!0;for(let _=0;_<s;_++){let E=f[_].h;const S=f[_].g;if(E-=d,0>E)d=Math.max(0,f[_].h-100),y=!1;else try{Df(S,w,"req"+E+"_")}catch{c&&c(S)}}if(y){c=w.join("&");break e}}}return r=r.i.splice(0,s),n.D=r,c}function $c(r){r.g||r.u||(r.Z=1,Cc(r.Ia,r),r.A=0)}function ra(r){return r.g||r.u||3<=r.A?!1:(r.Z++,r.u=si(lt(r.Ia,r),nh(r,r.A)),r.A++,!0)}j.Ia=function(){if(this.u=null,eh(this),this.$&&!(this.K||this.g==null||0>=this.P)){var r=2*this.P;this.j.info("BP detection timer enabled: "+r),this.B=si(lt(this.eb,this),r)}};j.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,pt(10),gs(this),eh(this))};function ia(r){r.B!=null&&(se.clearTimeout(r.B),r.B=null)}function eh(r){r.g=new ai(r,r.j,"rpc",r.Z),r.o===null&&(r.g.H=r.s),r.g.N=0;var n=en(r.sa);Me(n,"RID","rpc"),Me(n,"SID",r.I),Me(n,"CI",r.L?"0":"1"),Me(n,"AID",r.T),Me(n,"TYPE","xmlhttp"),hi(r,n),r.o&&r.s&&ta(n,r.o,r.s),r.J&&r.g.setTimeout(r.J);var s=r.g;r=r.ka,s.K=1,s.v=hs(en(n)),s.s=null,s.P=!0,Rc(s,r)}j.cb=function(){this.v!=null&&(this.v=null,gs(this),ra(this),pt(19))};function Zi(r){r.v!=null&&(se.clearTimeout(r.v),r.v=null)}function th(r,n){var s=null;if(r.g==n){Zi(r),ia(r),r.g=null;var c=2}else if(vo(r.h,n))s=n.D,Gc(r.h,n),c=1;else return;if(r.G!=0){if(r.pa=n.Y,n.i)if(c==1){s=n.s?n.s.length:0,n=Date.now()-n.F;var f=r.C;c=Yo(),nt(c,new vc(c,s)),xs(r)}else $c(r);else if(f=n.o,f==3||f==0&&0<r.pa||!(c==1&&Ff(r,n)||c==2&&ra(r)))switch(s&&0<s.length&&(n=r.h,n.i=n.i.concat(s)),f){case 1:kn(r,5);break;case 4:kn(r,10);break;case 3:kn(r,6);break;default:kn(r,2)}}}function nh(r,n){let s=r.Xa+Math.floor(Math.random()*r.bb);return r.l||(s*=2),s*n}function kn(r,n){if(r.j.info("Error code "+n),n==2){var s=null;r.l&&(s=null);var c=lt(r.kb,r);s||(s=new Ln("//www.google.com/images/cleardot.gif"),se.location&&se.location.protocol=="http"||Yi(s,"https"),hs(s)),Mf(s.toString(),c)}else pt(2);r.G=0,r.l&&r.l.va(n),rh(r),Qc(r)}j.kb=function(r){r?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function rh(r){if(r.G=0,r.la=[],r.l){const n=Wc(r.h);(n.length!=0||r.i.length!=0)&&(sl(r.la,n),sl(r.la,r.i),r.h.i.length=0,Lo(r.i),r.i.length=0),r.l.ua()}}function ih(r,n,s){var c=s instanceof Ln?en(s):new Ln(s,void 0);if(c.g!="")n&&(c.g=n+"."+c.g),Ki(c,c.m);else{var f=se.location;c=f.protocol,n=n?n+"."+f.hostname:f.hostname,f=+f.port;var d=new Ln(null,void 0);c&&Yi(d,c),n&&(d.g=n),f&&Ki(d,f),s&&(d.l=s),c=d}return s=r.D,n=r.za,s&&n&&Me(c,s,n),Me(c,"VER",r.ma),hi(r,c),c}function sh(r,n,s){if(n&&!r.H)throw Error("Can't create secondary domain capable XhrIo object.");return n=s&&r.Da&&!r.ra?new Ve(new us({jb:!0})):new Ve(r.ra),n.Ka(r.H),n}function oh(){}j=oh.prototype;j.xa=function(){};j.wa=function(){};j.va=function(){};j.ua=function(){};j.Ra=function(){};function Pt(r,n){qe.call(this),this.g=new qc(n),this.l=r,this.h=n&&n.messageUrlParams||null,r=n&&n.messageHeaders||null,n&&n.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.s=r,r=n&&n.initMessageHeaders||null,n&&n.messageContentType&&(r?r["X-WebChannel-Content-Type"]=n.messageContentType:r={"X-WebChannel-Content-Type":n.messageContentType}),n&&n.ya&&(r?r["X-WebChannel-Client-Profile"]=n.ya:r={"X-WebChannel-Client-Profile":n.ya}),this.g.S=r,(r=n&&n.Yb)&&!ji(r)&&(this.g.o=r),this.A=n&&n.supportsCrossDomainXhr||!1,this.v=n&&n.sendRawJson||!1,(n=n&&n.httpSessionIdParam)&&!ji(n)&&(this.g.D=n,r=this.h,r!==null&&n in r&&(r=this.h,n in r&&delete r[n])),this.j=new xr(this)}rt(Pt,qe);Pt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var r=this.g,n=this.l,s=this.h||void 0;pt(0),r.V=n,r.ia=s||{},r.L=r.Y,r.F=ih(r,null,r.V),xs(r)};Pt.prototype.close=function(){na(this.g)};Pt.prototype.u=function(r){var n=this.g;if(typeof r=="string"){var s={};s.__data__=r,r=s}else this.v&&(s={},s.__data__=Xo(r),r=s);n.i.push(new Nf(n.ab++,r)),n.G==3&&xs(n)};Pt.prototype.M=function(){this.g.l=null,delete this.j,na(this.g),delete this.g,Pt.X.M.call(this)};function ah(r){qo.call(this);var n=r.__sm__;if(n){e:{for(const s in n){r=s;break e}r=void 0}(this.i=r)&&(r=this.i,n=n!==null&&r in n?n[r]:void 0),this.data=n}else this.data=r}rt(ah,qo);function lh(){Qo.call(this),this.status=1}rt(lh,Qo);function xr(r){this.g=r}rt(xr,oh);xr.prototype.xa=function(){nt(this.g,"a")};xr.prototype.wa=function(r){nt(this.g,new ah(r))};xr.prototype.va=function(r){nt(this.g,new lh)};xr.prototype.ua=function(){nt(this.g,"b")};Pt.prototype.send=Pt.prototype.u;Pt.prototype.open=Pt.prototype.m;Pt.prototype.close=Pt.prototype.close;Ko.NO_ERROR=0;Ko.TIMEOUT=8;Ko.HTTP_ERROR=6;pf.COMPLETE="complete";mf.EventType=oi;oi.OPEN="a";oi.CLOSE="b";oi.ERROR="c";oi.MESSAGE="d";qe.prototype.listen=qe.prototype.N;Ve.prototype.listenOnce=Ve.prototype.O;Ve.prototype.getLastError=Ve.prototype.Oa;Ve.prototype.getLastErrorCode=Ve.prototype.Ea;Ve.prototype.getStatus=Ve.prototype.aa;Ve.prototype.getResponseJson=Ve.prototype.Sa;Ve.prototype.getResponseText=Ve.prototype.fa;Ve.prototype.send=Ve.prototype.da;Ve.prototype.setWithCredentials=Ve.prototype.Ka;const pl="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(n){this.uid=n}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(n){return n.uid===this.uid}}at.UNAUTHENTICATED=new at(null),at.GOOGLE_CREDENTIALS=new at("google-credentials-uid"),at.FIRST_PARTY=new at("first-party-uid"),at.MOCK_USER=new at("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ui="9.18.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr=new Mo("@firebase/firestore");function St(r,...n){if(cr.logLevel<=Ce.DEBUG){const s=n.map(oa);cr.debug(`Firestore (${ui}): ${r}`,...s)}}function sa(r,...n){if(cr.logLevel<=Ce.ERROR){const s=n.map(oa);cr.error(`Firestore (${ui}): ${r}`,...s)}}function Uf(r,...n){if(cr.logLevel<=Ce.WARN){const s=n.map(oa);cr.warn(`Firestore (${ui}): ${r}`,...s)}}function oa(r){if(typeof r=="string")return r;try{return n=r,JSON.stringify(n)}catch{return r}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(r="Unexpected state"){const n=`FIRESTORE (${ui}) INTERNAL ASSERTION FAILED: `+r;throw sa(n),new Error(n)}function qi(r,n){r||aa()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Nt extends nn{constructor(n,s){super(n,s),this.code=n,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(){this.promise=new Promise((n,s)=>{this.resolve=n,this.reject=s})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(n,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${n}`)}}class Vf{getToken(){return Promise.resolve(null)}invalidateToken(){}start(n,s){n.enqueueRetryable(()=>s(at.UNAUTHENTICATED))}shutdown(){}}class Hf{constructor(n){this.token=n,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(n,s){this.changeListener=s,n.enqueueRetryable(()=>s(this.token.user))}shutdown(){this.changeListener=null}}class Gf{constructor(n){this.t=n,this.currentUser=at.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(n,s){let c=this.i;const f=_=>this.i!==c?(c=this.i,s(_)):Promise.resolve();let d=new sr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new sr,n.enqueueRetryable(()=>f(this.currentUser))};const w=()=>{const _=d;n.enqueueRetryable(async()=>{await _.promise,await f(this.currentUser)})},y=_=>{St("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.auth.addAuthTokenListener(this.o),w()};this.t.onInit(_=>y(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?y(_):(St("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new sr)}},0),w()}getToken(){const n=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then(c=>this.i!==n?(St("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):c?(qi(typeof c.accessToken=="string"),new ch(c.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const n=this.auth&&this.auth.getUid();return qi(n===null||typeof n=="string"),new at(n)}}class Wf{constructor(n,s,c,f){this.h=n,this.l=s,this.m=c,this.g=f,this.type="FirstParty",this.user=at.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(qi(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const n=this.I();return n&&this.p.set("Authorization",n),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Xf{constructor(n,s,c,f){this.h=n,this.l=s,this.m=c,this.g=f}getToken(){return Promise.resolve(new Wf(this.h,this.l,this.m,this.g))}start(n,s){n.enqueueRetryable(()=>s(at.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jf{constructor(n){this.value=n,this.type="AppCheck",this.headers=new Map,n&&n.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zf{constructor(n){this.T=n,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(n,s){const c=d=>{d.error!=null&&St("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const w=d.token!==this.A;return this.A=d.token,St("FirebaseAppCheckTokenProvider",`Received ${w?"new":"existing"} token.`),w?s(d.token):Promise.resolve()};this.o=d=>{n.enqueueRetryable(()=>c(d))};const f=d=>{St("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.appCheck.addTokenListener(this.o)};this.T.onInit(d=>f(d)),setTimeout(()=>{if(!this.appCheck){const d=this.T.getImmediate({optional:!0});d?f(d):St("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const n=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(n).then(s=>s?(qi(typeof s.token=="string"),this.A=s.token,new jf(s.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(r){const n=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(r);if(n&&typeof n.getRandomValues=="function")n.getRandomValues(s);else for(let c=0;c<r;c++)s[c]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{static R(){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=Math.floor(256/n.length)*n.length;let c="";for(;c.length<20;){const f=Yf(40);for(let d=0;d<f.length;++d)c.length<20&&f[d]<s&&(c+=n.charAt(f[d]%n.length))}return c}}function hh(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(n,s,c,f,d,w,y,_){this.databaseId=n,this.appId=s,this.persistenceKey=c,this.host=f,this.ssl=d,this.forceLongPolling=w,this.autoDetectLongPolling=y,this.useFetchStreams=_}}class Qi{constructor(n,s){this.projectId=n,this.database=s||"(default)"}static empty(){return new Qi("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(n){return n instanceof Qi&&n.projectId===this.projectId&&n.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ml,de;(de=ml||(ml={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";function ro(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(n,s,c=1e3,f=1.5,d=6e4){this.Ys=n,this.timerId=s,this.po=c,this.Io=f,this.To=d,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}Po(){this.Eo=this.To}vo(n){this.cancel();const s=Math.floor(this.Eo+this.bo()),c=Math.max(0,Date.now()-this.Ro),f=Math.max(0,s-c);f>0&&St("ExponentialBackoff",`Backing off for ${f} ms (base delay: ${this.Eo} ms, delay with jitter: ${s} ms, last attempt: ${c} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,f,()=>(this.Ro=Date.now(),n())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){this.Ao!==null&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){this.Ao!==null&&(this.Ao.cancel(),this.Ao=null)}bo(){return(Math.random()-.5)*this.Eo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(n,s,c,f,d){this.asyncQueue=n,this.timerId=s,this.targetTimeMs=c,this.op=f,this.removalCallback=d,this.deferred=new sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(w=>{})}static createAndSchedule(n,s,c,f,d){const w=Date.now()+c,y=new la(n,s,w,f,d);return y.start(c),y}start(n){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),n)}skipDelay(){return this.handleDelayElapsed()}cancel(n){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Nt(vt.CANCELLED,"Operation cancelled"+(n?": "+n:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(n=>this.deferred.resolve(n))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qf(r,n){if(sa("AsyncQueue",`${n}: ${r}`),hh(r))return new Nt(vt.UNAVAILABLE,`${n}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(n,s,c,f){this.authCredentials=n,this.appCheckCredentials=s,this.asyncQueue=c,this.databaseInfo=f,this.user=at.UNAUTHENTICATED,this.clientId=Kf.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(c,async d=>{St("FirestoreClient","Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(c,d=>(St("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(n){this.authCredentialListener=n}setAppCheckTokenChangeListener(n){this.appCheckCredentialListener=n}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Nt(vt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const n=new sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),n.resolve()}catch(s){const c=Qf(s,"Failed to shutdown persistence");n.reject(c)}}),n.promise}}const wl=new Map;function $f(r,n,s,c){if(n===!0&&c===!0)throw new Nt(vt.INVALID_ARGUMENT,`${r} and ${s} cannot be used together.`)}function ed(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const n=function(s){return s.constructor?s.constructor.name:null}(r);return n?`a custom ${n} object`:"an object"}}return typeof r=="function"?"a function":aa()}function td(r,n){if("_delegate"in r&&(r=r._delegate),!(r instanceof n)){if(n.name===r.constructor.name)throw new Nt(vt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=ed(r);throw new Nt(vt.INVALID_ARGUMENT,`Expected type '${n.name}', but it was: ${s}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(n){var s;if(n.host===void 0){if(n.ssl!==void 0)throw new Nt(vt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=n.host,this.ssl=(s=n.ssl)===null||s===void 0||s;if(this.credentials=n.credentials,this.ignoreUndefinedProperties=!!n.ignoreUndefinedProperties,n.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(n.cacheSizeBytes!==-1&&n.cacheSizeBytes<1048576)throw new Nt(vt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=n.cacheSizeBytes}this.experimentalForceLongPolling=!!n.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!n.experimentalAutoDetectLongPolling,this.useFetchStreams=!!n.useFetchStreams,$f("experimentalForceLongPolling",n.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",n.experimentalAutoDetectLongPolling)}isEqual(n){return this.host===n.host&&this.ssl===n.ssl&&this.credentials===n.credentials&&this.cacheSizeBytes===n.cacheSizeBytes&&this.experimentalForceLongPolling===n.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===n.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===n.ignoreUndefinedProperties&&this.useFetchStreams===n.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(n,s,c,f){this._authCredentials=n,this._appCheckCredentials=s,this._databaseId=c,this._app=f,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new El({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Nt(vt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(n){if(this._settingsFrozen)throw new Nt(vt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new El(n),n.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new Vf;switch(s.type){case"gapi":const c=s.client;return new Xf(c,s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Nt(vt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(n.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=wl.get(n);s&&(St("ComponentProvider","Removing Datastore"),wl.delete(n),s.terminate())}(this),Promise.resolve()}}function nd(r,n,s,c={}){var f;const d=(r=td(r,uh))._getSettings();if(d.host!=="firestore.googleapis.com"&&d.host!==n&&Uf("Host has been set in both settings() and useEmulator(), emulator host will be used"),r._setSettings(Object.assign(Object.assign({},d),{host:`${n}:${s}`,ssl:!1})),c.mockUserToken){let w,y;if(typeof c.mockUserToken=="string")w=c.mockUserToken,y=at.MOCK_USER;else{w=A1(c.mockUserToken,(f=r._app)===null||f===void 0?void 0:f.options.projectId);const _=c.mockUserToken.sub||c.mockUserToken.user_id;if(!_)throw new Nt(vt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new at(_)}r._authCredentials=new Hf(new ch(w,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new qf(this,"async_queue_retry"),this.Hc=()=>{const s=ro();s&&St("AsyncQueue","Visibility state changed to "+s.visibilityState),this.ko.Vo()};const n=ro();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(n){this.enqueue(n)}enqueueAndForgetEvenWhileRestricted(n){this.Jc(),this.Yc(n)}enterRestrictedMode(n){if(!this.Kc){this.Kc=!0,this.zc=n||!1;const s=ro();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this.Hc)}}enqueue(n){if(this.Jc(),this.Kc)return new Promise(()=>{});const s=new sr;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(n().then(s.resolve,s.reject),s.promise)).then(()=>s.promise)}enqueueRetryable(n){this.enqueueAndForget(()=>(this.Uc.push(n),this.Zc()))}async Zc(){if(this.Uc.length!==0){try{await this.Uc[0](),this.Uc.shift(),this.ko.reset()}catch(n){if(!hh(n))throw n;St("AsyncQueue","Operation failed with retryable error: "+n)}this.Uc.length>0&&this.ko.vo(()=>this.Zc())}}Yc(n){const s=this.qc.then(()=>(this.jc=!0,n().catch(c=>{this.Qc=c,this.jc=!1;const f=function(d){let w=d.message||"";return d.stack&&(w=d.stack.includes(d.message)?d.stack:d.message+`
`+d.stack),w}(c);throw sa("INTERNAL UNHANDLED ERROR: ",f),c}).then(c=>(this.jc=!1,c))));return this.qc=s,s}enqueueAfterDelay(n,s,c){this.Jc(),this.Wc.indexOf(n)>-1&&(s=0);const f=la.createAndSchedule(this,n,s,c,d=>this.Xc(d));return this.Gc.push(f),f}Jc(){this.Qc&&aa()}verifyOperationInProgress(){}async ta(){let n;do n=this.qc,await n;while(n!==this.qc)}ea(n){for(const s of this.Gc)if(s.timerId===n)return!0;return!1}na(n){return this.ta().then(()=>{this.Gc.sort((s,c)=>s.targetTimeMs-c.targetTimeMs);for(const s of this.Gc)if(s.skipDelay(),n!=="all"&&s.timerId===n)break;return this.ta()})}sa(n){this.Wc.push(n)}Xc(n){const s=this.Gc.indexOf(n);this.Gc.splice(s,1)}}class id extends uh{constructor(n,s,c,f){super(n,s,c,f),this.type="firestore",this._queue=new rd,this._persistenceKey=(f==null?void 0:f.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||od(this),this._firestoreClient.terminate()}}function sd(r,n){const s=typeof r=="object"?r:oc(),c=typeof r=="string"?r:n||"(default)",f=ko(s,"firestore").getImmediate({identifier:c});if(!f._initialized){const d=m1("firestore");d&&nd(f,...d)}return f}function od(r){var n;const s=r._freezeSettings(),c=function(f,d,w,y){return new Zf(f,d,w,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,y.useFetchStreams)}(r._databaseId,((n=r._app)===null||n===void 0?void 0:n.options.appId)||"",r._persistenceKey,s);r._firestoreClient=new Jf(r._authCredentials,r._appCheckCredentials,r._queue,c)}(function(r,n=!0){(function(s){ui=s})(ni),lr(new Un("firestore",(s,{instanceIdentifier:c,options:f})=>{const d=s.getProvider("app").getImmediate(),w=new id(new Gf(s.getProvider("auth-internal")),new zf(s.getProvider("app-check-internal")),function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new Nt(vt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qi(y.options.projectId,_)}(d,c),d);return f=Object.assign({useFetchStreams:n},f),w._setSettings(f),w},"PUBLIC").setMultipleInstances(!0)),In(pl,"3.9.0",r),In(pl,"3.9.0","esm2017")})();function ca(r,n){var s={};for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&n.indexOf(c)<0&&(s[c]=r[c]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,c=Object.getOwnPropertySymbols(r);f<c.length;f++)n.indexOf(c[f])<0&&Object.prototype.propertyIsEnumerable.call(r,c[f])&&(s[c[f]]=r[c[f]]);return s}function fh(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ad=fh,dh=new ei("auth","Firebase",fh());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al=new Mo("@firebase/auth");function Pi(r,...n){Al.logLevel<=Ce.ERROR&&Al.error(`Auth (${ni}): ${r}`,...n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(r,...n){throw ha(r,...n)}function Yt(r,...n){return ha(r,...n)}function ld(r,n,s){const c=Object.assign(Object.assign({},ad()),{[n]:s});return new ei("auth","Firebase",c).create(n,{appName:r.name})}function ha(r,...n){if(typeof r!="string"){const s=n[0],c=[...n.slice(1)];return c[0]&&(c[0].appName=r.name),r._errorFactory.create(s,...c)}return dh.create(r,...n)}function re(r,n,...s){if(!r)throw ha(n,...s)}function Jt(r){const n="INTERNAL ASSERTION FAILED: "+r;throw Pi(n),new Error(n)}function tn(r,n){r||Jt(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl=new Map;function $t(r){tn(r instanceof Function,"Expected a class definition");let n=Cl.get(r);return n?(tn(n instanceof r,"Instance stored in cache mismatched with class"),n):(n=new r,Cl.set(r,n),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(r,n){const s=ko(r,"auth");if(s.isInitialized()){const f=s.getImmediate(),d=s.getOptions();if(Gi(d,n!=null?n:{}))return f;Ft(f,"already-initialized")}return s.initialize({options:n})}function hd(r,n){const s=(n==null?void 0:n.persistence)||[],c=(Array.isArray(s)?s:[s]).map($t);n!=null&&n.errorMap&&r._updateErrorMap(n.errorMap),r._initializeWithPersistence(c,n==null?void 0:n.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function No(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function ud(){return Il()==="http:"||Il()==="https:"}function Il(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fd(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ud()||I1()||"connection"in navigator)?navigator.onLine:!0}function dd(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(n,s){this.shortDelay=n,this.longDelay=s,tn(s>n,"Short delay should be less than long delay!"),this.isMobile=C1()||y1()}get(){return fd()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ua(r,n){tn(r.emulator,"Emulator should always be set here");const{url:s}=r.emulator;return n?`${s}${n.startsWith("/")?n.slice(1):n}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{static initialize(n,s,c){this.fetchImpl=n,s&&(this.headersImpl=s),c&&(this.responseImpl=c)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Jt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Jt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Jt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd=new fi(3e4,6e4);function ps(r,n){return r.tenantId&&!n.tenantId?Object.assign(Object.assign({},n),{tenantId:r.tenantId}):n}async function di(r,n,s,c,f={}){return xh(r,f,async()=>{let d={},w={};c&&(n==="GET"?w=c:d={body:JSON.stringify(c)});const y=ti(Object.assign({key:r.config.apiKey},w)).slice(1),_=await r._getAdditionalHeaders();return _["Content-Type"]="application/json",r.languageCode&&(_["X-Firebase-Locale"]=r.languageCode),gh.fetch()(ph(r,r.config.apiHost,s,y),Object.assign({method:n,headers:_,referrerPolicy:"no-referrer"},d))})}async function xh(r,n,s){r._canInitEmulator=!1;const c=Object.assign(Object.assign({},gd),n);try{const f=new pd(r),d=await Promise.race([s(),f.promise]);f.clearNetworkTimeout();const w=await d.json();if("needConfirmation"in w)throw Di(r,"account-exists-with-different-credential",w);if(d.ok&&!("errorMessage"in w))return w;{const y=d.ok?w.errorMessage:w.error.message,[_,E]=y.split(" : ");if(_==="FEDERATED_USER_ID_ALREADY_LINKED")throw Di(r,"credential-already-in-use",w);if(_==="EMAIL_EXISTS")throw Di(r,"email-already-in-use",w);if(_==="USER_DISABLED")throw Di(r,"user-disabled",w);const S=c[_]||_.toLowerCase().replace(/[_\s]+/g,"-");if(E)throw ld(r,S,E);Ft(r,S)}}catch(f){if(f instanceof nn)throw f;Ft(r,"internal-error",{message:String(f)})}}async function ms(r,n,s,c,f={}){const d=await di(r,n,s,c,f);return"mfaPendingCredential"in d&&Ft(r,"multi-factor-auth-required",{_serverResponse:d}),d}function ph(r,n,s,c){const f=`${n}${s}?${c}`;return r.config.emulator?ua(r.config,f):`${r.config.apiScheme}://${f}`}class pd{constructor(n){this.auth=n,this.timer=null,this.promise=new Promise((s,c)=>{this.timer=setTimeout(()=>c(Yt(this.auth,"network-request-failed")),xd.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Di(r,n,s){const c={appName:r.name};s.email&&(c.email=s.email),s.phoneNumber&&(c.phoneNumber=s.phoneNumber);const f=Yt(r,n,c);return f.customData._tokenResponse=s,f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function md(r,n){return di(r,"POST","/v1/accounts:delete",n)}async function wd(r,n){return di(r,"POST","/v1/accounts:lookup",n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(r){if(!!r)try{const n=new Date(Number(r));if(!isNaN(n.getTime()))return n.toUTCString()}catch{}}async function Ed(r,n=!1){const s=Wn(r),c=await s.getIdToken(n),f=fa(c);re(f&&f.exp&&f.auth_time&&f.iat,s.auth,"internal-error");const d=typeof f.firebase=="object"?f.firebase:void 0,w=d==null?void 0:d.sign_in_provider;return{claims:f,token:c,authTime:Gr(io(f.auth_time)),issuedAtTime:Gr(io(f.iat)),expirationTime:Gr(io(f.exp)),signInProvider:w||null,signInSecondFactor:(d==null?void 0:d.sign_in_second_factor)||null}}function io(r){return Number(r)*1e3}function fa(r){const[n,s,c]=r.split(".");if(n===void 0||s===void 0||c===void 0)return Pi("JWT malformed, contained fewer than 3 sections"),null;try{const f=ec(s);return f?JSON.parse(f):(Pi("Failed to decode base64 JWT payload"),null)}catch(f){return Pi("Caught error parsing JWT payload as JSON",f==null?void 0:f.toString()),null}}function Ad(r){const n=fa(r);return re(n,"internal-error"),re(typeof n.exp<"u","internal-error"),re(typeof n.iat<"u","internal-error"),Number(n.exp)-Number(n.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qr(r,n,s=!1){if(s)return n;try{return await n}catch(c){throw c instanceof nn&&Cd(c)&&r.auth.currentUser===r&&await r.auth.signOut(),c}}function Cd({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(n){this.user=n,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(n){var s;if(n){const c=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),c}else{this.errorBackoff=3e4;const f=((s=this.user.stsTokenManager.expirationTime)!==null&&s!==void 0?s:0)-Date.now()-3e5;return Math.max(0,f)}}schedule(n=!1){if(!this.isRunning)return;const s=this.getInterval(n);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(n){(n==null?void 0:n.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(n,s){this.createdAt=n,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gr(this.lastLoginAt),this.creationTime=Gr(this.createdAt)}_copy(n){this.createdAt=n.createdAt,this.lastLoginAt=n.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ji(r){var n;const s=r.auth,c=await r.getIdToken(),f=await Qr(r,wd(s,{idToken:c}));re(f==null?void 0:f.users.length,s,"internal-error");const d=f.users[0];r._notifyReloadListener(d);const w=!((n=d.providerUserInfo)===null||n===void 0)&&n.length?bd(d.providerUserInfo):[],y=_d(r.providerData,w),_=r.isAnonymous,E=!(r.email&&d.passwordHash)&&!(y!=null&&y.length),S=_?E:!1,N={uid:d.localId,displayName:d.displayName||null,photoURL:d.photoUrl||null,email:d.email||null,emailVerified:d.emailVerified||!1,phoneNumber:d.phoneNumber||null,tenantId:d.tenantId||null,providerData:y,metadata:new mh(d.createdAt,d.lastLoginAt),isAnonymous:S};Object.assign(r,N)}async function yd(r){const n=Wn(r);await Ji(n),await n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)}function _d(r,n){return[...r.filter(c=>!n.some(f=>f.providerId===c.providerId)),...n]}function bd(r){return r.map(n=>{var{providerId:s}=n,c=ca(n,["providerId"]);return{providerId:s,uid:c.rawId||"",displayName:c.displayName||null,email:c.email||null,phoneNumber:c.phoneNumber||null,photoURL:c.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Td(r,n){const s=await xh(r,{},async()=>{const c=ti({grant_type:"refresh_token",refresh_token:n}).slice(1),{tokenApiHost:f,apiKey:d}=r.config,w=ph(r,f,"/v1/token",`key=${d}`),y=await r._getAdditionalHeaders();return y["Content-Type"]="application/x-www-form-urlencoded",gh.fetch()(w,{method:"POST",headers:y,body:c})});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(n){re(n.idToken,"internal-error"),re(typeof n.idToken<"u","internal-error"),re(typeof n.refreshToken<"u","internal-error");const s="expiresIn"in n&&typeof n.expiresIn<"u"?Number(n.expiresIn):Ad(n.idToken);this.updateTokensAndExpiration(n.idToken,n.refreshToken,s)}async getToken(n,s=!1){return re(!this.accessToken||this.refreshToken,n,"user-token-expired"),!s&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(n,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(n,s){const{accessToken:c,refreshToken:f,expiresIn:d}=await Td(n,s);this.updateTokensAndExpiration(c,f,Number(d))}updateTokensAndExpiration(n,s,c){this.refreshToken=s||null,this.accessToken=n||null,this.expirationTime=Date.now()+c*1e3}static fromJSON(n,s){const{refreshToken:c,accessToken:f,expirationTime:d}=s,w=new Jr;return c&&(re(typeof c=="string","internal-error",{appName:n}),w.refreshToken=c),f&&(re(typeof f=="string","internal-error",{appName:n}),w.accessToken=f),d&&(re(typeof d=="number","internal-error",{appName:n}),w.expirationTime=d),w}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(n){this.accessToken=n.accessToken,this.refreshToken=n.refreshToken,this.expirationTime=n.expirationTime}_clone(){return Object.assign(new Jr,this.toJSON())}_performRefresh(){return Jt("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(r,n){re(typeof r=="string"||typeof r>"u","internal-error",{appName:n})}class Fn{constructor(n){var{uid:s,auth:c,stsTokenManager:f}=n,d=ca(n,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Id(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=s,this.auth=c,this.stsTokenManager=f,this.accessToken=f.accessToken,this.displayName=d.displayName||null,this.email=d.email||null,this.emailVerified=d.emailVerified||!1,this.phoneNumber=d.phoneNumber||null,this.photoURL=d.photoURL||null,this.isAnonymous=d.isAnonymous||!1,this.tenantId=d.tenantId||null,this.providerData=d.providerData?[...d.providerData]:[],this.metadata=new mh(d.createdAt||void 0,d.lastLoginAt||void 0)}async getIdToken(n){const s=await Qr(this,this.stsTokenManager.getToken(this.auth,n));return re(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(n){return Ed(this,n)}reload(){return yd(this)}_assign(n){this!==n&&(re(this.uid===n.uid,this.auth,"internal-error"),this.displayName=n.displayName,this.photoURL=n.photoURL,this.email=n.email,this.emailVerified=n.emailVerified,this.phoneNumber=n.phoneNumber,this.isAnonymous=n.isAnonymous,this.tenantId=n.tenantId,this.providerData=n.providerData.map(s=>Object.assign({},s)),this.metadata._copy(n.metadata),this.stsTokenManager._assign(n.stsTokenManager))}_clone(n){const s=new Fn(Object.assign(Object.assign({},this),{auth:n,stsTokenManager:this.stsTokenManager._clone()}));return s.metadata._copy(this.metadata),s}_onReload(n){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=n,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(n){this.reloadListener?this.reloadListener(n):this.reloadUserInfo=n}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(n,s=!1){let c=!1;n.idToken&&n.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(n),c=!0),s&&await Ji(this),await this.auth._persistUserIfCurrent(this),c&&this.auth._notifyListenersIfCurrent(this)}async delete(){const n=await this.getIdToken();return await Qr(this,md(this.auth,{idToken:n})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(n=>Object.assign({},n)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(n,s){var c,f,d,w,y,_,E,S;const N=(c=s.displayName)!==null&&c!==void 0?c:void 0,z=(f=s.email)!==null&&f!==void 0?f:void 0,W=(d=s.phoneNumber)!==null&&d!==void 0?d:void 0,fe=(w=s.photoURL)!==null&&w!==void 0?w:void 0,te=(y=s.tenantId)!==null&&y!==void 0?y:void 0,Qe=(_=s._redirectEventId)!==null&&_!==void 0?_:void 0,it=(E=s.createdAt)!==null&&E!==void 0?E:void 0,ge=(S=s.lastLoginAt)!==null&&S!==void 0?S:void 0,{uid:K,emailVerified:J,isAnonymous:Re,providerData:ne,stsTokenManager:k}=s;re(K&&k,n,"internal-error");const ee=Jr.fromJSON(this.name,k);re(typeof K=="string",n,"internal-error"),xn(N,n.name),xn(z,n.name),re(typeof J=="boolean",n,"internal-error"),re(typeof Re=="boolean",n,"internal-error"),xn(W,n.name),xn(fe,n.name),xn(te,n.name),xn(Qe,n.name),xn(it,n.name),xn(ge,n.name);const L=new Fn({uid:K,auth:n,email:z,emailVerified:J,displayName:N,isAnonymous:Re,photoURL:fe,phoneNumber:W,tenantId:te,stsTokenManager:ee,createdAt:it,lastLoginAt:ge});return ne&&Array.isArray(ne)&&(L.providerData=ne.map(rn=>Object.assign({},rn))),Qe&&(L._redirectEventId=Qe),L}static async _fromIdTokenResponse(n,s,c=!1){const f=new Jr;f.updateFromServerResponse(s);const d=new Fn({uid:s.localId,auth:n,stsTokenManager:f,isAnonymous:c});return await Ji(d),d}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(n,s){this.storage[n]=s}async _get(n){const s=this.storage[n];return s===void 0?null:s}async _remove(n){delete this.storage[n]}_addListener(n,s){}_removeListener(n,s){}}wh.type="NONE";const yl=wh;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(r,n,s){return`firebase:${r}:${n}:${s}`}class or{constructor(n,s,c){this.persistence=n,this.auth=s,this.userKey=c;const{config:f,name:d}=this.auth;this.fullUserKey=ki(this.userKey,f.apiKey,d),this.fullPersistenceKey=ki("persistence",f.apiKey,d),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(n){return this.persistence._set(this.fullUserKey,n.toJSON())}async getCurrentUser(){const n=await this.persistence._get(this.fullUserKey);return n?Fn._fromJSON(this.auth,n):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(n){if(this.persistence===n)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=n,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(n,s,c="authUser"){if(!s.length)return new or($t(yl),n,c);const f=(await Promise.all(s.map(async E=>{if(await E._isAvailable())return E}))).filter(E=>E);let d=f[0]||$t(yl);const w=ki(c,n.config.apiKey,n.name);let y=null;for(const E of s)try{const S=await E._get(w);if(S){const N=Fn._fromJSON(n,S);E!==d&&(y=N),d=E;break}}catch{}const _=f.filter(E=>E._shouldAllowMigration);return!d._shouldAllowMigration||!_.length?new or(d,n,c):(d=_[0],y&&await d._set(w,y.toJSON()),await Promise.all(s.map(async E=>{if(E!==d)try{await E._remove(w)}catch{}})),new or(d,n,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(r){const n=r.toLowerCase();if(n.includes("opera/")||n.includes("opr/")||n.includes("opios/"))return"Opera";if(Ch(n))return"IEMobile";if(n.includes("msie")||n.includes("trident/"))return"IE";if(n.includes("edge/"))return"Edge";if(Eh(n))return"Firefox";if(n.includes("silk/"))return"Silk";if(yh(n))return"Blackberry";if(_h(n))return"Webos";if(da(n))return"Safari";if((n.includes("chrome/")||Ah(n))&&!n.includes("edge/"))return"Chrome";if(Ih(n))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,c=r.match(s);if((c==null?void 0:c.length)===2)return c[1]}return"Other"}function Eh(r=ht()){return/firefox\//i.test(r)}function da(r=ht()){const n=r.toLowerCase();return n.includes("safari/")&&!n.includes("chrome/")&&!n.includes("crios/")&&!n.includes("android")}function Ah(r=ht()){return/crios\//i.test(r)}function Ch(r=ht()){return/iemobile/i.test(r)}function Ih(r=ht()){return/android/i.test(r)}function yh(r=ht()){return/blackberry/i.test(r)}function _h(r=ht()){return/webos/i.test(r)}function ws(r=ht()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Sd(r=ht()){var n;return ws(r)&&!!(!((n=window.navigator)===null||n===void 0)&&n.standalone)}function vd(){return _1()&&document.documentMode===10}function bh(r=ht()){return ws(r)||Ih(r)||_h(r)||yh(r)||/windows phone/i.test(r)||Ch(r)}function Nd(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Th(r,n=[]){let s;switch(r){case"Browser":s=_l(ht());break;case"Worker":s=`${_l(ht())}-${r}`;break;default:s=r}const c=n.length?n.join(","):"FirebaseCore-web";return`${s}/JsCore/${ni}/${c}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(n){this.auth=n,this.queue=[]}pushCallback(n,s){const c=d=>new Promise((w,y)=>{try{const _=n(d);w(_)}catch(_){y(_)}});c.onAbort=s,this.queue.push(c);const f=this.queue.length-1;return()=>{this.queue[f]=()=>Promise.resolve()}}async runMiddleware(n){if(this.auth.currentUser===n)return;const s=[];try{for(const c of this.queue)await c(n),c.onAbort&&s.push(c.onAbort)}catch(c){s.reverse();for(const f of s)try{f()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:c==null?void 0:c.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(n,s,c){this.app=n,this.heartbeatServiceProvider=s,this.config=c,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bl(this),this.idTokenSubscription=new bl(this),this.beforeStateQueue=new Rd(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dh,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=n.name,this.clientVersion=c.sdkClientVersion}_initializeWithPersistence(n,s){return s&&(this._popupRedirectResolver=$t(s)),this._initializationPromise=this.queue(async()=>{var c,f;if(!this._deleted&&(this.persistenceManager=await or.create(this,n),!this._deleted)){if(!((c=this._popupRedirectResolver)===null||c===void 0)&&c._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=((f=this.currentUser)===null||f===void 0?void 0:f.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const n=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!n)){if(this.currentUser&&n&&this.currentUser.uid===n.uid){this._currentUser._assign(n),await this.currentUser.getIdToken();return}await this._updateCurrentUser(n,!0)}}async initializeCurrentUser(n){var s;const c=await this.assertedPersistence.getCurrentUser();let f=c,d=!1;if(n&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const w=(s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId,y=f==null?void 0:f._redirectEventId,_=await this.tryRedirectSignIn(n);(!w||w===y)&&(_==null?void 0:_.user)&&(f=_.user,d=!0)}if(!f)return this.directlySetCurrentUser(null);if(!f._redirectEventId){if(d)try{await this.beforeStateQueue.runMiddleware(f)}catch(w){f=c,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(w))}return f?this.reloadAndSetCurrentUserOrClear(f):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===f._redirectEventId?this.directlySetCurrentUser(f):this.reloadAndSetCurrentUserOrClear(f)}async tryRedirectSignIn(n){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,n,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(n){try{await Ji(n)}catch(s){if((s==null?void 0:s.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(n)}useDeviceLanguage(){this.languageCode=dd()}async _delete(){this._deleted=!0}async updateCurrentUser(n){const s=n?Wn(n):null;return s&&re(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(n,s=!1){if(!this._deleted)return n&&re(this.tenantId===n.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(n),this.queue(async()=>{await this.directlySetCurrentUser(n),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(n){return this.queue(async()=>{await this.assertedPersistence.setPersistence($t(n))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(n){this._errorFactory=new ei("auth","Firebase",n())}onAuthStateChanged(n,s,c){return this.registerStateListener(this.authStateSubscription,n,s,c)}beforeAuthStateChanged(n,s){return this.beforeStateQueue.pushCallback(n,s)}onIdTokenChanged(n,s,c){return this.registerStateListener(this.idTokenSubscription,n,s,c)}toJSON(){var n;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(n=this._currentUser)===null||n===void 0?void 0:n.toJSON()}}async _setRedirectUser(n,s){const c=await this.getOrInitRedirectPersistenceManager(s);return n===null?c.removeCurrentUser():c.setCurrentUser(n)}async getOrInitRedirectPersistenceManager(n){if(!this.redirectPersistenceManager){const s=n&&$t(n)||this._popupRedirectResolver;re(s,this,"argument-error"),this.redirectPersistenceManager=await or.create(this,[$t(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(n){var s,c;return this._isInitialized&&await this.queue(async()=>{}),((s=this._currentUser)===null||s===void 0?void 0:s._redirectEventId)===n?this._currentUser:((c=this.redirectUser)===null||c===void 0?void 0:c._redirectEventId)===n?this.redirectUser:null}async _persistUserIfCurrent(n){if(n===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(n))}_notifyListenersIfCurrent(n){n===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n,s;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const c=(s=(n=this.currentUser)===null||n===void 0?void 0:n.uid)!==null&&s!==void 0?s:null;this.lastNotifiedUid!==c&&(this.lastNotifiedUid=c,this.authStateSubscription.next(this.currentUser))}registerStateListener(n,s,c,f){if(this._deleted)return()=>{};const d=typeof s=="function"?s:s.next.bind(s),w=this._isInitialized?Promise.resolve():this._initializationPromise;return re(w,this,"internal-error"),w.then(()=>d(this.currentUser)),typeof s=="function"?n.addObserver(s,c,f):n.addObserver(s)}async directlySetCurrentUser(n){this.currentUser&&this.currentUser!==n&&this._currentUser._stopProactiveRefresh(),n&&this.isProactiveRefreshEnabled&&n._startProactiveRefresh(),this.currentUser=n,n?await this.assertedPersistence.setCurrentUser(n):await this.assertedPersistence.removeCurrentUser()}queue(n){return this.operations=this.operations.then(n,n),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(n){!n||this.frameworks.includes(n)||(this.frameworks.push(n),this.frameworks.sort(),this.clientVersion=Th(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var n;const s={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(s["X-Firebase-gmpid"]=this.app.options.appId);const c=await((n=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||n===void 0?void 0:n.getHeartbeatsHeader());return c&&(s["X-Firebase-Client"]=c),s}}function Es(r){return Wn(r)}class bl{constructor(n){this.auth=n,this.observer=null,this.addObserver=O1(s=>this.observer=s)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Dd(r,n,s){const c=Es(r);re(c._canInitEmulator,c,"emulator-config-failed"),re(/^https?:\/\//.test(n),c,"invalid-emulator-scheme");const f=!!(s!=null&&s.disableWarnings),d=Sh(n),{host:w,port:y}=Md(n),_=y===null?"":`:${y}`;c.config.emulator={url:`${d}//${w}${_}/`},c.settings.appVerificationDisabledForTesting=!0,c.emulatorConfig=Object.freeze({host:w,port:y,protocol:d.replace(":",""),options:Object.freeze({disableWarnings:f})}),f||Pd()}function Sh(r){const n=r.indexOf(":");return n<0?"":r.substr(0,n+1)}function Md(r){const n=Sh(r),s=/(\/\/)?([^?#/]+)/.exec(r.substr(n.length));if(!s)return{host:"",port:null};const c=s[2].split("@").pop()||"",f=/^(\[[^\]]+\])(:|$)/.exec(c);if(f){const d=f[1];return{host:d,port:Tl(c.substr(d.length+1))}}else{const[d,w]=c.split(":");return{host:d,port:Tl(w)}}}function Tl(r){if(!r)return null;const n=Number(r);return isNaN(n)?null:n}function Pd(){function r(){const n=document.createElement("p"),s=n.style;n.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",n.classList.add("firebase-emulator-warning"),document.body.appendChild(n)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(n,s){this.providerId=n,this.signInMethod=s}toJSON(){return Jt("not implemented")}_getIdTokenResponse(n){return Jt("not implemented")}_linkToIdToken(n,s){return Jt("not implemented")}_getReauthenticationResolver(n){return Jt("not implemented")}}async function kd(r,n){return di(r,"POST","/v1/accounts:update",n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bd(r,n){return ms(r,"POST","/v1/accounts:signInWithPassword",ps(r,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ld(r,n){return ms(r,"POST","/v1/accounts:signInWithEmailLink",ps(r,n))}async function Fd(r,n){return ms(r,"POST","/v1/accounts:signInWithEmailLink",ps(r,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends ga{constructor(n,s,c,f=null){super("password",c),this._email=n,this._password=s,this._tenantId=f}static _fromEmailAndPassword(n,s){return new $r(n,s,"password")}static _fromEmailAndCode(n,s,c=null){return new $r(n,s,"emailLink",c)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(n){const s=typeof n=="string"?JSON.parse(n):n;if((s==null?void 0:s.email)&&(s==null?void 0:s.password)){if(s.signInMethod==="password")return this._fromEmailAndPassword(s.email,s.password);if(s.signInMethod==="emailLink")return this._fromEmailAndCode(s.email,s.password,s.tenantId)}return null}async _getIdTokenResponse(n){switch(this.signInMethod){case"password":return Bd(n,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return Ld(n,{email:this._email,oobCode:this._password});default:Ft(n,"internal-error")}}async _linkToIdToken(n,s){switch(this.signInMethod){case"password":return kd(n,{idToken:s,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return Fd(n,{idToken:s,email:this._email,oobCode:this._password});default:Ft(n,"internal-error")}}_getReauthenticationResolver(n){return this._getIdTokenResponse(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ar(r,n){return ms(r,"POST","/v1/accounts:signInWithIdp",ps(r,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud="http://localhost";class Hn extends ga{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(n){const s=new Hn(n.providerId,n.signInMethod);return n.idToken||n.accessToken?(n.idToken&&(s.idToken=n.idToken),n.accessToken&&(s.accessToken=n.accessToken),n.nonce&&!n.pendingToken&&(s.nonce=n.nonce),n.pendingToken&&(s.pendingToken=n.pendingToken)):n.oauthToken&&n.oauthTokenSecret?(s.accessToken=n.oauthToken,s.secret=n.oauthTokenSecret):Ft("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(n){const s=typeof n=="string"?JSON.parse(n):n,{providerId:c,signInMethod:f}=s,d=ca(s,["providerId","signInMethod"]);if(!c||!f)return null;const w=new Hn(c,f);return w.idToken=d.idToken||void 0,w.accessToken=d.accessToken||void 0,w.secret=d.secret,w.nonce=d.nonce,w.pendingToken=d.pendingToken||null,w}_getIdTokenResponse(n){const s=this.buildRequest();return ar(n,s)}_linkToIdToken(n,s){const c=this.buildRequest();return c.idToken=s,ar(n,c)}_getReauthenticationResolver(n){const s=this.buildRequest();return s.autoCreate=!1,ar(n,s)}buildRequest(){const n={requestUri:Ud,returnSecureToken:!0};if(this.pendingToken)n.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),n.postBody=ti(s)}return n}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vd(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Hd(r){const n=Mr(Pr(r)).link,s=n?Mr(Pr(n)).deep_link_id:null,c=Mr(Pr(r)).deep_link_id;return(c?Mr(Pr(c)).link:null)||c||s||n||r}class xa{constructor(n){var s,c,f,d,w,y;const _=Mr(Pr(n)),E=(s=_.apiKey)!==null&&s!==void 0?s:null,S=(c=_.oobCode)!==null&&c!==void 0?c:null,N=Vd((f=_.mode)!==null&&f!==void 0?f:null);re(E&&S&&N,"argument-error"),this.apiKey=E,this.operation=N,this.code=S,this.continueUrl=(d=_.continueUrl)!==null&&d!==void 0?d:null,this.languageCode=(w=_.languageCode)!==null&&w!==void 0?w:null,this.tenantId=(y=_.tenantId)!==null&&y!==void 0?y:null}static parseLink(n){const s=Hd(n);try{return new xa(s)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(){this.providerId=pr.PROVIDER_ID}static credential(n,s){return $r._fromEmailAndPassword(n,s)}static credentialWithLink(n,s){const c=xa.parseLink(s);return re(c,"argument-error"),$r._fromEmailAndCode(n,c.code,c.tenantId)}}pr.PROVIDER_ID="password";pr.EMAIL_PASSWORD_SIGN_IN_METHOD="password";pr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(n){this.providerId=n,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(n){this.defaultLanguageCode=n}setCustomParameters(n){return this.customParameters=n,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends vh{constructor(){super(...arguments),this.scopes=[]}addScope(n){return this.scopes.includes(n)||this.scopes.push(n),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn extends gi{constructor(){super("facebook.com")}static credential(n){return Hn._fromParams({providerId:pn.PROVIDER_ID,signInMethod:pn.FACEBOOK_SIGN_IN_METHOD,accessToken:n})}static credentialFromResult(n){return pn.credentialFromTaggedObject(n)}static credentialFromError(n){return pn.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n||!("oauthAccessToken"in n)||!n.oauthAccessToken)return null;try{return pn.credential(n.oauthAccessToken)}catch{return null}}}pn.FACEBOOK_SIGN_IN_METHOD="facebook.com";pn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn extends gi{constructor(){super("google.com"),this.addScope("profile")}static credential(n,s){return Hn._fromParams({providerId:mn.PROVIDER_ID,signInMethod:mn.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:s})}static credentialFromResult(n){return mn.credentialFromTaggedObject(n)}static credentialFromError(n){return mn.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;const{oauthIdToken:s,oauthAccessToken:c}=n;if(!s&&!c)return null;try{return mn.credential(s,c)}catch{return null}}}mn.GOOGLE_SIGN_IN_METHOD="google.com";mn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn extends gi{constructor(){super("github.com")}static credential(n){return Hn._fromParams({providerId:wn.PROVIDER_ID,signInMethod:wn.GITHUB_SIGN_IN_METHOD,accessToken:n})}static credentialFromResult(n){return wn.credentialFromTaggedObject(n)}static credentialFromError(n){return wn.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n||!("oauthAccessToken"in n)||!n.oauthAccessToken)return null;try{return wn.credential(n.oauthAccessToken)}catch{return null}}}wn.GITHUB_SIGN_IN_METHOD="github.com";wn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En extends gi{constructor(){super("twitter.com")}static credential(n,s){return Hn._fromParams({providerId:En.PROVIDER_ID,signInMethod:En.TWITTER_SIGN_IN_METHOD,oauthToken:n,oauthTokenSecret:s})}static credentialFromResult(n){return En.credentialFromTaggedObject(n)}static credentialFromError(n){return En.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;const{oauthAccessToken:s,oauthTokenSecret:c}=n;if(!s||!c)return null;try{return En.credential(s,c)}catch{return null}}}En.TWITTER_SIGN_IN_METHOD="twitter.com";En.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(n){this.user=n.user,this.providerId=n.providerId,this._tokenResponse=n._tokenResponse,this.operationType=n.operationType}static async _fromIdTokenResponse(n,s,c,f=!1){const d=await Fn._fromIdTokenResponse(n,c,f),w=Sl(c);return new hr({user:d,providerId:w,_tokenResponse:c,operationType:s})}static async _forOperation(n,s,c){await n._updateTokensIfNecessary(c,!0);const f=Sl(c);return new hr({user:n,providerId:f,_tokenResponse:c,operationType:s})}}function Sl(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i extends nn{constructor(n,s,c,f){var d;super(s.code,s.message),this.operationType=c,this.user=f,Object.setPrototypeOf(this,$i.prototype),this.customData={appName:n.name,tenantId:(d=n.tenantId)!==null&&d!==void 0?d:void 0,_serverResponse:s.customData._serverResponse,operationType:c}}static _fromErrorAndOperation(n,s,c,f){return new $i(n,s,c,f)}}function Nh(r,n,s,c){return(n==="reauthenticate"?s._getReauthenticationResolver(r):s._getIdTokenResponse(r)).catch(d=>{throw d.code==="auth/multi-factor-auth-required"?$i._fromErrorAndOperation(r,d,n,c):d})}async function Gd(r,n,s=!1){const c=await Qr(r,n._linkToIdToken(r.auth,await r.getIdToken()),s);return hr._forOperation(r,"link",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wd(r,n,s=!1){const{auth:c}=r,f="reauthenticate";try{const d=await Qr(r,Nh(c,f,n,r),s);re(d.idToken,c,"internal-error");const w=fa(d.idToken);re(w,c,"internal-error");const{sub:y}=w;return re(r.uid===y,c,"user-mismatch"),hr._forOperation(r,f,d)}catch(d){throw(d==null?void 0:d.code)==="auth/user-not-found"&&Ft(c,"user-mismatch"),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rh(r,n,s=!1){const c="signIn",f=await Nh(r,c,n),d=await hr._fromIdTokenResponse(r,c,f);return s||await r._updateCurrentUser(d.user),d}async function Xd(r,n){return Rh(Es(r),n)}function jd(r,n,s){return Xd(Wn(r),pr.credential(n,s))}function zd(r,n,s,c){return Wn(r).onIdTokenChanged(n,s,c)}function Yd(r,n,s){return Wn(r).beforeAuthStateChanged(n,s)}const es="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(n,s){this.storageRetriever=n,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(es,"1"),this.storage.removeItem(es),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(n,s){return this.storage.setItem(n,JSON.stringify(s)),Promise.resolve()}_get(n){const s=this.storage.getItem(n);return Promise.resolve(s?JSON.parse(s):null)}_remove(n){return this.storage.removeItem(n),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(){const r=ht();return da(r)||ws(r)}const Zd=1e3,qd=10;class Dh extends Oh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,s)=>this.onStorageEvent(n,s),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Kd()&&Nd(),this.fallbackToPolling=bh(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(const s of Object.keys(this.listeners)){const c=this.storage.getItem(s),f=this.localCache[s];c!==f&&n(s,f,c)}}onStorageEvent(n,s=!1){if(!n.key){this.forAllChangedKeys((w,y,_)=>{this.notifyListeners(w,_)});return}const c=n.key;if(s?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const w=this.storage.getItem(c);if(n.newValue!==w)n.newValue!==null?this.storage.setItem(c,n.newValue):this.storage.removeItem(c);else if(this.localCache[c]===n.newValue&&!s)return}const f=()=>{const w=this.storage.getItem(c);!s&&this.localCache[c]===w||this.notifyListeners(c,w)},d=this.storage.getItem(c);vd()&&d!==n.newValue&&n.newValue!==n.oldValue?setTimeout(f,qd):f()}notifyListeners(n,s){this.localCache[n]=s;const c=this.listeners[n];if(c)for(const f of Array.from(c))f(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,s,c)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:s,newValue:c}),!0)})},Zd)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(s)}_removeListener(n,s){this.listeners[n]&&(this.listeners[n].delete(s),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(n,s){await super._set(n,s),this.localCache[n]=JSON.stringify(s)}async _get(n){const s=await super._get(n);return this.localCache[n]=JSON.stringify(s),s}async _remove(n){await super._remove(n),delete this.localCache[n]}}Dh.type="LOCAL";const Qd=Dh;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh extends Oh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,s){}_removeListener(n,s){}}Mh.type="SESSION";const Ph=Mh;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(r){return Promise.all(r.map(async n=>{try{return{fulfilled:!0,value:await n}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){const s=this.receivers.find(f=>f.isListeningto(n));if(s)return s;const c=new As(n);return this.receivers.push(c),c}isListeningto(n){return this.eventTarget===n}async handleEvent(n){const s=n,{eventId:c,eventType:f,data:d}=s.data,w=this.handlersMap[f];if(!(w!=null&&w.size))return;s.ports[0].postMessage({status:"ack",eventId:c,eventType:f});const y=Array.from(w).map(async E=>E(s.origin,d)),_=await Jd(y);s.ports[0].postMessage({status:"done",eventId:c,eventType:f,response:_})}_subscribe(n,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(s)}_unsubscribe(n,s){this.handlersMap[n]&&s&&this.handlersMap[n].delete(s),(!s||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}As.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(r="",n=10){let s="";for(let c=0;c<n;c++)s+=Math.floor(Math.random()*10);return r+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(n){this.target=n,this.handlers=new Set}removeMessageHandler(n){n.messageChannel&&(n.messageChannel.port1.removeEventListener("message",n.onMessage),n.messageChannel.port1.close()),this.handlers.delete(n)}async _send(n,s,c=50){const f=typeof MessageChannel<"u"?new MessageChannel:null;if(!f)throw new Error("connection_unavailable");let d,w;return new Promise((y,_)=>{const E=pa("",20);f.port1.start();const S=setTimeout(()=>{_(new Error("unsupported_event"))},c);w={messageChannel:f,onMessage(N){const z=N;if(z.data.eventId===E)switch(z.data.status){case"ack":clearTimeout(S),d=setTimeout(()=>{_(new Error("timeout"))},3e3);break;case"done":clearTimeout(d),y(z.data.response);break;default:clearTimeout(S),clearTimeout(d),_(new Error("invalid_response"));break}}},this.handlers.add(w),f.port1.addEventListener("message",w.onMessage),this.target.postMessage({eventType:n,eventId:E,data:s},[f.port2])}).finally(()=>{w&&this.removeMessageHandler(w)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(){return window}function eg(r){Kt().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kh(){return typeof Kt().WorkerGlobalScope<"u"&&typeof Kt().importScripts=="function"}async function tg(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ng(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function rg(){return kh()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh="firebaseLocalStorageDb",ig=1,ts="firebaseLocalStorage",Lh="fbase_key";class xi{constructor(n){this.request=n}toPromise(){return new Promise((n,s)=>{this.request.addEventListener("success",()=>{n(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function Cs(r,n){return r.transaction([ts],n?"readwrite":"readonly").objectStore(ts)}function sg(){const r=indexedDB.deleteDatabase(Bh);return new xi(r).toPromise()}function Ro(){const r=indexedDB.open(Bh,ig);return new Promise((n,s)=>{r.addEventListener("error",()=>{s(r.error)}),r.addEventListener("upgradeneeded",()=>{const c=r.result;try{c.createObjectStore(ts,{keyPath:Lh})}catch(f){s(f)}}),r.addEventListener("success",async()=>{const c=r.result;c.objectStoreNames.contains(ts)?n(c):(c.close(),await sg(),n(await Ro()))})})}async function vl(r,n,s){const c=Cs(r,!0).put({[Lh]:n,value:s});return new xi(c).toPromise()}async function og(r,n){const s=Cs(r,!1).get(n),c=await new xi(s).toPromise();return c===void 0?null:c.value}function Nl(r,n){const s=Cs(r,!0).delete(n);return new xi(s).toPromise()}const ag=800,lg=3;class Fh{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ro(),this.db)}async _withRetries(n){let s=0;for(;;)try{const c=await this._openDb();return await n(c)}catch(c){if(s++>lg)throw c;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kh()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=As._getInstance(rg()),this.receiver._subscribe("keyChanged",async(n,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(n,s)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await tg(),!this.activeServiceWorker)return;this.sender=new $d(this.activeServiceWorker);const c=await this.sender._send("ping",{},800);!c||((n=c[0])===null||n===void 0?void 0:n.fulfilled)&&((s=c[0])===null||s===void 0?void 0:s.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(n){if(!(!this.sender||!this.activeServiceWorker||ng()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const n=await Ro();return await vl(n,es,"1"),await Nl(n,es),!0}catch{}return!1}async _withPendingWrite(n){this.pendingWrites++;try{await n()}finally{this.pendingWrites--}}async _set(n,s){return this._withPendingWrite(async()=>(await this._withRetries(c=>vl(c,n,s)),this.localCache[n]=s,this.notifyServiceWorker(n)))}async _get(n){const s=await this._withRetries(c=>og(c,n));return this.localCache[n]=s,s}async _remove(n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Nl(s,n)),delete this.localCache[n],this.notifyServiceWorker(n)))}async _poll(){const n=await this._withRetries(f=>{const d=Cs(f,!1).getAll();return new xi(d).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];const s=[],c=new Set;for(const{fbase_key:f,value:d}of n)c.add(f),JSON.stringify(this.localCache[f])!==JSON.stringify(d)&&(this.notifyListeners(f,d),s.push(f));for(const f of Object.keys(this.localCache))this.localCache[f]&&!c.has(f)&&(this.notifyListeners(f,null),s.push(f));return s}notifyListeners(n,s){this.localCache[n]=s;const c=this.listeners[n];if(c)for(const f of Array.from(c))f(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ag)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(s)}_removeListener(n,s){this.listeners[n]&&(this.listeners[n].delete(s),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Fh.type="LOCAL";const cg=Fh;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(){var r,n;return(n=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&n!==void 0?n:document}function ug(r){return new Promise((n,s)=>{const c=document.createElement("script");c.setAttribute("src",r),c.onload=n,c.onerror=f=>{const d=Yt("internal-error");d.customData=f,s(d)},c.type="text/javascript",c.charset="UTF-8",hg().appendChild(c)})}function fg(r){return`__${r}${Math.floor(Math.random()*1e6)}`}new fi(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(r,n){return n?$t(n):(re(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma extends ga{constructor(n){super("custom","custom"),this.params=n}_getIdTokenResponse(n){return ar(n,this._buildIdpRequest())}_linkToIdToken(n,s){return ar(n,this._buildIdpRequest(s))}_getReauthenticationResolver(n){return ar(n,this._buildIdpRequest())}_buildIdpRequest(n){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return n&&(s.idToken=n),s}}function gg(r){return Rh(r.auth,new ma(r),r.bypassAuthState)}function xg(r){const{auth:n,user:s}=r;return re(s,n,"internal-error"),Wd(s,new ma(r),r.bypassAuthState)}async function pg(r){const{auth:n,user:s}=r;return re(s,n,"internal-error"),Gd(s,new ma(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(n,s,c,f,d=!1){this.auth=n,this.resolver=c,this.user=f,this.bypassAuthState=d,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(n,s)=>{this.pendingPromise={resolve:n,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(c){this.reject(c)}})}async onAuthEvent(n){const{urlResponse:s,sessionId:c,postBody:f,tenantId:d,error:w,type:y}=n;if(w){this.reject(w);return}const _={auth:this.auth,requestUri:s,sessionId:c,tenantId:d||void 0,postBody:f||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(y)(_))}catch(E){this.reject(E)}}onError(n){this.reject(n)}getIdpTask(n){switch(n){case"signInViaPopup":case"signInViaRedirect":return gg;case"linkViaPopup":case"linkViaRedirect":return pg;case"reauthViaPopup":case"reauthViaRedirect":return xg;default:Ft(this.auth,"internal-error")}}resolve(n){tn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(n),this.unregisterAndCleanUp()}reject(n){tn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(n),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg=new fi(2e3,1e4);class rr extends Uh{constructor(n,s,c,f,d){super(n,s,f,d),this.provider=c,this.authWindow=null,this.pollId=null,rr.currentPopupAction&&rr.currentPopupAction.cancel(),rr.currentPopupAction=this}async executeNotNull(){const n=await this.execute();return re(n,this.auth,"internal-error"),n}async onExecution(){tn(this.filter.length===1,"Popup operations only handle one event");const n=pa();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(Yt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var n;return((n=this.authWindow)===null||n===void 0?void 0:n.associatedEvent)||null}cancel(){this.reject(Yt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rr.currentPopupAction=null}pollUserCancellation(){const n=()=>{var s,c;if(!((c=(s=this.authWindow)===null||s===void 0?void 0:s.window)===null||c===void 0)&&c.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yt(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(n,mg.get())};n()}}rr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg="pendingRedirect",Bi=new Map;class Eg extends Uh{constructor(n,s,c=!1){super(n,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,c),this.eventId=null}async execute(){let n=Bi.get(this.auth._key());if(!n){try{const c=await Ag(this.resolver,this.auth)?await super.execute():null;n=()=>Promise.resolve(c)}catch(s){n=()=>Promise.reject(s)}Bi.set(this.auth._key(),n)}return this.bypassAuthState||Bi.set(this.auth._key(),()=>Promise.resolve(null)),n()}async onAuthEvent(n){if(n.type==="signInViaRedirect")return super.onAuthEvent(n);if(n.type==="unknown"){this.resolve(null);return}if(n.eventId){const s=await this.auth._redirectUserForId(n.eventId);if(s)return this.user=s,super.onAuthEvent(n);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ag(r,n){const s=yg(n),c=Ig(r);if(!await c._isAvailable())return!1;const f=await c._get(s)==="true";return await c._remove(s),f}function Cg(r,n){Bi.set(r._key(),n)}function Ig(r){return $t(r._redirectPersistence)}function yg(r){return ki(wg,r.config.apiKey,r.name)}async function _g(r,n,s=!1){const c=Es(r),f=dg(c,n),w=await new Eg(c,f,s).execute();return w&&!s&&(delete w.user._redirectEventId,await c._persistUserIfCurrent(w.user),await c._setRedirectUser(null,n)),w}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg=10*60*1e3;class Tg{constructor(n){this.auth=n,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(n){this.consumers.add(n),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,n)&&(this.sendToConsumer(this.queuedRedirectEvent,n),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(n){this.consumers.delete(n)}onEvent(n){if(this.hasEventBeenHandled(n))return!1;let s=!1;return this.consumers.forEach(c=>{this.isEventForConsumer(n,c)&&(s=!0,this.sendToConsumer(n,c),this.saveEventToCache(n))}),this.hasHandledPotentialRedirect||!Sg(n)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=n,s=!0)),s}sendToConsumer(n,s){var c;if(n.error&&!Vh(n)){const f=((c=n.error.code)===null||c===void 0?void 0:c.split("auth/")[1])||"internal-error";s.onError(Yt(this.auth,f))}else s.onAuthEvent(n)}isEventForConsumer(n,s){const c=s.eventId===null||!!n.eventId&&n.eventId===s.eventId;return s.filter.includes(n.type)&&c}hasEventBeenHandled(n){return Date.now()-this.lastProcessedEventTime>=bg&&this.cachedEventUids.clear(),this.cachedEventUids.has(Rl(n))}saveEventToCache(n){this.cachedEventUids.add(Rl(n)),this.lastProcessedEventTime=Date.now()}}function Rl(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(n=>n).join("-")}function Vh({type:r,error:n}){return r==="unknown"&&(n==null?void 0:n.code)==="auth/no-auth-event"}function Sg(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Vh(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vg(r,n={}){return di(r,"GET","/v1/projects",n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Rg=/^https?/;async function Og(r){if(r.config.emulator)return;const{authorizedDomains:n}=await vg(r);for(const s of n)try{if(Dg(s))return}catch{}Ft(r,"unauthorized-domain")}function Dg(r){const n=No(),{protocol:s,hostname:c}=new URL(n);if(r.startsWith("chrome-extension://")){const w=new URL(r);return w.hostname===""&&c===""?s==="chrome-extension:"&&r.replace("chrome-extension://","")===n.replace("chrome-extension://",""):s==="chrome-extension:"&&w.hostname===c}if(!Rg.test(s))return!1;if(Ng.test(r))return c===r;const f=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+f+"|"+f+")$","i").test(c)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg=new fi(3e4,6e4);function Ol(){const r=Kt().___jsl;if(r!=null&&r.H){for(const n of Object.keys(r.H))if(r.H[n].r=r.H[n].r||[],r.H[n].L=r.H[n].L||[],r.H[n].r=[...r.H[n].L],r.CP)for(let s=0;s<r.CP.length;s++)r.CP[s]=null}}function Pg(r){return new Promise((n,s)=>{var c,f,d;function w(){Ol(),gapi.load("gapi.iframes",{callback:()=>{n(gapi.iframes.getContext())},ontimeout:()=>{Ol(),s(Yt(r,"network-request-failed"))},timeout:Mg.get()})}if(!((f=(c=Kt().gapi)===null||c===void 0?void 0:c.iframes)===null||f===void 0)&&f.Iframe)n(gapi.iframes.getContext());else if(!((d=Kt().gapi)===null||d===void 0)&&d.load)w();else{const y=fg("iframefcb");return Kt()[y]=()=>{gapi.load?w():s(Yt(r,"network-request-failed"))},ug(`https://apis.google.com/js/api.js?onload=${y}`).catch(_=>s(_))}}).catch(n=>{throw Li=null,n})}let Li=null;function kg(r){return Li=Li||Pg(r),Li}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bg=new fi(5e3,15e3),Lg="__/auth/iframe",Fg="emulator/auth/iframe",Ug={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Vg=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Hg(r){const n=r.config;re(n.authDomain,r,"auth-domain-config-required");const s=n.emulator?ua(n,Fg):`https://${r.config.authDomain}/${Lg}`,c={apiKey:n.apiKey,appName:r.name,v:ni},f=Vg.get(r.config.apiHost);f&&(c.eid=f);const d=r._getFrameworks();return d.length&&(c.fw=d.join(",")),`${s}?${ti(c).slice(1)}`}async function Gg(r){const n=await kg(r),s=Kt().gapi;return re(s,r,"internal-error"),n.open({where:document.body,url:Hg(r),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ug,dontclear:!0},c=>new Promise(async(f,d)=>{await c.restyle({setHideOnLeave:!1});const w=Yt(r,"network-request-failed"),y=Kt().setTimeout(()=>{d(w)},Bg.get());function _(){Kt().clearTimeout(y),f(c)}c.ping(_).then(_,()=>{d(w)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Xg=500,jg=600,zg="_blank",Yg="http://localhost";class Dl{constructor(n){this.window=n,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Kg(r,n,s,c=Xg,f=jg){const d=Math.max((window.screen.availHeight-f)/2,0).toString(),w=Math.max((window.screen.availWidth-c)/2,0).toString();let y="";const _=Object.assign(Object.assign({},Wg),{width:c.toString(),height:f.toString(),top:d,left:w}),E=ht().toLowerCase();s&&(y=Ah(E)?zg:s),Eh(E)&&(n=n||Yg,_.scrollbars="yes");const S=Object.entries(_).reduce((z,[W,fe])=>`${z}${W}=${fe},`,"");if(Sd(E)&&y!=="_self")return Zg(n||"",y),new Dl(null);const N=window.open(n||"",y,S);re(N,r,"popup-blocked");try{N.focus()}catch{}return new Dl(N)}function Zg(r,n){const s=document.createElement("a");s.href=r,s.target=n;const c=document.createEvent("MouseEvent");c.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(c)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg="__/auth/handler",Qg="emulator/auth/handler";function Ml(r,n,s,c,f,d){re(r.config.authDomain,r,"auth-domain-config-required"),re(r.config.apiKey,r,"invalid-api-key");const w={apiKey:r.config.apiKey,appName:r.name,authType:s,redirectUrl:c,v:ni,eventId:f};if(n instanceof vh){n.setDefaultLanguage(r.languageCode),w.providerId=n.providerId||"",R1(n.getCustomParameters())||(w.customParameters=JSON.stringify(n.getCustomParameters()));for(const[_,E]of Object.entries(d||{}))w[_]=E}if(n instanceof gi){const _=n.getScopes().filter(E=>E!=="");_.length>0&&(w.scopes=_.join(","))}r.tenantId&&(w.tid=r.tenantId);const y=w;for(const _ of Object.keys(y))y[_]===void 0&&delete y[_];return`${Jg(r)}?${ti(y).slice(1)}`}function Jg({config:r}){return r.emulator?ua(r,Qg):`https://${r.authDomain}/${qg}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so="webStorageSupport";class $g{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ph,this._completeRedirectFn=_g,this._overrideRedirectResult=Cg}async _openPopup(n,s,c,f){var d;tn((d=this.eventManagers[n._key()])===null||d===void 0?void 0:d.manager,"_initialize() not called before _openPopup()");const w=Ml(n,s,c,No(),f);return Kg(n,w,pa())}async _openRedirect(n,s,c,f){return await this._originValidation(n),eg(Ml(n,s,c,No(),f)),new Promise(()=>{})}_initialize(n){const s=n._key();if(this.eventManagers[s]){const{manager:f,promise:d}=this.eventManagers[s];return f?Promise.resolve(f):(tn(d,"If manager is not set, promise should be"),d)}const c=this.initAndGetManager(n);return this.eventManagers[s]={promise:c},c.catch(()=>{delete this.eventManagers[s]}),c}async initAndGetManager(n){const s=await Gg(n),c=new Tg(n);return s.register("authEvent",f=>(re(f==null?void 0:f.authEvent,n,"invalid-auth-event"),{status:c.onEvent(f.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[n._key()]={manager:c},this.iframes[n._key()]=s,c}_isIframeWebStorageSupported(n,s){this.iframes[n._key()].send(so,{type:so},f=>{var d;const w=(d=f==null?void 0:f[0])===null||d===void 0?void 0:d[so];w!==void 0&&s(!!w),Ft(n,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(n){const s=n._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=Og(n)),this.originValidationPromises[s]}get _shouldInitProactively(){return bh()||da()||ws()}}const e2=$g;var Pl="@firebase/auth",kl="0.21.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(n){this.auth=n,this.internalListeners=new Map}getUid(){var n;return this.assertAuthConfigured(),((n=this.auth.currentUser)===null||n===void 0?void 0:n.uid)||null}async getToken(n){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(n)}:null}addAuthTokenListener(n){if(this.assertAuthConfigured(),this.internalListeners.has(n))return;const s=this.auth.onIdTokenChanged(c=>{n((c==null?void 0:c.stsTokenManager.accessToken)||null)});this.internalListeners.set(n,s),this.updateProactiveRefresh()}removeAuthTokenListener(n){this.assertAuthConfigured();const s=this.internalListeners.get(n);!s||(this.internalListeners.delete(n),s(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function r2(r){lr(new Un("auth",(n,{options:s})=>{const c=n.getProvider("app").getImmediate(),f=n.getProvider("heartbeat"),{apiKey:d,authDomain:w}=c.options;return((y,_)=>{re(d&&!d.includes(":"),"invalid-api-key",{appName:y.name}),re(!(w!=null&&w.includes(":")),"argument-error",{appName:y.name});const E={apiKey:d,authDomain:w,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Th(r)},S=new Od(y,_,E);return hd(S,s),S})(c,f)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,s,c)=>{n.getProvider("auth-internal").initialize()})),lr(new Un("auth-internal",n=>{const s=Es(n.getProvider("auth").getImmediate());return(c=>new t2(c))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),In(Pl,kl,n2(r)),In(Pl,kl,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2=5*60,s2=nc("authIdTokenMaxAge")||i2;let Bl=null;const o2=r=>async n=>{const s=n&&await n.getIdTokenResult(),c=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(c&&c>s2)return;const f=s==null?void 0:s.token;Bl!==f&&(Bl=f,await fetch(r,{method:f?"POST":"DELETE",headers:f?{Authorization:`Bearer ${f}`}:{}}))};function a2(r=oc()){const n=ko(r,"auth");if(n.isInitialized())return n.getImmediate();const s=cd(r,{popupRedirectResolver:e2,persistence:[cg,Qd,Ph]}),c=nc("authTokenSyncURL");if(c){const d=o2(c);Yd(s,d,()=>d(s.currentUser)),zd(s,w=>d(w))}const f=tc("auth");return f&&Dd(s,`http://${f}`),s}r2("Browser");async function l2(r){const s=sc({apiKey:"AIzaSyBR-UKnuOQ4eXJfhVLAT_MYDYDSiLDuh-s",authDomain:"scouting-6e3b0.firebaseapp.com",projectId:"scouting-6e3b0",storageBucket:"scouting-6e3b0.appspot.com",messagingSenderId:"1096923351613",appId:"1:1096923351613:web:4f2313a3d412a18f5c3854",measurementId:"G-4FEG1F5QK5"});sd(s);const c=a2();return await jd(c,"scout@frc.com",r).then(f=>{console.log("Successfully signed in")}).catch(f=>(console.log("Could not sign in:",f),Promise.reject("Sign-in failed"))),Promise.resolve(!0)}function Ll(r){let n;return{c(){n=Tt("div"),n.textContent="Successfully signed in",Iu(n,"color","green")},m(s,c){fr(s,n,c)},d(s){s&&Gn(n)}}}function Fl(r){let n;return{c(){n=Tt("div"),n.textContent="Match data read!"},m(s,c){fr(s,n,c)},d(s){s&&Gn(n)}}}function Ul(r){let n,s,c;return{c(){n=Tt("button"),n.textContent="Stop Scanning"},m(f,d){fr(f,n,d),s||(c=Dr(n,"click",r[6]),s=!0)},p:Bn,d(f){f&&Gn(n),s=!1,c()}}}function Vl(r){let n,s,c,f;function d(y){r[9](y)}let w={close:r[6]};return r[1]!==void 0&&(w.result=r[1]),s=new c1({props:w}),oo.push(()=>Du(s,"result",d)),{c(){n=Tt("div"),Mu(s.$$.fragment),Lr(n,"class","scanner-container svelte-asmgfm")},m(y,_){fr(y,n,_),jl(s,n,null),f=!0},p(y,_){const E={};!c&&_&2&&(c=!0,E.result=y[1],Su(()=>c=!1)),s.$set(E)},i(y){f||(Ur(s.$$.fragment,y),f=!0)},o(y){ho(s.$$.fragment,y),f=!1},d(y){y&&Gn(n),zl(s)}}}function c2(r){let n,s,c,f,d,w,y,_,E,S,N,z,W,fe,te,Qe,it,ge,K,J=r[2]===!0&&Ll(),Re=r[1]!==null&&Fl(),ne=r[3]&&Ul(r),k=r[3]&&Vl(r);return{c(){n=Tt("div"),s=Tt("div"),c=Tt("div"),c.textContent="Enter Password",f=gn(),d=Tt("input"),w=gn(),y=Tt("button"),y.textContent="Sign In",_=gn(),J&&J.c(),E=gn(),S=Tt("div"),Re&&Re.c(),N=gn(),z=Tt("button"),z.textContent="Scan match",W=gn(),ne&&ne.c(),fe=gn(),te=Tt("button"),te.textContent="Upload",Qe=gn(),k&&k.c(),Lr(d,"type","text"),Lr(s,"class","mdown mtop svelte-asmgfm"),Lr(n,"class","main-container svelte-asmgfm")},m(ee,L){fr(ee,n,L),xt(n,s),xt(s,c),xt(s,f),xt(s,d),Va(d,r[0]),xt(s,w),xt(s,y),xt(s,_),J&&J.m(s,null),xt(n,E),xt(n,S),Re&&Re.m(S,null),xt(S,N),xt(S,z),xt(S,W),ne&&ne.m(S,null),xt(S,fe),xt(S,te),xt(n,Qe),k&&k.m(n,null),it=!0,ge||(K=[Dr(d,"input",r[8]),Dr(y,"click",r[4]),Dr(z,"click",r[5]),Dr(te,"click",r[7])],ge=!0)},p(ee,[L]){L&1&&d.value!==ee[0]&&Va(d,ee[0]),ee[2]===!0?J||(J=Ll(),J.c(),J.m(s,null)):J&&(J.d(1),J=null),ee[1]!==null?Re||(Re=Fl(),Re.c(),Re.m(S,N)):Re&&(Re.d(1),Re=null),ee[3]?ne?ne.p(ee,L):(ne=Ul(ee),ne.c(),ne.m(S,fe)):ne&&(ne.d(1),ne=null),ee[3]?k?(k.p(ee,L),L&8&&Ur(k,1)):(k=Vl(ee),k.c(),Ur(k,1),k.m(n,null)):k&&(Ru(),ho(k,1,1,()=>{k=null}),Ou())},i(ee){it||(Ur(k),it=!0)},o(ee){ho(k),it=!1},d(ee){ee&&Gn(n),J&&J.d(),Re&&Re.d(),ne&&ne.d(),k&&k.d(),ge=!1,ur(K)}}}function h2(r,n,s){let c="",f=null,d=!1;function w(){l2(c).then(W=>{W===!0&&s(2,d=!0)})}let y=!1;function _(){s(1,f=null),s(3,y=!0)}function E(){s(3,y=!1)}function S(){console.log("Saving match...");let W=(void 0)(f.teamNumber,f.matchNumber,"PABEN",f.data);W===!0?console.log("Save Success"):console.log("Save failed",W)}function N(){c=this.value,s(0,c)}function z(W){f=W,s(1,f)}return[c,f,d,y,w,_,E,S,N,z]}class u2 extends Kl{constructor(n){super(),Yl(this,n,h2,c2,Wl,{})}}new u2({target:document.getElementById("app")});
